// Automatically generated file.  Do not edit!
var g;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b=typeof Symbol!="undefined"&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if(typeof a.length=="number")return{next:aa(a)};throw Error(String(a)+" is not an iterable or ArrayLike");}var ca=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ea=da(this);function fa(a,b){if(b)a:{var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&b!=null&&ca(c,a,{configurable:!0,writable:!0,value:b})}}
fa("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,h){this.Yn=f;ca(this,"description",{configurable:!0,writable:!0,value:h})}if(a)return a;c.prototype.toString=function(){return this.Yn};var d="jscomp_symbol_"+(Math.random()*1E9>>>0)+"_",e=0;return b});
fa("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ea[b[c]];typeof d==="function"&&typeof d.prototype[a]!="function"&&ca(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(aa(this))}})}return a});function ha(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function ia(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}fa("Array.prototype.keys",function(a){return a?a:function(){return ia(this,function(b){return b})}});fa("Object.is",function(a){return a?a:function(b,c){return b===c?b!==0||1/b===1/c:b!==b&&c!==c}});
fa("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(c<0&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});
fa("String.prototype.includes",function(a){return a?a:function(b,c){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return(this+"").indexOf(b,c||0)!==-1}});function ja(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
fa("WeakMap",function(a){function b(l){this.Sd=(k+=Math.random()+1).toString();if(l){l=ba(l);for(var m;!(m=l.next()).done;)m=m.value,this.set(m[0],m[1])}}function c(){}function d(l){var m=typeof l;return m==="object"&&l!==null||m==="function"}function e(l){if(!ja(l,h)){var m=new c;ca(l,h,{value:m})}}function f(l){var m=Object[l];m&&(Object[l]=function(n){if(n instanceof c)return n;Object.isExtensible(n)&&e(n);return m(n)})}if(function(){if(!a||!Object.seal)return!1;try{var l=Object.seal({}),m=Object.seal({}),
n=new a([[l,2],[m,3]]);if(n.get(l)!=2||n.get(m)!=3)return!1;n.delete(l);n.set(m,4);return!n.has(l)&&n.get(m)==4}catch(v){return!1}}())return a;var h="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var k=0;b.prototype.set=function(l,m){if(!d(l))throw Error("Invalid WeakMap key");e(l);if(!ja(l,h))throw Error("WeakMap key fail: "+l);l[h][this.Sd]=m;return this};b.prototype.get=function(l){return d(l)&&ja(l,h)?l[h][this.Sd]:void 0};b.prototype.has=function(l){return d(l)&&
ja(l,h)&&ja(l[h],this.Sd)};b.prototype.delete=function(l){return d(l)&&ja(l,h)&&ja(l[h],this.Sd)?delete l[h][this.Sd]:!1};return b});
fa("Map",function(a){function b(){var k={};return k.Sc=k.next=k.head=k}function c(k,l){var m=k[1];return ha(function(){if(m){for(;m.head!=k[1];)m=m.Sc;for(;m.next!=m.head;)return m=m.next,{done:!1,value:l(m)};m=null}return{done:!0,value:void 0}})}function d(k,l){var m=l&&typeof l;m=="object"||m=="function"?f.has(l)?m=f.get(l):(m=""+ ++h,f.set(l,m)):m="p_"+l;var n=k[0][m];if(n&&ja(k[0],m))for(k=0;k<n.length;k++){var v=n[k];if(l!==l&&v.key!==v.key||l===v.key)return{id:m,list:n,index:k,ib:v}}return{id:m,
list:n,index:-1,ib:void 0}}function e(k){this[0]={};this[1]=b();this.size=0;if(k){k=ba(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}}if(function(){if(!a||typeof a!="function"||!a.prototype.entries||typeof Object.seal!="function")return!1;try{var k=Object.seal({x:4}),l=new a(ba([[k,"s"]]));if(l.get(k)!="s"||l.size!=1||l.get({x:4})||l.set({x:4},"t")!=l||l.size!=2)return!1;var m=l.entries(),n=m.next();if(n.done||n.value[0]!=k||n.value[1]!="s")return!1;n=m.next();return n.done||n.value[0].x!=
4||n.value[1]!="t"||!m.next().done?!1:!0}catch(v){return!1}}())return a;var f=new WeakMap;e.prototype.set=function(k,l){k=k===0?0:k;var m=d(this,k);m.list||(m.list=this[0][m.id]=[]);m.ib?m.ib.value=l:(m.ib={next:this[1],Sc:this[1].Sc,head:this[1],key:k,value:l},m.list.push(m.ib),this[1].Sc.next=m.ib,this[1].Sc=m.ib,this.size++);return this};e.prototype.delete=function(k){k=d(this,k);return k.ib&&k.list?(k.list.splice(k.index,1),k.list.length||delete this[0][k.id],k.ib.Sc.next=k.ib.next,k.ib.next.Sc=
k.ib.Sc,k.ib.head=null,this.size--,!0):!1};e.prototype.clear=function(){this[0]={};this[1]=this[1].Sc=b();this.size=0};e.prototype.has=function(k){return!!d(this,k).ib};e.prototype.get=function(k){return(k=d(this,k).ib)&&k.value};e.prototype.entries=function(){return c(this,function(k){return[k.key,k.value]})};e.prototype.keys=function(){return c(this,function(k){return k.key})};e.prototype.values=function(){return c(this,function(k){return k.value})};e.prototype.forEach=function(k,l){for(var m=this.entries(),
n;!(n=m.next()).done;)n=n.value,k.call(l,n[1],n[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=0;return e});
var ka={},la;
var ma=28,na=ma,oa=[,2,1,4,3];
var p=function(){return typeof self==="object"?self:typeof window==="object"?window:typeof global==="object"?global:this}();
var q={};p.Blockly||(p.Blockly={});p.Blockly.Msg||(p.Blockly.Msg=q);function pa(a){a=String(a).toLowerCase().trim();var b=qa[a];if(b)return b;b=a.substring(0,2)=="0x"?"#"+a.substring(2):a;b=b[0]=="#"?b:"#"+b;if(/^#[0-9a-f]{6}$/.test(b))return b;if(/^#[0-9a-f]{3}$/.test(b))return["#",b[1],b[1],b[2],b[2],b[3],b[3]].join("");var c=a.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return c&&(a=Number(c[1]),b=Number(c[2]),c=Number(c[3]),a>=0&&a<256&&b>=0&&b<256&&c>=0&&c<256)?ra(a,b,c):null}
function ra(a,b,c){b=a<<16|b<<8|c;return a<16?"#"+(16777216|b).toString(16).substr(1):"#"+b.toString(16)}function sa(a){a=pa(a);if(!a)return[0,0,0];a=parseInt(a.substr(1),16);return[a>>16,a>>8&255,a&255]}function ta(a,b,c){a=pa(a);if(!a)return null;b=pa(b);if(!b)return null;a=sa(a);b=sa(b);return ra(Math.round(b[0]+c*(a[0]-b[0])),Math.round(b[1]+c*(a[1]-b[1])),Math.round(b[2]+c*(a[2]-b[2])))}
var qa={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"};function r(a,b){this.x=a;this.y=b}function ua(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1}function va(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}function wa(a,b){return new r(a.x-b.x,a.y-b.y)}function xa(a,b){return new r(a.x+b.x,a.y+b.y)}r.prototype.clone=function(){return new r(this.x,this.y)};r.prototype.scale=function(a){this.x*=a;this.y*=a;return this};r.prototype.translate=function(a,b){this.x+=a;this.y+=b;return this};function ya(a,b,c,d){this.top=a;this.bottom=b;this.left=c;this.right=d}ya.prototype.contains=function(a,b){return a>=this.left&&a<=this.right&&b>=this.top&&b<=this.bottom};function za(a){return a.length?a.reduce(function(b,c){return b.length<c.length?b:c}).length:0}function Aa(a,b){if(!a.length)return 0;if(a.length==1)return a[0].length;var c=0;b=b||za(a);for(var d=0;d<b;d++){for(var e=a[0][d],f=1;f<a.length;f++)if(e!=a[f][d])return c;e==" "&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f][d])&&e!=" ")return c;return b}
function Ba(a,b){if(!a.length)return 0;if(a.length==1)return a[0].length;var c=0;b=b||za(a);for(var d=0;d<b;d++){for(var e=a[0].substr(-d-1,1),f=1;f<a.length;f++)if(e!=a[f].substr(-d-1,1))return c;e==" "&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f].charAt(a[f].length-d-1))&&e!=" ")return c;return b}
function Ca(a,b){a=a.split("\n");for(var c=0;c<a.length;c++){var d=c;var e=a[c],f=b;if(e.length<=f)var h=e;else{for(var k=e.trim().split(/\s+/),l=0;l<k.length;l++)k[l].length>f&&(f=k[l].length);l=-Infinity;var m=1;do{var n=l;h=e;e=[];var v=k.length/m,w=1;for(l=0;l<k.length-1;l++)w<(l+1.5)/v?(w++,e[l]=!0):e[l]=!1;e=Da(k,e,f);l=Fa(k,e,f);v=k;w=[];for(var F=0;F<v.length;F++)w.push(v[F]),e[F]!==void 0&&w.push(e[F]?"\n":" ");e=w.join("");m++}while(l>n)}a[d]=h}return a.join("\n")}
function Fa(a,b,c){for(var d=[0],e=[],f=0;f<a.length;f++)d[d.length-1]+=a[f].length,b[f]===!0?(d.push(0),e.push(a[f].charAt(a[f].length-1))):b[f]===!1&&d[d.length-1]++;a=Math.max.apply(Math,d);for(f=b=0;f<d.length;f++)b-=Math.pow(Math.abs(c-d[f]),1.5)*2,b-=Math.pow(a-d[f],1.5),".?!".indexOf(e[f])!=-1?b+=c/3:",;)]}".indexOf(e[f])!=-1&&(b+=c/4);d.length>1&&d[d.length-1]<=d[d.length-2]&&(b+=.5);return b}
function Da(a,b,c){for(var d=Fa(a,b,c),e,f=0;f<b.length-1;f++)if(b[f]!=b[f+1]){var h=[].concat(b);h[f]=!h[f];h[f+1]=!h[f+1];var k=Fa(a,h,c);k>d&&(d=k,e=h)}return e?Da(a,e,c):b};function Ga(a,b){this.width=a;this.height=b};function Ha(a){var b;(b=Ia(a,"display"))||(b=a.currentStyle?a.currentStyle.display:null);if((b||a.style&&a.style.display)!="none")return new Ga(a.offsetWidth,a.offsetHeight);b=a.style;var c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";var f=a.offsetWidth;a=a.offsetHeight;b.display=c;b.position=e;b.visibility=d;return new Ga(f,a)}
function Ia(a,b){return document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""}function Ja(a){var b=new r(0,0);a=a.getBoundingClientRect();var c=document.documentElement;c=new r(window.pageXOffset||c.scrollLeft,window.pageYOffset||c.scrollTop);b.x=a.left+c.x;b.y=a.top+c.y;return b};var Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua;
(function(a){function b(d){return c.indexOf(d.toUpperCase())!=-1}Ua=a;var c=Ua.toUpperCase();Ka=b("Trident")||b("MSIE");La=b("Edge");b("JavaFX");!b("Chrome")&&b("CriOS");Ma=b("WebKit")&&!La;Na=b("Gecko")&&!Ma&&!Ka&&!La;Oa=b("Android");a=p.navigator&&p.navigator.maxTouchPoints;Pa=b("iPad")||b("Macintosh")&&a>0;Qa=b("iPod");Ra=b("iPhone")&&!Pa&&!Qa;Sa=b("Macintosh");Ta=Pa||Oa&&!b("Mobile")||b("Silk");!Ta&&(Qa||Ra||Oa||b("IEMobile"))})(p.navigator&&p.navigator.userAgent||"");
function Va(a){a.preventDefault();a.stopPropagation()}function Wa(a){return a.target.type=="textarea"||a.target.type=="text"||a.target.type=="number"||a.target.type=="email"||a.target.type=="password"||a.target.type=="search"||a.target.type=="tel"||a.target.type=="url"||a.target.isContentEditable||a.target.dataset&&a.target.dataset.dr=="true"}
function Xa(a){var b=new r(0,0),c=a.getAttribute("x");c&&(b.x=parseInt(c,10));if(c=a.getAttribute("y"))b.y=parseInt(c,10);if(c=(c=a.getAttribute("transform"))&&c.match(Za))b.x+=Number(c[1]),c[3]&&(b.y+=Number(c[3]));(a=a.getAttribute("style"))&&a.indexOf("translate")>-1&&(a=a.match($a))&&(b.x+=Number(a[1]),a[3]&&(b.y+=Number(a[3])));return b}
function ab(a){for(var b=0,c=0;a;){var d=Xa(a);b+=d.x;c+=d.y;if((" "+(a.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!=-1)break;a=a.parentNode}return new r(b,c)}var Za=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,$a=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/;function bb(a){return a.ctrlKey&&Sa?!0:a.button==2}function cb(a,b,c){var d=b.createSVGPoint();d.x=a.clientX;d.y=a.clientY;c||(c=b.getScreenCTM().inverse());return d.matrixTransform(c)}
function db(a){switch(a.deltaMode){default:return{x:a.deltaX,y:a.deltaY};case 1:return{x:a.deltaX*40,y:a.deltaY*40};case 2:return{x:a.deltaX*125,y:a.deltaY*125}}}function eb(a){if(typeof a!="string")return a;a=fb(a,!1);return a.length?String(a[0]):""}
function fb(a,b){var c=[],d=a.split("");d.push("");var e=0;a=[];for(var f=null,h=0;h<d.length;h++){var k=d[h];e==0?k=="%"?((k=a.join(""))&&c.push(k),a.length=0,e=1):a.push(k):e==1?k=="%"?(a.push(k),e=0):b&&"0"<=k&&k<="9"?(e=2,f=k,(k=a.join(""))&&c.push(k),a.length=0):k=="{"?e=3:(a.push("%",k),e=0):e==2?"0"<=k&&k<="9"?f+=k:(c.push(parseInt(f,10)),h--,e=0):e==3&&(k==""?(a.splice(0,0,"%{"),h--,e=0):k!="}"?a.push(k):(e=a.join(""),/[A-Z]\w*/i.test(e)?(k=e.toUpperCase(),(k=k.lastIndexOf("BKY_",0)==0?k.substring(4):
null)&&k in q?(e=q[k],typeof e=="string"?Array.prototype.push.apply(c,fb(e,b)):b?c.push(String(e)):c.push(e)):c.push("%{"+e+"}")):c.push("%{"+e+"}"),e=a.length=0))}(k=a.join(""))&&c.push(k);b=[];for(h=a.length=0;h<c.length;++h)typeof c[h]=="string"?a.push(c[h]):((k=a.join(""))&&b.push(k),a.length=0,b.push(c[h]));(k=a.join(""))&&b.push(k);a.length=0;return b}function gb(){for(var a=hb.length,b=[],c=0;c<20;c++)b[c]=hb.charAt(Math.random()*a);return b.join("")}var hb="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
function ib(){if(jb!==void 0)return jb;if(!p.getComputedStyle)return!1;var a=document.createElement("p"),b="none",c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var d in c)if(a.style[d]!==void 0){a.style[d]="translate3d(1px,1px,1px)";b=p.getComputedStyle(a);if(!b)return document.body.removeChild(a),!1;b=b.getPropertyValue(c[d])}document.body.removeChild(a);return jb=
b!=="none"}var jb;function kb(a,b){b=a.indexOf(b);if(b==-1)return!1;a.splice(b,1);return!0}function lb(a,b){var c=Object.create(null),d=mb(a,!0);b&&(a=nb(a))&&(a=d.indexOf(a),d.splice(a,d.length-a));for(a=0;b=d[a];a++)c[b.type]?c[b.type]++:c[b.type]=1;return c}
function ob(a){var b=typeof a=="string"?eb(a):a,c=Number(b);if(!isNaN(c)&&0<=c&&c<=360){var d=b=a=0,e=Math.floor(c/60),f=c/60-e,h=165.75*.55,k=165.75*(1-.45*f);f=165.75*(1-.45*(1-f));switch(e){case 1:a=k;b=165.75;d=h;break;case 2:a=h;b=165.75;d=f;break;case 3:a=h;b=k;d=165.75;break;case 4:a=f;b=h;d=165.75;break;case 5:a=165.75;b=h;d=k;break;case 6:case 0:a=165.75,b=f,d=h}a=ra(Math.floor(a),Math.floor(b),Math.floor(d));return{yp:c,gg:a}}if(c=pa(b))return{yp:null,gg:c};c='Invalid colour: "'+b+'"';a!=
b&&(c+=' (from "'+a+'")');throw Error(c);};var pb="ontouchstart"in p||!!(p.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!p.navigator||!p.navigator.maxTouchPoints&&!p.navigator.msMaxTouchPoints),qb=null,rb={};
p.PointerEvent?rb={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:pb&&(rb={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]});var sb=0;
function tb(a,b){ub();a.changedTouches&&a.changedTouches.length!=1||(sb=setTimeout(function(){a.changedTouches&&(a.button=2,a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY);b&&vb(b,a)},750))}function ub(){sb&&(clearTimeout(sb),sb=0)}function wb(a){return a.pointerId!=void 0?a.pointerId:a.changedTouches&&a.changedTouches[0]&&a.changedTouches[0].identifier!==void 0&&a.changedTouches[0].identifier!==null?a.changedTouches[0].identifier:"mouse"}
function yb(a){var b=wb(a);return qb!==void 0&&qb!==null?qb==b:a.type=="mousedown"||a.type=="touchstart"||a.type=="pointerdown"?(qb=b,!0):!1}function zb(a){return a.type.lastIndexOf("touch",0)==0||a.type.lastIndexOf("mouse",0)==0||a.type.lastIndexOf("pointer",0)==0}function Ab(a){return a.type.lastIndexOf("touch",0)==0||a.type.lastIndexOf("pointer",0)==0}
function Bb(a){var b=[];if(a.changedTouches)for(var c=0;c<a.changedTouches.length;c++)b[c]={type:a.type,changedTouches:[a.changedTouches[c]],target:a.target,stopPropagation:function(){a.stopPropagation()},preventDefault:function(){a.preventDefault()}};else b.push(a);return b};function t(a,b,c,d,e,f){function h(w){var F=!e;w=Bb(w);for(var Ya=0,Ea;Ea=w[Ya];Ya++)if(!F||!zb(Ea)||yb(Ea)){var xb=Ea;if(xb.type.lastIndexOf("touch",0)==0){var Zd=xb.changedTouches[0];xb.clientX=Zd.clientX;xb.clientY=Zd.clientY}c?d.call(c,Ea):d(Ea);k=!0}}var k=!1,l=[];if(p.PointerEvent&&b in rb)for(var m=0,n;n=rb[b][m];m++)a.addEventListener(n,h,!1),l.push([a,n,h]);else if(a.addEventListener(b,h,!1),l.push([a,b,h]),b in rb){var v=function(w){h(w);var F=!f;k&&F&&w.preventDefault()};for(m=0;n=rb[b][m];m++)a.addEventListener(n,
v,!1),l.push([a,n,v])}return l}function Cb(a,b,c,d){function e(m){c?d.call(c,m):d(m)}var f=[];if(p.PointerEvent&&b in rb)for(var h=0,k;k=rb[b][h];h++)a.addEventListener(k,e,!1),f.push([a,k,e]);else if(a.addEventListener(b,e,!1),f.push([a,b,e]),b in rb){var l=function(m){if(m.changedTouches&&m.changedTouches.length==1){var n=m.changedTouches[0];m.clientX=n.clientX;m.clientY=n.clientY}e(m);m.preventDefault()};for(h=0;k=rb[b][h];h++)a.addEventListener(k,l,!1),f.push([a,k,l])}return f}
function u(a){for(;a.length;){var b=a.pop();b[0].removeEventListener(b[1],b[2],!1)}};
function Db(){this.ad=Object.create(null);this.Ie=Object.create(null)}function Eb(a,b){var c=b.component.id;if(a.ad[c])throw Error('Plugin "'+c+'" with capabilities "'+a.ad[c].Fc+'" already added.');a.ad[c]=b;for(var d=[],e=0;e<b.Fc.length;e++){var f=String(b.Fc[e]).toLowerCase();d.push(f);a.Ie[f]===void 0?a.Ie[f]=[c]:a.Ie[f].push(c)}a.ad[c].Fc=d}
function Fb(a,b){var c=a.ad[b];if(c){for(var d=0;d<c.Fc.length;d++){var e=String(c.Fc[d]).toLowerCase();a.Ie[e].splice(a.Ie[e].indexOf(b),1)}delete a.ad[b]}}function Gb(a,b){var c=Hb;c=String(c).toLowerCase();return a.ad[b].Fc.indexOf(c)!==-1}function Ib(a,b){b=String(b).toLowerCase();b=a.Ie[b];if(!b)return[];var c=[],d=[],e=a.ad;b.forEach(function(f){d.push(e[f])});d.sort(function(f,h){return f.weight-h.weight});d.forEach(function(f){c.push(f.component)});return c}function Jb(a){this.ug=a}
Jb.prototype.toString=function(){return this.ug};var Kb=new Jb("positionable"),Lb=new Jb("drag_target"),Hb=new Jb("delete_area"),Mb=new Jb("autohideable");
function x(a){this.bq=a}x.prototype.toString=function(){return this.bq};var Nb=new x("animate"),Ob=new x("circle"),Pb=new x("clipPath"),Qb=new x("defs"),Rb=new x("feComposite"),Sb=new x("feGaussianBlur"),Tb=new x("fePointLight"),Ub=new x("feSpecularLighting"),Vb=new x("filter"),Wb=new x("g"),Xb=new x("image"),Yb=new x("line"),Zb=new x("path"),$b=new x("pattern"),ac=new x("rect"),bc=new x("svg"),cc=new x("text"),dc=new x("tspan");var ec=null,fc=0,gc=null;function y(a,b,c){a=document.createElementNS("http://www.w3.org/2000/svg",String(a));for(var d in b)a.setAttribute(d,b[d]);document.body.runtimeStyle&&(a.runtimeStyle=a.currentStyle=a.style);c&&c.appendChild(a);return a}function z(a,b){var c=a.getAttribute("class")||"";a.setAttribute("class",c+" "+b)}
function hc(a,b){for(var c=(a.getAttribute("class")||"").split(/\s+/),d=0;d<c.length;d++)c[d]&&c[d]!=b||(c.splice(d,1),d--);c.length?a.setAttribute("class",c.join(" ")):a.removeAttribute("class")}function ic(a,b){return(" "+(a.getAttribute("class")||"")+" ").indexOf(" "+b+" ")!=-1}function A(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function jc(a,b){var c=b.nextSibling;b=b.parentNode;if(!b)throw Error("Reference node has no parent.");c?b.insertBefore(a,c):b.appendChild(a)}
function kc(a,b){a.style.transform=b;a.style["-webkit-transform"]=b}function lc(){fc++;ec||(ec=Object.create(null))}function mc(){fc--;fc||(ec=null)}function nc(a,b,c,d){var e=a.textContent;a=e+"\n"+a.className.baseVal;var f;if(ec&&(f=ec[a]))return f;gc||(f=document.createElement("canvas"),f.className="blocklyComputeCanvas",document.body.appendChild(f),gc=f.getContext("2d"));gc.font=c+" "+b+" "+d;f=gc.measureText(e).width;ec&&(ec[a]=f);return f}
function oc(a,b,c,d){var e=document.createElement("span");e.style.font=c+" "+b+" "+d;e.textContent=a;a=document.createElement("div");a.style.width="1px";a.style.height=0;b=document.createElement("div");b.style.display="flex";b.style.position="fixed";b.style.top=0;b.style.left=0;b.appendChild(e);b.appendChild(a);document.body.appendChild(b);try{c={},b.style.alignItems="baseline",c.Ib=a.offsetTop-e.offsetTop,b.style.alignItems="flex-end",c.height=a.offsetTop-e.offsetTop}finally{document.body.removeChild(b)}return c}
;function pc(a,b,c){if(c<a){var d=c;c=a;a=d}return Math.max(a,Math.min(b,c))};

var qc,rc,sc,tc=null,uc=null,vc=null,wc=null,xc="",yc="";
function zc(){if(!qc){var a=document.createElement("div");a.className="blocklyDropDownDiv";(Ac||document.body).appendChild(a);qc=a;var b=document.createElement("div");b.className="blocklyDropDownContent";a.appendChild(b);rc=b;b=document.createElement("div");b.className="blocklyDropDownArrow";a.appendChild(b);sc=b;qc.style.opacity=0;qc.style.transition="transform 0.25s, opacity 0.25s";a.addEventListener("focusin",function(){z(a,"blocklyFocused")});a.addEventListener("focusout",function(){hc(a,"blocklyFocused")})}}
function Bc(a,b,c,d){a=Cc(a,c.left,c.right,d.width);return{Vj:a.Qe,Wj:b,Fj:a.Qe,Gj:b+16,Ge:a.Ge,cj:-9,aj:!0,bj:!0}}function Dc(a,b,c,d){a=Cc(a,c.left,c.right,d.width);return{Vj:a.Qe,Wj:b-d.height,Fj:a.Qe,Gj:b-d.height-16,Ge:a.Ge,cj:d.height-2-8,aj:!1,bj:!0}}function Cc(a,b,c,d){var e=a;a=pc(b,a-d/2,c-d);b=pc(12,e-8-a,d-12-16);return{Ge:b,Qe:a}}function Ec(){var a=qc;a.style.transform="translate(0, 0)";a.style.opacity=0;vc=setTimeout(function(){Fc()},250);wc&&(wc(),wc=null)}
function Fc(){if(uc){vc&&clearTimeout(vc);var a=qc;a.style.transform="";a.style.left="";a.style.top="";a.style.opacity=0;a.style.display="none";a.style.backgroundColor="";a.style.borderColor="";wc&&(wc(),wc=null);rc.textContent="";rc.style.width="";uc=null;xc&&(hc(a,xc),xc="");yc&&(hc(a,yc),yc="");Gc(Hc)}};var Ic=Object.create(null);function Jc(a){this.ug=a}Jc.prototype.toString=function(){return this.ug};var Kc=new Jc("connectionChecker"),Lc=new Jc("cursor"),Mc=new Jc("event"),Nc=new Jc("field"),Oc=new Jc("renderer"),Pc=new Jc("toolbox"),Qc=new Jc("theme"),Rc=new Jc("flyoutsVerticalToolbox"),Sc=new Jc("metricsManager"),Tc=new Jc("blockDragger");
function B(a,b,c){if(!(a instanceof Jc)&&typeof a!="string"||String(a).trim()=="")throw Error('Invalid type "'+a+'". The type must be a non-empty string or a Blockly.registry.Type.');a=String(a).toLowerCase();if(typeof b!="string"||b.trim()=="")throw Error('Invalid name "'+b+'". The name must be a non-empty string.');b=b.toLowerCase();if(!c)throw Error("Can not register a null value");var d=Ic[a];d||(d=Ic[a]=Object.create(null));switch(a){case String(Nc):if(typeof c.M!="function")throw Error('Type "'+
a+'" must have a fromJson function');}if(d[b])throw Error('Name "'+b+'" with type "'+a+'" already registered.');d[b]=c}function Uc(a,b,c){a=String(a).toLowerCase();b=b.toLowerCase();var d=Ic[a];if(!d||!d[b]){b="Unable to find ["+b+"]["+a+"] in the registry.";if(c)throw Error(b+" You must require or register a "+a+" plugin.");console.warn(b);return null}return d[b]}function Vc(a,b,c){b=b.plugins[a.toString()]||"default";return typeof b=="function"?b:Uc(a,b,c)};var Wc="",Xc=!0,C=0,Yc=["create","move"],Zc=[];function D(a){C==0&&(Zc.length||setTimeout($c,0),Zc.push(a))}function $c(){for(var a=ad(Zc,!0),b=Zc.length=0,c;c=a[b];b++)if(c.Ta){var d=bd[c.Ta]||null;if(d){var e=c;if(e.Za)for(d.se.push(e),d.Bg.length=0;d.se.length>d.Hl&&d.Hl>=0;)d.se.shift();for(var f=0;c=d.Ga[f];f++)c(e)}}}
function ad(a,b){a=a.slice();b||a.reverse();for(var c=[],d=Object.create(null),e=0,f;f=a[e];e++)if(!f.di()){var h=[f.ak?"ui":f.type,f.ga,f.Ta].join(" "),k=d[h],l=k?k.event:null;if(!k)d[h]={event:f,index:e},c.push(f);else if(f.type=="move"&&k.index==e-1)l.fe=f.fe,l.ee=f.ee,l.qd=f.qd,k.index=e;else if(f.type=="change"&&f.element==l.element&&f.name==l.name)l.newValue=f.newValue;else if(f.type=="viewport_change")l.Wb=f.Wb,l.Vb=f.Vb,l.scale=f.scale,l.vg=f.vg;else if(f.type!="click"||l.type!="bubble_open")d[h]=
{event:f,index:e},c.push(f)}a=c.filter(function(m){return!m.di()});b||a.reverse();for(e=1;f=a[e];e++)f.type=="change"&&f.element=="mutation"&&a.unshift(a.splice(e,1)[0]);return a}function E(a){Wc=typeof a=="boolean"?a?gb():"":a}function cd(a){var b=[];a=mb(a,!1);for(var c=0,d;d=a[c];c++)b[c]=d.id;return b}function G(a){return Uc(Mc,a)}
function dd(a){if((a.type=="move"||a.type=="create")&&a.Ta){var b=bd[a.Ta]||null,c=b.yb(a.ga);if(c){a=Xc;try{Xc=!1;var d=c.getParent();if(d&&d.isEnabled()){var e=mb(c,!1);b=0;for(var f;f=e[b];b++)f.Ac(!0)}else if((c.s||c.B)&&!b.qb()){do c.Ac(!1),c=nb(c);while(c)}}finally{Xc=a}}}};
function ed(){this.wc=null;this.Ta=void 0;this.group=Wc;this.Za=Xc}g=ed.prototype;g.ak=!1;g.R=function(){var a={type:this.type};this.group&&(a.group=this.group);return a};g.M=function(a){this.wc=!1;this.group=a.group};g.di=function(){return!1};g.run=function(){};function fd(a){if(a.Ta)var b=bd[a.Ta]||null;if(!b)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return b};function H(a,b){a.i=b.prototype;a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function gd(a,b){for(var c in b)a[c]=b[c]}function hd(a){return Object.values?Object.values(a):Object.keys(a).map(function(b){return a[b]})};function I(a){return document.createElementNS("https://developers.google.com/blockly/xml",a)};function id(a){for(var b=J,c=I("xml"),d=jd(b),e=I("variables"),f=0,h;h=d[f];f++){var k=I("variable");k.appendChild(document.createTextNode(h.name));h.type&&k.setAttribute("type",h.type);k.id=h.Wa();e.appendChild(k)}e.hasChildNodes()&&c.appendChild(e);e=[].concat(b.Ni);e.length>1&&(b.Bc.offset=Math.sin(3*Math.PI/180),b.o&&(b.Bc.offset*=-1),e.sort(b.Bc));for(d=0;f=e[d];d++)c.appendChild(f.mr(a));b=b.Ca(!0);for(d=0;e=b[d];d++)c.appendChild(kd(e,a));return c}
function kd(a,b){if(a.Cb()&&(a=ld(a,!1)[0],!a))return new DocumentFragment;var c;a.j.o&&(c=a.j.eg());b=md(a,b);var d=a.ka();b.setAttribute("x",Math.round(a.j.o?c-d.x:d.x));b.setAttribute("y",Math.round(d.y));return b}
function md(a,b){if(a.Cb())return(a=ld(a,!1)[0])?md(a):new DocumentFragment;var c=I(a.T?"shadow":"block");c.setAttribute("type",a.type);b||c.setAttribute("id",a.id);if(a.od){var d=a.od();d&&(d.hasChildNodes()||d.hasAttributes())&&c.appendChild(d)}d=0;for(var e;e=a.u[d];d++)for(var f=0,h;h=e.aa[f];f++){var k=!1;h.name&&(h.Pl?k=!0:h.yf&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),
k=!0));k?(k=I("field"),k.setAttribute("name",h.name||""),k.textContent=h.sb,h=k):h=null;h&&c.appendChild(h)}if(d=a.Yb.text)e=a.Yb.size,f=a.Yb.sn,h=I("comment"),h.appendChild(document.createTextNode(d)),h.setAttribute("pinned",f),h.setAttribute("h",e.height),h.setAttribute("w",e.width),c.appendChild(h);a.data&&(d=I("data"),d.appendChild(document.createTextNode(a.data)),c.appendChild(d));for(d=0;e=a.u[d];d++){var l;f=!0;e.type!=5&&(k=e.connection.F(),e.type==1?l=I("value"):e.type==3&&(l=I("statement")),
h=e.connection.Ue(),!h||k&&k.T||l.appendChild(nd(h,b)),k&&(h=md(k,b),h.nodeType==Node.ELEMENT_NODE&&(l.appendChild(h),f=!1)),l.setAttribute("name",e.name),f||c.appendChild(l))}a.Mc!=void 0&&a.Mc!=a.Bp&&c.setAttribute("inline",a.Mc);a.isCollapsed()&&c.setAttribute("collapsed",!0);a.isEnabled()||c.setAttribute("disabled",!0);od(a)||a.T||c.setAttribute("deletable",!1);a.Ja()||a.T||c.setAttribute("movable",!1);a.Ob()||c.setAttribute("editable",!1);if(d=nb(a))h=md(d,b),h.nodeType==Node.ELEMENT_NODE&&(l=
I("next"),l.appendChild(h),c.appendChild(l));h=a.A&&a.A.Ue();!h||d&&d.T||l.appendChild(nd(h,b));return c}function nd(a,b){for(var c=a=a.cloneNode(!0),d;c;)if(b&&c.nodeName=="shadow"&&c.removeAttribute("id"),c.firstChild)c=c.firstChild;else{for(;c&&!c.nextSibling;)d=c,c=c.parentNode,d.nodeType==Node.TEXT_NODE&&d.data.trim()==""&&c.firstChild!=d&&A(d);c&&(d=c,c=c.nextSibling,d.nodeType==Node.TEXT_NODE&&d.data.trim()==""&&A(d))}return a}
function pd(a){return(new XMLSerializer).serializeToString(a).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")}function qd(a){var b=(new DOMParser).parseFromString(a,"text/xml");if(!b||!b.documentElement||b.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+a);return b.documentElement}
function rd(a,b){var c;b.o&&(c=b.eg());var d=[];lc();var e=Wc;e||E(!0);b.$a&&b.$a(!1);var f=!0;try{for(var h=0,k;k=a.childNodes[h];h++){var l=k.nodeName.toLowerCase(),m=k;if(l=="block"||l=="shadow"&&!Xc){var n=sd(m,b);d.push(n.id);var v=m.hasAttribute("x")?parseInt(m.getAttribute("x"),10):10,w=m.hasAttribute("y")?parseInt(m.getAttribute("y"),10):10;isNaN(v)||isNaN(w)||n.moveBy(b.o?c-v:v,w);f=!1}else{if(l=="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(l=="variables"){if(f)for(var F=
void 0,Ya=b,Ea=0;F=m.childNodes[Ea];Ea++){if(F.nodeType==Node.ELEMENT_NODE){var xb=F.getAttribute("type"),Zd=F.getAttribute("id");Ya.dd(F.textContent,xb,Zd)}}else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");f=!1}}}}finally{e||E(!1),mc()}b.$a&&b.$a(!0);D(new (G("finished_loading"))(b))}
function sd(a,b){if(a instanceof td){var c=a;a=b;b=c;console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}C++;c=b.Re();try{var d=ud(a,b),e=mb(d,!1);if(b.I){vd(d,!1);for(var f=e.length-1;f>=0;f--)e[f].jg();for(f=e.length-1;f>=0;f--)e[f].W(!1);setTimeout(function(){d.disposed||vd(d,!0)},1);wd(d);xd(b)}else for(f=e.length-1;f>=0;f--);}finally{C--}if(C==0){a=yd(b,c);for(f=0;f<a.length;f++)b=a[f],D(new (G("var_create"))(b));D(new (G("create"))(d))}return d}
function zd(a,b){for(var c=0,d;d=a[c];c++){var e=d.textContent,f=d.getAttribute("pinned")=="true",h=parseInt(d.getAttribute("w"),10);d=parseInt(d.getAttribute("h"),10);b.mf(e);b.Yb.sn=f;isNaN(h)||isNaN(d)||(b.Yb.size=new Ga(h,d));f&&b.lp&&!b.Bb&&setTimeout(function(){b.Xb.za(!0)},1)}}function Ad(a){for(var b={Jf:null,Kf:null},c=0,d;d=a.childNodes[c];c++)d.nodeType==Node.ELEMENT_NODE&&(d.nodeName.toLowerCase()=="block"?b.Jf=d:d.nodeName.toLowerCase()=="shadow"&&(b.Kf=d));return b}
function ud(a,b,c,d){var e=a.getAttribute("type");if(!e)throw TypeError("Block type unspecified: "+a.outerHTML);var f=a.getAttribute("id");f=b.qk(e,f);for(var h=[],k=[],l=[],m=[],n=[],v=[],w=0,F;F=a.childNodes[w];w++)if(F.nodeType!=Node.TEXT_NODE)switch(F.nodeName.toLowerCase()){case "mutation":h.push(F);break;case "comment":if(!ka.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}k.push(F);break;case "data":l.push(F);break;case "title":case "field":m.push(F);
break;case "value":case "statement":n.push(F);break;case "next":v.push(F);break;default:console.warn("Ignoring unknown tag: "+F.nodeName)}w=!1;F=0;for(var Ya;Ya=h[F];F++)f.Ld&&(f.Ld(Ya),f.jg&&(w=!0));h=w;zd(k,f);for(k=0;w=l[k];k++)f.data=w.textContent;if(c)if(d)if(f.B)c.connect(f.B);else throw TypeError("Next block does not have previous statement.");else if(f.s)c.connect(f.s);else if(f.B)c.connect(f.B);else throw TypeError("Child block does not have output or previous statement.");for(c=0;k=m[c];c++)l=
k.getAttribute("name"),d=f,(w=Bd(d,l))?w.Jj(k):console.warn("Ignoring non-existent field "+l+" in block "+d.type);for(m=0;d=n[m];m++){l=d.getAttribute("name");c=Cd(f,l);if(!c){console.warn("Ignoring non-existent input "+l+" in block "+e);break}d=Ad(d);if(d.Jf){if(!c.connection)throw TypeError("Input connection does not exist.");ud(d.Jf,b,c.connection,!1)}d.Kf&&c.connection.Hg(d.Kf)}for(e=0;n=v[e];e++){n=Ad(n);if(n.Jf){if(!f.A)throw TypeError("Next statement does not exist.");if(f.A.isConnected())throw TypeError("Next statement is already connected.");
ud(n.Jf,b,f.A,!0)}n.Kf&&f.A&&f.A.Hg(n.Kf)}h&&f.jg();(b=a.getAttribute("inline"))&&f.oe(b=="true");(b=a.getAttribute("disabled"))&&f.Ac(b!="true"&&b!="disabled");if(b=a.getAttribute("deletable"))f.lm=b=="true";(b=a.getAttribute("movable"))&&f.bl(b=="true");(b=a.getAttribute("editable"))&&f.al(b=="true");(b=a.getAttribute("collapsed"))&&f.le(b=="true");if(a.nodeName.toLowerCase()=="shadow"){a=ld(f,!1);for(b=0;v=a[b];b++)if(!v.T)throw TypeError("Shadow block not allowed non-shadow child.");if(Dd(f).length)throw TypeError("Shadow blocks cannot have variable references.");
f.il(!0)}return f};function Ed(a){Ed.i.constructor.call(this);this.ga=(this.wc=typeof a=="undefined")?"":a.id;this.Ta=this.wc?"":a.j.id}H(Ed,ed);Ed.prototype.R=function(){var a=Ed.i.R.call(this);a.blockId=this.ga;return a};Ed.prototype.M=function(a){Ed.i.M.call(this,a);this.ga=a.blockId};function Fd(a,b,c,d,e){Fd.i.constructor.call(this,a);a&&(this.element=typeof b=="undefined"?"":b,this.name=typeof c=="undefined"?"":c,this.oldValue=typeof d=="undefined"?"":d,this.newValue=typeof e=="undefined"?"":e)}H(Fd,Ed);g=Fd.prototype;
g.type="change";g.R=function(){var a=Fd.i.R.call(this);a.element=this.element;this.name&&(a.name=this.name);a.oldValue=this.oldValue;a.newValue=this.newValue;return a};g.M=function(a){Fd.i.M.call(this,a);this.element=a.element;this.name=a.name;this.oldValue=a.oldValue;this.newValue=a.newValue};g.di=function(){return this.oldValue==this.newValue};
g.run=function(a){var b=fd(this).yb(this.ga);if(b)switch(b.ce&&b.ce.za(!1),a=a?this.newValue:this.oldValue,this.element){case "field":(b=Bd(b,this.name))?Gd(b,a):console.warn("Can't set non-existent field: "+this.name);break;case "comment":b.mf(a||null);break;case "collapsed":b.le(!!a);break;case "disabled":b.Ac(!a);break;case "inline":b.oe(!!a);break;case "mutation":var c="";b.od&&(c=(c=b.od())&&pd(c));if(b.Ld){var d=qd(a||"<mutation/>");b.Ld(d)}D(new Fd(b,"mutation",null,c,a));break;default:console.warn("Unknown change type: "+
this.element)}else console.warn("Can't change non-existent block: "+this.ga)};function Hd(a){Hd.i.constructor.call(this,a);a&&(a.T&&(this.Za=!1),this.xml=a.j.I?kd(a):md(a),this.Td=cd(a))}H(Hd,Ed);Hd.prototype.type="create";Hd.prototype.R=function(){var a=Hd.i.R.call(this);a.xml=pd(this.xml);a.ids=this.Td;this.Za||(a.recordUndo=this.Za);return a};Hd.prototype.M=function(a){Hd.i.M.call(this,a);this.xml=qd(a.xml);this.Td=a.ids;a.recordUndo!==void 0&&(this.Za=a.recordUndo)};
Hd.prototype.run=function(a){var b=fd(this);if(a)a=I("xml"),a.appendChild(this.xml),rd(a,b);else{a=0;for(var c;c=this.Td[a];a++){var d=b.yb(c);d?d.dispose(!1):c==this.ga&&console.warn("Can't uncreate non-existent block: "+c)}}};function Id(a){Id.i.constructor.call(this,a);if(a){if(a.getParent())throw Error("Connected blocks cannot be deleted.");a.T&&(this.Za=!1);this.gf=a.j.I?kd(a):md(a);this.Td=cd(a)}}H(Id,Ed);Id.prototype.type="delete";
Id.prototype.R=function(){var a=Id.i.R.call(this);a.oldXml=pd(this.gf);a.ids=this.Td;this.Za||(a.recordUndo=this.Za);return a};Id.prototype.M=function(a){Id.i.M.call(this,a);this.gf=qd(a.oldXml);this.Td=a.ids;a.recordUndo!==void 0&&(this.Za=a.recordUndo)};Id.prototype.run=function(a){var b=fd(this);if(a){a=0;for(var c;c=this.Td[a];a++){var d=b.yb(c);d?d.dispose(!1):c==this.ga&&console.warn("Can't delete non-existent block: "+c)}}else a=I("xml"),a.appendChild(this.gf),rd(a,b)};
function Jd(a){Jd.i.constructor.call(this,a);a&&(a.T&&(this.Za=!1),a=Kd(this),this.jn=a.pn,this.fn=a.Km,this.vk=a.gm)}H(Jd,Ed);g=Jd.prototype;g.type="move";g.R=function(){var a=Jd.i.R.call(this);this.fe&&(a.newParentId=this.fe);this.ee&&(a.newInputName=this.ee);this.qd&&(a.newCoordinate=Math.round(this.qd.x)+","+Math.round(this.qd.y));this.Za||(a.recordUndo=this.Za);return a};
g.M=function(a){Jd.i.M.call(this,a);this.fe=a.newParentId;this.ee=a.newInputName;if(a.newCoordinate){var b=a.newCoordinate.split(",");this.qd=new r(Number(b[0]),Number(b[1]))}a.recordUndo!==void 0&&(this.Za=a.recordUndo)};function Ld(a){var b=Kd(a);a.fe=b.pn;a.ee=b.Km;a.qd=b.gm}function Kd(a){var b=fd(a).yb(a.ga);a={};var c=b.getParent();if(c){if(a.pn=c.id,b=Md(c,b))a.Km=b.name}else a.gm=b.ka();return a}g.di=function(){return this.jn==this.fe&&this.fn==this.ee&&ua(this.vk,this.qd)};
g.run=function(a){var b=fd(this),c=b.yb(this.ga);if(c){var d=a?this.fe:this.jn,e=a?this.ee:this.fn,f=a?this.qd:this.vk;a=null;if(d&&(a=b.yb(d),!a)){console.warn("Can't connect to non-existent block: "+d);return}c.getParent()&&Nd(c);if(f)e=c.ka(),c.moveBy(f.x-e.x,f.y-e.y);else{c=c.s||c.B;b=c.type;if(e){if(a=Cd(a,e))var h=a.connection}else b==4&&(h=a.A);h?c.connect(h):console.warn("Can't connect to non-existent input: "+e)}}else console.warn("Can't move non-existent block: "+this.ga)};
B(Mc,"create",Hd);B(Mc,"delete",Id);B(Mc,"change",Fd);B(Mc,"move",Jd);function Od(a){this.wc=typeof a=="undefined";this.Ta=a?a.id:"";this.group=Wc;this.Za=!1}H(Od,ed);Od.prototype.type="finished_loading";Od.prototype.R=function(){var a={type:this.type};this.group&&(a.group=this.group);this.Ta&&(a.workspaceId=this.Ta);return a};Od.prototype.M=function(a){this.wc=!1;this.Ta=a.workspaceId;this.group=a.group};B(Mc,"finished_loading",Od);function Pd(a){Pd.i.constructor.call(this);this.wc=typeof a=="undefined";this.Ta=a?a:"";this.Za=!1}H(Pd,ed);Pd.prototype.ak=!0;function Qd(a,b,c,d){Qd.i.constructor.call(this,a?a.j.id:void 0);this.ga=a?a.id:null;this.element=typeof b=="undefined"?"":b;this.oldValue=typeof c=="undefined"?"":c;this.newValue=typeof d=="undefined"?"":d}H(Qd,Pd);Qd.prototype.type="ui";
Qd.prototype.R=function(){var a=Qd.i.R.call(this);a.element=this.element;this.newValue!==void 0&&(a.newValue=this.newValue);this.ga&&(a.blockId=this.ga);return a};Qd.prototype.M=function(a){Qd.i.M.call(this,a);this.element=a.element;this.newValue=a.newValue;this.ga=a.blockId};B(Mc,"ui",Qd);function Rd(a){Rd.i.constructor.call(this);this.Dd=(this.wc=typeof a=="undefined")?"":a.Wa();this.Ta=this.wc?"":a.j.id}H(Rd,ed);Rd.prototype.R=function(){var a=Rd.i.R.call(this);a.varId=this.Dd;return a};Rd.prototype.M=function(a){Rd.i.R.call(this);this.Dd=a.varId};function Sd(a){Sd.i.constructor.call(this,a);a&&(this.ue=a.type,this.te=a.name)}H(Sd,Rd);Sd.prototype.type="var_create";Sd.prototype.R=function(){var a=Sd.i.R.call(this);a.varType=this.ue;a.varName=this.te;return a};
Sd.prototype.M=function(a){Sd.i.M.call(this,a);this.ue=a.varType;this.te=a.varName};Sd.prototype.run=function(a){var b=fd(this);a?b.dd(this.te,this.ue,this.Dd):b.Pe(this.Dd)};function Td(a){Td.i.constructor.call(this,a);a&&(this.ue=a.type,this.te=a.name)}H(Td,Rd);Td.prototype.type="var_delete";Td.prototype.R=function(){var a=Td.i.R.call(this);a.varType=this.ue;a.varName=this.te;return a};Td.prototype.M=function(a){Td.i.M.call(this,a);this.ue=a.varType;this.te=a.varName};
Td.prototype.run=function(a){var b=fd(this);a?b.Pe(this.Dd):b.dd(this.te,this.ue,this.Dd)};function Ud(a,b){Ud.i.constructor.call(this,a);a&&(this.wk=a.name,this.rk=typeof b=="undefined"?"":b)}H(Ud,Rd);Ud.prototype.type="var_rename";Ud.prototype.R=function(){var a=Ud.i.R.call(this);a.oldName=this.wk;a.newName=this.rk;return a};Ud.prototype.M=function(a){Ud.i.M.call(this,a);this.wk=a.oldName;this.rk=a.newName};Ud.prototype.run=function(a){var b=fd(this);a?b.jf(this.Dd,this.rk):b.jf(this.Dd,this.wk)};
B(Mc,"var_create",Sd);B(Mc,"var_delete",Td);B(Mc,"var_rename",Ud);function Vd(a){this.Pf=a;this.ta()}g=Vd.prototype;g.ea=null;g.qc=null;g.Pf=null;g.xd=1;g.Ng=null;g.dm=new r(0,0);g.ta=function(){this.ea||(this.ea=y(bc,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyBlockDragSurface"},this.Pf),this.qc=y(Wb,{},this.ea))};
function Wd(a,b){if(a.qc.childNodes.length)throw Error("Already dragging a block.");a.qc.appendChild(b);a.ea.style.display="block";a.Ng=new r(0,0)}g.tf=function(a,b){this.Ng=new r(a*this.xd,b*this.xd);a=this.Ng.x;b=this.Ng.y;a=a.toFixed(0);b=b.toFixed(0);this.ea.style.display="block";kc(this.ea,"translate3d("+a+"px, "+b+"px, 0px)")};g.Nj=function(){var a=Xa(this.ea);return new r(a.x/this.xd,a.y/this.xd)};g.O=function(){return this.ea};
g.Bh=function(a){a?a.appendChild(this.qc.firstChild):this.qc.removeChild(this.qc.firstChild);this.ea.style.display="none";if(this.qc.childNodes.length)throw Error("Drag group was not cleared.");this.Ng=null};var Xd=!1;function Yd(a){if(Xd)throw Error("CSS already injected");Array.prototype.push.apply($d,a);a.length=0}
var $d=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;",
"}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);",
"color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {",
"max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;",
"border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;",
"}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;",
"}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;",
"}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",
".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {",
"margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;",
"}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",
".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",
".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {",
"box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {",
"background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"];function ae(a,b){this.We=a;this.ml=b.spacing;this.Sm=b.length;this.Cp=(this.ek=a.firstChild)&&this.ek.nextSibling;this.Vp=b.snap}ae.prototype.xd=1;ae.prototype.dispose=function(){this.We=null};ae.prototype.update=function(a){this.xd=a;var b=this.ml*a||100;this.We.setAttribute("width",b);this.We.setAttribute("height",b);b=Math.floor(this.ml/2)+.5;var c=b-this.Sm/2,d=b+this.Sm/2;b*=a;c*=a;d*=a;be(this.ek,a,c,d,b,b);be(this.Cp,a,b,b,c,d)};
function be(a,b,c,d,e,f){a&&(a.setAttribute("stroke-width",b),a.setAttribute("x1",c),a.setAttribute("y1",e),a.setAttribute("x2",d),a.setAttribute("y2",f))}ae.prototype.moveTo=function(a,b){this.We.setAttribute("x",a);this.We.setAttribute("y",b);(Ka||La)&&this.update(this.xd)};function ce(){this.name="classic";B(Qc,"classic",this)}ce.prototype.bc=function(){return this.name+"-theme"};var de={};de=new ce;function ee(a){if(!a)return null;if(a instanceof Element||typeof a=="string"){if(a){if(typeof a!="string"&&(Ka&&a.outerHTML?a=a.outerHTML:a instanceof Element||(a=null)),typeof a=="string"&&(a=qd(a),a.nodeName.toLowerCase()!="xml"))throw TypeError("Toolbox should be an <xml> document.");}else a=null;var b={contents:fe(a)};a instanceof Node&&ge(a,b);a=b}b=a.kind;var c=a.contents;if(b&&b!="flyoutToolbox"&&b!="categoryToolbox")throw Error("Invalid toolbox kind "+b+". Please supply either flyoutToolbox or categoryToolbox");
if(!c)throw Error("Toolbox must have a contents attribute.");return a}function he(a){return a?a.contents?a.contents:Array.isArray(a)&&a.length>0&&!a[0].nodeType?a:fe(a):[]}function ie(a){if(!a)return!1;var b=a.kind;return b?b=="categoryToolbox":!!a.contents.filter(function(c){return c.kind.toUpperCase()=="CATEGORY"}).length}
function fe(a){var b=[],c=a.childNodes;c||(c=a);a=0;for(var d;d=c[a];a++)if(d.tagName){var e={},f=d.tagName.toUpperCase();e.kind=f;f=="BLOCK"?e.blockxml=d:d.childNodes&&d.childNodes.length>0&&(e.contents=fe(d));ge(d,e);b.push(e)}return b}function ge(a,b){for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];d.nodeName.indexOf("css-")>-1?(b.cssconfig=b.cssconfig||{},b.cssconfig[d.nodeName.replace("css-","")]=d.value):b[d.nodeName]=d.value}};function je(a){var b=!!a.readOnly;if(b)var c=null,d=!1,e=!1,f=!1,h=!1,k=!1,l=!1;else{c=ee(a.toolbox);d=ie(c);e=a.trashcan;e===void 0&&(e=d);var m=a.maxTrashcanContents;e?m===void 0&&(m=32):m=0;f=a.collapse;f===void 0&&(f=d);h=a.comments;h===void 0&&(h=d);k=a.disable;k===void 0&&(k=d);l=a.sounds;l===void 0&&(l=!0)}var n=!!a.rtl;var v=a.toolboxPosition!=="end"==n?3:2;var w=a.css;w===void 0&&(w=!0);var F="https://blockly-demo.appspot.com/static/media/";a.media?F=a.media:a.path&&(F=a.path+"media/");var Ya=
a.oneBasedIndex===void 0?!0:!!a.oneBasedIndex,Ea=a.renderer||"geras",xb=a.plugins||{};this.o=n;this.ui=Ya;this.collapse=f;this.Wo=h;this.disable=k;this.readOnly=b;this.mk=a.maxBlocks||Infinity;this.ki=a.maxInstances;this.ie=F;this.Bm=d;b=a.move||{};f={};b.scrollbars===void 0&&a.scrollbars===void 0?f.scrollbars=d:typeof b.scrollbars=="object"?(f.scrollbars={},f.scrollbars.hg=!!b.scrollbars.horizontal,f.scrollbars.vertical=!!b.scrollbars.vertical,f.scrollbars.hg&&f.scrollbars.vertical?f.scrollbars=
!0:f.scrollbars.hg||f.scrollbars.vertical||(f.scrollbars=!1)):f.scrollbars=!!b.scrollbars||!!a.scrollbars;f.vf=f.scrollbars&&b.wheel!==void 0?!!b.wheel:typeof f.scrollbars=="object";f.Kc=f.scrollbars?b.drag===void 0?!0:!!b.drag:!1;this.Ya=f;this.Em=e;this.li=m;this.xp=l;this.vp=w;this.Xd=c;c=a.grid||{};d={};d.spacing=Number(c.spacing)||0;d.jj=c.colour||"#888";d.length=c.length===void 0?1:Number(c.length);d.lr=d.spacing>0&&!!c.snap;this.Am=d;c=a.zoom||{};d={};d.controls=c.controls===void 0?!1:!!c.controls;
d.vf=c.wheel===void 0?!1:!!c.wheel;d.Fn=c.startScale===void 0?1:Number(c.startScale);d.sg=c.maxScale===void 0?3:Number(c.maxScale);d.tg=c.minScale===void 0?.3:Number(c.minScale);d.zn=c.scaleSpeed===void 0?1.2:Number(c.scaleSpeed);d.rn=c.pinch===void 0?d.vf||d.controls:!!c.pinch;this.oa=d;this.Gb=v;this.Wk=Ea;this.Xk=a.rendererOverrides;this.Qj=null;this.rb=a.parentWorkspace;this.plugins=xb};
function ke(a,b,c,d,e){this.g=a;b=b===void 0?!0:b;c=c===void 0?!0:c;var f=b&&c;b&&(this.la=new le(a,!0,f,d,e));c&&(this.Y=new le(a,!1,f,d,e));f&&(this.Qf=y(ac,{height:me,width:me,"class":"blocklyScrollbarBackground"},null),jc(this.Qf,a.Cc));this.Z=null}g=ke.prototype;g.dispose=function(){A(this.Qf);this.Z=this.g=this.Qf=null;this.la&&(this.la.dispose(),this.la=null);this.Y&&(this.Y.dispose(),this.Y=null)};
g.resize=function(){var a=this.g.zb();if(a){var b=!1,c=!1;this.Z&&this.Z.Ka==a.Ka&&this.Z.Sa==a.Sa&&this.Z.eb==a.eb&&this.Z.Ua==a.Ua?(this.Z&&this.Z.scrollWidth==a.scrollWidth&&this.Z.Vb==a.Vb&&this.Z.scrollLeft==a.scrollLeft||(b=!0),this.Z&&this.Z.scrollHeight==a.scrollHeight&&this.Z.Wb==a.Wb&&this.Z.scrollTop==a.scrollTop||(c=!0)):c=b=!0;if(b||c){try{C++,this.la&&b&&this.la.resize(a),this.Y&&c&&this.Y.resize(a)}finally{C--}ne(this.g)}this.la&&this.Y&&(this.Z&&this.Z.Ka==a.Ka&&this.Z.Ua==a.Ua||this.Qf.setAttribute("x",
this.Y.position.x),this.Z&&this.Z.Sa==a.Sa&&this.Z.eb==a.eb||this.Qf.setAttribute("y",this.la.position.y));this.Z=a}};g.Di=function(a,b){this.la&&this.la.Di(a,b);this.Y&&this.Y.Di(a,b)};g.set=function(a,b,c){this.la&&this.la.set(a,!1);this.Y&&this.Y.set(b,!1);if(c||c===void 0)a={},this.la&&(a.x=oe(this.la)),this.Y&&(a.y=oe(this.Y)),this.g.Fg(a)};g.me=function(a){this.la&&this.la.me(a);this.Y&&this.Y.me(a)};
g.isVisible=function(){var a=!1;this.la&&(a=this.la.isVisible());this.Y&&(a=a||this.Y.isVisible());return a};
function le(a,b,c,d,e){this.g=a;this.td=c||!1;this.Rd=b;this.Yd=e!==void 0?e:.5;this.ratio=this.Z=null;a="blocklyScrollbar"+(this.Rd?"Horizontal":"Vertical");d&&(a+=" "+d);this.yc=y(bc,{"class":a},null);this.l=y(Wb,{},this.yc);this.Qa=y(ac,{"class":"blocklyScrollbarBackground"},this.l);d=Math.floor((me-5)/2);this.Fb=y(ac,{"class":"blocklyScrollbarHandle",rx:d,ry:d},this.l);this.g.Ha.subscribe(this.Fb,"scrollbarColour","fill");this.g.Ha.subscribe(this.Fb,"scrollbarOpacity","fill-opacity");jc(this.yc,
K(this.g));this.position=new r(0,0);d=me;b?(this.Qa.setAttribute("height",d),this.yc.setAttribute("height",d),this.Fb.setAttribute("height",d-5),this.Fb.setAttribute("y",2.5),this.gi="width",this.tn="x"):(this.Qa.setAttribute("width",d),this.yc.setAttribute("width",d),this.Fb.setAttribute("width",d-5),this.Fb.setAttribute("x",2.5),this.gi="height",this.tn="y");this.nn=t(this.Qa,"mousedown",this,this.Jp);this.on=t(this.Fb,"mousedown",this,this.Kp)}var pe,qe;g=le.prototype;g.Ik=new r(0,0);g.En=0;
g.Sb=0;g.fd=0;g.fg=0;g.Oc=!0;g.Kd=!0;var me=15;pb&&(me=25);g=le.prototype;g.dispose=function(){re();u(this.nn);this.nn=null;u(this.on);this.on=null;A(this.yc);this.Qa=this.l=this.yc=null;this.Fb&&(this.g.Ha.unsubscribe(this.Fb),this.Fb=null);this.g=null};function se(a,b){return b=b<=0||isNaN(b)?0:Math.min(b,a.Sb)}function te(a,b){a.fd=b;a.Fb.setAttribute(a.gi,a.fd)}function ue(a,b){return b=b<=0||isNaN(b)?0:Math.min(b,a.Sb-a.fd)}function ve(a,b){a.fg=b;a.Fb.setAttribute(a.tn,a.fg)}
function we(a,b){a.Sb=b;a.yc.setAttribute(a.gi,a.Sb);a.Qa.setAttribute(a.gi,a.Sb)}g.setPosition=function(a,b){this.position.x=a;this.position.y=b;kc(this.yc,"translate("+(this.position.x+this.Ik.x)+"px,"+(this.position.y+this.Ik.y)+"px)")};
g.resize=function(a){if(!a&&(a=this.g.zb(),!a))return;var b;if(!(b=!this.Z)){b=a;var c=this.Z;b=!(b.Ka==c.Ka&&b.Sa==c.Sa&&b.Vb==c.Vb&&b.Wb==c.Wb&&b.eb==c.eb&&b.Ua==c.Ua&&b.scrollWidth==c.scrollWidth&&b.scrollHeight==c.scrollHeight&&b.scrollLeft==c.scrollLeft&&b.scrollTop==c.scrollTop)}b&&(this.Rd?(b=a,xe(this,b)?ye(this,b):ze(this,b)):(b=a,xe(this,b)?Ae(this,b):Be(this,b)),this.Z=a,Ce(this))};function xe(a,b){return a.Z?a.Z.Ka!==b.Ka||a.Z.Sa!==b.Sa||a.Z.Ua!==b.Ua||a.Z.eb!==b.eb:!0}
function ye(a,b){var c=b.Ka-a.Yd*2;a.td&&(c-=me);we(a,Math.max(0,c));c=b.Ua+a.Yd;a.td&&a.g.o&&(c+=me);a.setPosition(c,b.eb+b.Sa-me-a.Yd);ze(a,b)}function ze(a,b){if(b.Ka>=b.scrollWidth)te(a,a.Sb),ve(a,0),a.td||a.za(!1);else{a.td||a.za(!0);var c=a.Sb*b.Ka/b.scrollWidth;c=se(a,c);te(a,c);c=b.scrollWidth-b.Ka;var d=a.Sb-a.fd;b=(b.Vb-b.scrollLeft)/c*d;b=ue(a,b);ve(a,b);a.ratio=d/c}}
function Ae(a,b){var c=b.Sa-a.Yd*2;a.td&&(c-=me);we(a,Math.max(0,c));a.setPosition(a.g.o?b.Ua+a.Yd:b.Ua+b.Ka-me-a.Yd,b.eb+a.Yd);Be(a,b)}function Be(a,b){if(b.Sa>=b.scrollHeight)te(a,a.Sb),ve(a,0),a.td||a.za(!1);else{a.td||a.za(!0);var c=a.Sb*b.Sa/b.scrollHeight;c=se(a,c);te(a,c);c=b.scrollHeight-b.Sa;var d=a.Sb-a.fd;b=(b.Wb-b.scrollTop)/c*d;b=ue(a,b);ve(a,b);a.ratio=d/c}}g.isVisible=function(){return this.Oc};g.me=function(a){var b=a!=this.Kd;this.Kd=a;b&&this.Ug()};
g.za=function(a){var b=a!=this.isVisible();if(this.td)throw Error("Unable to toggle visibility of paired scrollbars.");this.Oc=a;b&&this.Ug()};g.Ug=function(){this.Kd&&this.isVisible()?this.yc.setAttribute("display","block"):this.yc.setAttribute("display","none")};
g.Jp=function(a){Gc(this.g);qb=null;re();if(bb(a))a.stopPropagation();else{var b=cb(a,K(this.g),De(this.g));b=this.Rd?b.x:b.y;var c=ab(this.Fb);c=this.Rd?c.x:c.y;var d=this.fg,e=this.fd*.95;b<=c?d-=e:b>=c+this.fd&&(d+=e);ve(this,ue(this,d));Ce(this);a.stopPropagation();a.preventDefault()}};
g.Kp=function(a){Gc(this.g);re();bb(a)?a.stopPropagation():(this.Xp=this.fg,Ee(this.g),this.En=this.Rd?a.clientX:a.clientY,pe=t(document,"mouseup",this,this.Mp),qe=t(document,"mousemove",this,this.Lp),a.stopPropagation(),a.preventDefault())};g.Lp=function(a){ve(this,ue(this,this.Xp+((this.Rd?a.clientX:a.clientY)-this.En)));Ce(this)};g.Mp=function(){Fe(this.g);qb=null;re()};function re(){Ge(!0);pe&&(u(pe),pe=null);qe&&(u(qe),qe=null)}function oe(a){a=a.fg/(a.Sb-a.fd);isNaN(a)&&(a=0);return a}
function Ce(a){var b=oe(a),c={};a.Rd?c.x=b:c.y=b;a.g.Fg(c)}g.set=function(a,b){ve(this,ue(this,a*this.ratio));(b||b===void 0)&&Ce(this)};g.Di=function(a,b){this.Ik=new r(a,b)};var He=!1,Ie=!1,Je=0,Ke=0,Le=0,Me=0,Ne=null,Oe=null,L=null;function Pe(a){for(;a&&a.Ub;){if(typeof a.Ub=="string"||typeof a.Ub=="function")return a;a=a.Ub}return null}function Qe(a){a.Fp=Cb(a,"mouseover",null,Re);a.Dp=Cb(a,"mouseout",null,Se);a.addEventListener("mousemove",Te,!1)}function Ue(a){a&&(u(a.Fp),u(a.Dp),a.removeEventListener("mousemove",Te))}function Re(a){Ie||(a=Pe(a.currentTarget),Ne!=a&&(Ve(),Oe=null,Ne=a),clearTimeout(Je))}
function Se(){Ie||(Je=setTimeout(function(){Oe=Ne=null;Ve()},1),clearTimeout(Ke))}function Te(a){if(Ne&&Ne.Ub&&!Ie)if(He){var b=Le-a.pageX;a=Me-a.pageY;Math.sqrt(b*b+a*a)>10&&Ve()}else Oe!=Ne&&(clearTimeout(Ke),Le=a.pageX,Me=a.pageY,Ke=setTimeout(We,750))}function Ve(){He&&(He=!1,L&&(L.style.display="none"));Ke&&clearTimeout(Ke)}
function We(){if(!Ie&&(Oe=Ne,L)){L.textContent="";var a;if(a=Pe(Ne)){for(a=a.Ub;typeof a=="function";)a=a();if(typeof a!="string")throw Error("Tooltip function must return a string.");}else a="";a=Ca(a,50);a=a.split("\n");for(var b=0;b<a.length;b++){var c=document.createElement("div");c.appendChild(document.createTextNode(a[b]));L.appendChild(c)}a=Ne.o;b=document.documentElement.clientWidth;c=document.documentElement.clientHeight;L.style.direction=a?"rtl":"ltr";L.style.display="block";He=!0;var d=
Le;d=a?d-(0+L.offsetWidth):d+0;var e=Me+10;e+L.offsetHeight>c+window.scrollY&&(e-=L.offsetHeight+20);a?d=Math.max(5-window.scrollX,d):d+L.offsetWidth>b+window.scrollX-10&&(d=b-L.offsetWidth-10);L.style.top=e+"px";L.style.left=d+"px"}};function Xe(a,b,c){Array.isArray(c)&&(c=c.join(" "));a.setAttribute("aria-"+b,c)};function Ye(a,b){this.m=a;this.type=b}g=Ye.prototype;g.K=null;g.disposed=!1;g.Ke=null;g.Fi=null;g.x=0;g.y=0;
g.Dh=function(a){var b=this.v(),c=a.v();a.isConnected()&&a.disconnect();if(this.isConnected()){var d=this.Ue(!0);this.Fi=null;var e=this.F();if(e.T)e.dispose(!1);else{this.disconnect();var f=e}this.Fi=d}var h;C==0&&(h=new (G("move"))(c));if(!this||!a)throw Error("Cannot connect null connections.");this.K=a;a.K=this;c.Ei(b);h&&(Ld(h),D(h));f&&(a=this.type===1?f.s:f.B,(c=Ze(c,a))?a.connect(c):a.Bk(this))};
g.dispose=function(){if(this.isConnected()){this.Hg(null);var a=this.F();a&&Nd(a)}this.disposed=!0};g.v=function(){return this.m};function $e(a){return a.type==1||a.type==3}g.isConnected=function(){return!!this.K};g.Bk=function(){};g.connect=function(a){if(this.K!=a&&af(this,a,!1)==0){var b=Wc;b||E(!0);$e(this)?this.Dh(a):a.Dh(this);b||E(!1)}};function bf(a,b){var c=null;b=b.s;for(var d=0,e;e=a.u[d];d++)if((e=e.connection)&&af(b,e,!1)==0){if(c)return null;c=e}return c}
function Ze(a,b){if(b.type===2){a:{b=b.v();for(var c;c=bf(a,b);)if(a=c.F(),!a||a.T){b=c;break a}b=null}return b}return(a=a.ei(!0))&&af(b,a,!1)==0?a:null}g.disconnect=function(){var a=this.K;if(!a)throw Error("Source connection not connected.");if(a.K!=this)throw Error("Target connection not connected to source connection.");if($e(this)){var b=this.m;var c=a.v();a=this}else b=a.v(),c=this.m;var d=Wc;d||E(!0);this.sj(b,c);c.T||a.Dg();d||E(!1)};
g.sj=function(a,b){var c;C==0&&(c=new (G("move"))(b));this.K=this.K.K=null;b.Ei(null);c&&(Ld(c),D(c))};g.Dg=function(){var a=this.v(),b=this.Ue();if(a.j&&b)if(a=sd(b,a.j),a.s)this.connect(a.s);else if(a.B)this.connect(a.B);else throw Error("Child block does not have output or previous statement.");};g.F=function(){return this.isConnected()?this.K.v():null};g.mn=function(){!this.isConnected()||this.K&&af(this,this.K,!1)==0||Nd($e(this)?this.F():this.m)};
g.lf=function(a){a?(Array.isArray(a)||(a=[a]),this.Ke=a,this.mn()):this.Ke=null};g.Hg=function(a){this.Fi=a;a=this.F();a?a.T&&(a.dispose(!1),this.Dg()):this.Dg()};g.Ue=function(a){return a&&this.F().T?md(this.F()):this.Fi};g.$m=function(){return[]};g.tc=function(){for(var a=null,b=this.m.u,c=0;c<b.length;c++)if(b[c].connection===this){a=b[c];break}return a};function af(a,b,c,d){if(a&&b){if($e(a)){var e=a.v();var f=b.v()}else f=a.v(),e=b.v();e=e==f?1:b.type!=oa[a.type]?2:e.j!==f.j?5:e.T&&!f.T?6:0}else e=3;if(e!=0)a=e;else{a:if(e=a.Ke,f=b.Ke,e&&f){for(var h=0;h<e.length;h++)if(f.indexOf(e[h])!=-1){e=!0;break a}e=!1}else e=!0;a=e?c&&!cf(a,b,d||0)?7:0:4}return a}
function cf(a,b,c){if(df(a,b)>c||b.v().Cb())return!1;switch(b.type){case 4:return a.K||ef.indexOf(b)!=-1?a=!1:b.K?(a=b.F(),a=a.Cb()?!(a.B&&a.B.F()):!1):a=!0,a;case 2:if(b.isConnected()&&!b.F().Cb()||a.isConnected())return!1;break;case 1:if(b.isConnected()&&!b.F().Ja()&&!b.F().T)return!1;break;case 3:if(b.isConnected()&&!a.v().A&&!b.F().T&&b.F().A)return!1;break;default:return!1}return ef.indexOf(b)!=-1?!1:!0}B(Kc,"default",function(){});function ff(a){this.$=Object.create(null);this.j=a}g=ff.prototype;g.clear=function(){this.$=Object.create(null)};g.jf=function(a,b){var c=this.Ve(a);if(!c)throw Error("Tried to rename a variable that didn't exist. ID: "+a);var d=this.Sh(b,c.type);a=gf(this.j);E(!0);try{if(d&&d.Wa()!=c.Wa()){var e=c.type;b!=d.name&&hf(d,b,a);for(b=0;b<a.length;b++){var f,h=a[b];for(d=0;f=h.u[d];d++)for(var k=0;f.aa[k];k++);}D(new (G("var_delete"))(c));this.$[e].splice(this.Th(e).indexOf(c),1)}else hf(c,b,a)}finally{E(!1)}};
function hf(a,b,c){D(new (G("var_rename"))(a,b));a.name=b;for(a=0;a<c.length;a++)for(var d=c[a],e=0;b=d.u[e];e++)for(var f=0;b.aa[f];f++);}g.dd=function(a,b,c){var d=this.Sh(a,b);if(d){if(c&&d.Wa()!=c)throw Error('Variable "'+a+'" is already in use and its id is "'+d.Wa()+'" which conflicts with the passed in id, "'+c+'".');return d}if(c&&this.Ve(c))throw Error('Variable id, "'+c+'", is already in use.');b=b||"";d=new jf(this.j,a,b,c||gb());a=this.$[b]||[];a.push(d);delete this.$[b];this.$[b]=a;return d};
g.Pe=function(a){var b=this.Ve(a);if(b){var c=b.name,d=this.Pj(a);a=0;for(var e;e=d[a];a++)if(e.type=="procedures_defnoreturn"||e.type=="procedures_defreturn"){a=kf(e,"NAME");c=q.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",c).replace("%2",a);lf(c);return}var f=this;d.length>1?(c=q.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length)).replace("%2",c),mf(c,function(h){h&&b&&nf(f,b,d)})):nf(f,b,d)}else console.warn("Can't delete non-existent variable: "+a)};
function nf(a,b,c){var d=Wc;d||E(!0);try{for(var e=0;e<c.length;e++)c[e].dispose(!0);var f=a.$[b.type];a=0;for(var h;h=f[a];a++)if(h.Wa()==b.Wa()){f.splice(a,1);D(new (G("var_delete"))(b));break}}finally{d||E(!1)}}g.Sh=function(a,b){if(b=this.$[b||""])for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a.toLowerCase())return d;return null};g.Ve=function(a){for(var b=Object.keys(this.$),c=0;c<b.length;c++)for(var d=b[c],e=0,f;f=this.$[d][e];e++)if(f.Wa()==a)return f;return null};
g.Th=function(a){return(a=this.$[a||""])?a.slice():[]};g.Re=function(){var a=[],b;for(b in this.$)a=a.concat(this.$[b]);return a};g.Pj=function(a){for(var b=[],c=gf(this.j),d=0;d<c.length;d++){var e=Dd(c[d]);if(e)for(var f=0;f<e.length;f++)e[f].Wa()==a&&b.push(c[d])}return b};function td(a){this.id=gb();bd[this.id]=this;this.options=a||new je({});this.o=!!this.options.o;this.Gb=this.options.Gb;new (Vc(Kc,this.options,!0))(this);this.Qg=[];this.Ni=[];Object.create(null);this.Ga=[];this.se=[];this.Bg=[];this.dj=Object.create(null);this.Wc=Object.create(null);this.$=new ff(this);this.xi=null}g=td.prototype;g.I=!1;g.Zj=!1;g.Hl=1024;g.Fh=null;g.dispose=function(){this.Ga.length=0;this.clear();delete bd[this.id]};
g.Bc=function(a,b){a=a.ka();b=b.ka();return a.y+td.prototype.Bc.offset*a.x-(b.y+td.prototype.Bc.offset*b.x)};g.vh=function(a){this.Qg.push(a)};g.Ai=function(a){if(!kb(this.Qg,a))throw Error("Block not present in workspace's list of top-most blocks.");};g.Ca=function(a){var b=[].concat(this.Qg);a&&b.length>1&&(this.Bc.offset=Math.sin(3*Math.PI/180),this.o&&(this.Bc.offset*=-1),b.sort(this.Bc));return b};function of(a,b){return a.Wc[b]?a.Wc[b].slice(0):[]}
function gf(a){var b=a.Ca(!1);for(a=0;a<b.length;a++)b.push.apply(b,ld(b[a],!1));return b.filter(function(c){return!c.Cb()})}g.clear=function(){this.Zj=!0;try{var a=Wc;for(a||E(!0);this.Qg.length;)this.Qg[0].dispose(!1);for(;this.Ni.length;)this.Ni[this.Ni.length-1].dispose(!1);a||E(!1);this.$.clear();this.xi&&this.xi.clear()}finally{this.Zj=!1}};g.jf=function(a,b){this.$.jf(a,b)};g.dd=function(a,b,c){return this.$.dd(a,b,c)};g.Pj=function(a){return this.$.Pj(a)};g.Pe=function(a){this.$.Pe(a)};
g.Sh=function(a,b){return this.$.Sh(a,b)};g.Ve=function(a){return this.$.Ve(a)};g.Th=function(a){return this.$.Th(a)};g.Re=function(){return this.$.Re()};g.eg=function(){return 0};g.qk=function(a,b){return new pf(this,a,b)};function qf(a){return isNaN(a.options.mk)?Infinity:a.options.mk-gf(a).length}function rf(a,b){if(!sf(a))return!0;var c=0,d;for(d in b){if(b[d]>(a.options.ki?(a.options.ki[d]!==void 0?a.options.ki[d]:Infinity)-of(a,d).length:Infinity))return!1;c+=b[d]}return c>qf(a)?!1:!0}
function sf(a){return a.options.mk!=Infinity||!!a.options.ki}function tf(a,b){var c=b?a.Bg:a.se;a=b?a.se:a.Bg;var d=c.pop();if(d){for(var e=[d];c.length&&d.group&&d.group==c[c.length-1].group;)e.push(c.pop());for(c=0;d=e[c];c++)a.push(d);e=ad(e,b);Xc=!1;try{for(c=0;d=e[c];c++)d.run(b)}finally{Xc=!0}}}function uf(a,b){a.Ga.push(b)}g.yb=function(a){return this.dj[a]||null};g.jl=function(a){this.$=a};var bd=Object.create(null);function vf(){var a=[],b;for(b in bd)a.push(bd[b]);return a};function wf(a){this.Pf=a;this.ta()}g=wf.prototype;g.ea=null;g.Pf=null;g.ta=function(){this.ea||(this.ea=y(bc,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyWsDragSurface blocklyOverflowVisible"},null),this.Pf.appendChild(this.ea))};g.tf=function(a,b){a=a.toFixed(0);b=b.toFixed(0);this.ea.style.display="block";kc(this.ea,"translate3d("+a+"px, "+b+"px, 0px)")};g.Nj=function(){return Xa(this.ea)};
g.Bh=function(a){if(!a)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var b=this.ea.childNodes[0],c=this.ea.childNodes[1];if(!(b&&c&&ic(b,"blocklyBlockCanvas")&&ic(c,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");this.Qk!=null?jc(b,this.Qk):a.insertBefore(b,a.firstChild);jc(c,b);this.ea.style.display="none";if(this.ea.childNodes.length)throw Error("Drag surface was not cleared.");kc(this.ea,"");this.Qk=null};function xf(a,b,c){if(!b)throw Error("Cannot create a node without a location.");this.Tg=a;this.N=b;this.Vn=null;(a=c||null)&&a.Un&&(this.Vn=a.Un)}var yf=!1;function zf(a){return a?new xf("field",a):null}function Af(a){if(!a)return null;var b=a.type;return b==1||b==3&&a.tc()?Bf(a.tc()):b==3?new xf("next",a):b==2?new xf("output",a):b==4?new xf("previous",a):null}function Bf(a){return a&&a.connection?new xf("input",a.connection):null}function Cf(a){return a?new xf("block",a):null}
function Df(a){return a?new xf("stack",a):null}g=xf.prototype;g.getType=function(){return this.Tg};function Ef(a,b){a=a.N;a instanceof pf||(a=a.v());if(!a||!a.j)return null;var c=a.dc();a=c.j.Ca(!0);for(var d=0,e;e=a[d];d++)if(c.id==e.id)return b=d+(b?1:-1),b==-1||b==a.length?null:Df(a[b]);throw Error("Couldn't find "+(b?"next":"previous")+" stack?!");}function Ff(a){if(!a)return null;do var b=a.B&&a.B.F();while(b&&nb(b)==a&&(a=b));return(b=a.B||a.s)&&b.K&&b.K.tc()?Bf(b.K.tc()):Df(a)}
g.v=function(){return this.getType()==="block"?this.N:this.getType()==="stack"?this.N:this.getType()==="workspace"?null:this.N.v()};
g.next=function(){switch(this.Tg){case "stack":return Ef(this,!0);case "output":var a=this.N;return Cf(a.v());case "field":a:{var b=this.N,c=b.tc();a=b.v();b=c.aa.indexOf(b)+1;c=a.u.indexOf(c);for(var d;d=a.u[c];c++){for(var e=d.aa;b<e.length;){if(Gf(e[b])||yf){a=zf(e[b]);break a}b++}b=0;if(d.connection){a=Bf(d);break a}}a=null}return a;case "input":a:{b=this.N.tc();a=b.v();for(b=a.u.indexOf(b)+1;c=a.u[b];b++){d=c.aa;e=0;for(var f;f=d[e];e++)if(Gf(f)||yf){a=zf(f);break a}if(c.connection){a=Bf(c);
break a}}a=null}return a;case "block":return Af(this.N.A);case "previous":return a=this.N,Cf(a.v());case "next":return a=this.N,Af(a.K)}return null};g.hd=function(){switch(this.Tg){case "workspace":var a=this.N.Ca(!0);if(a.length>0)return Df(a[0]);break;case "stack":a=this.N;var b=a.B||a.s;return b?Af(b):Cf(a);case "block":a=this.N;a:{a=a.u;b=0;for(var c;c=a[b];b++){for(var d=c.aa,e=0,f;f=d[e];e++)if(Gf(f)||yf){a=zf(f);break a}if(c.connection){a=Bf(c);break a}}a=null}return a;case "input":return Af(this.N.K)}return null};
g.vd=function(){switch(this.Tg){case "stack":return Ef(this,!1);case "field":a:{var a=this.N;var b=a.tc();var c=a.v();a=b.aa.indexOf(a)-1;for(var d=c.u.indexOf(b),e;e=c.u[d];d--){if(e.connection&&e!==b){b=Bf(e);break a}for(e=e.aa;a>-1;){if(Gf(e[a])||yf){b=zf(e[a]);break a}a--}d-1>=0&&(a=c.u[d-1].aa.length-1)}b=null}return b;case "input":a:{b=this.N.tc();c=b.v();for(a=c.u.indexOf(b);d=c.u[a];a--){if(d.connection&&d!==b){b=Bf(d);break a}d=d.aa;e=d.length-1;for(var f;f=d[e];e--)if(Gf(f)||yf){b=zf(f);
break a}}b=null}return b;case "block":return b=this.N,Af(b.B||b.s);case "previous":b=this.N;if((b=b.K)&&!b.tc())return Af(b);break;case "next":return b=this.N,Cf(b.v())}return null};
g.sd=function(){switch(this.Tg){case "stack":var a=this.N,b=a.ka();a=a.j;return(b=new r(b.x,b.y+-20),a)?new xf("workspace",a,{Un:b}):null;case "output":return b=this.N,(a=b.K)?Af(a):Df(b.v());case "field":return Cf(this.N.v());case "input":return b=this.N,Cf(b.v());case "block":return a=this.N,Ff(a);case "previous":return b=this.N,Ff(b.v());case "next":return b=this.N,Ff(b.v())}return null};var Hf=Object.create(null);var If=Object.create(null);function Jf(a,b){if(typeof a!="string"||a.trim()=="")throw Error('Error: Invalid extension name "'+a+'"');if(If[a])throw Error('Error: Extension "'+a+'" is already registered.');if(typeof b!="function")throw Error('Error: Extension "'+a+'" must be a function');If[a]=b}
function Kf(a,b,c){var d=If[a];if(typeof d!="function")throw Error('Error: Extension "'+a+'" not found.');if(c){if(Lf(b).length)throw Error('Error: tried to apply mutation "'+a+'" to a block that already has mutator functions.  Block id: '+b.id);}else var e=Lf(b);d.apply(b);if(c){a='Error after applying mutator "'+a+'": ';if(typeof b.Ld!="function")throw Error(a+'Applying a mutator didn\'t add "domToMutation"');if(typeof b.od!="function")throw Error(a+'Applying a mutator didn\'t add "mutationToDom"');
c=b.lj!==void 0;d=b.oj!==void 0;if(c&&d){if(typeof b.lj!="function")throw Error(a+"compose must be a function.");if(typeof b.oj!="function")throw Error(a+"decompose must be a function.");}else if(c||d)throw Error(a+'Must have both or neither of "compose" and "decompose"');}else{a:if(c=e,b=Lf(b),b.length!=c.length)b=!1;else{for(d=0;d<b.length;d++)if(c[d]!=b[d]){b=!1;break a}b=!0}if(!b)throw Error('Error when applying extension "'+a+'": mutation properties changed when applying a non-mutator extension.');
}}function Lf(a){var b=[];a.Ld!==void 0&&b.push(a.Ld);a.od!==void 0&&b.push(a.od);a.lj!==void 0&&b.push(a.lj);a.oj!==void 0&&b.push(a.oj);return b}Jf("parent_tooltip_when_inline",function(){this.eq=this.Ub;this.Jg(function(){var a=this.getParent();return a&&Mf(a)&&a.Ub||this.eq}.bind(this))});function Nf(a){var b=Uc(Nc,a.type);return b?b.M(a):(console.warn("Blockly could not create a field of type "+a.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)};var Of=0,Pf=null;function Qf(a,b,c,d){var e=(new Date-c)/150;e>1?A(a):(a.setAttribute("transform","translate("+(a.gq+(b?-1:1)*a.Zl.width*d/2*e)+","+(a.hq+a.Zl.height*d*e)+") scale("+(1-e)*d+")"),setTimeout(Qf,10,a,b,c,d))}function Rf(a,b,c){var d=(new Date-b)/150;d>1?A(a):(a.setAttribute("r",d*25*c),a.style.opacity=1-d,Of=setTimeout(Rf,10,a,b,c))}
function Sf(a,b,c){var d=(new Date-c)/200;d>1?a.Kg="":(a.Kg="skewX("+Math.round(Math.sin(d*Math.PI*3)*(1-d)*b)+")",Pf=a,Of=setTimeout(Sf,10,a,b,c));a.setAttribute("transform",a.Sg+a.Kg)}function Tf(){if(Pf){clearTimeout(Of);var a=Pf;a.Kg="";a.setAttribute("transform",a.Sg);Pf=null}};function Uf(a,b,c){Uf.i.constructor.call(this,a?a.j.id:void 0);this.ga=a?a.id:null;this.Om=b;this.bm=c}H(Uf,Pd);Uf.prototype.type="drag";Uf.prototype.R=function(){var a=Uf.i.R.call(this);a.isStart=this.Om;a.blockId=this.ga;a.blocks=this.bm;return a};Uf.prototype.M=function(a){Uf.i.M.call(this,a);this.Om=a.isStart;this.ga=a.blockId;this.bm=a.blocks};B(Mc,"drag",Uf);function Vf(a){this.Cd=M=a;this.g=a.j;this.ld=this.bk=null;this.Zf=Wf(this,this.Cd);this.Xa=this.wa=null;this.lc=!1;this.Yf=this.Uj=this.Zd=null;this.xh=Xf(this)}Vf.prototype.dispose=function(){this.xh.length=0;C++;try{this.Zf&&this.Zf.dispose(),this.ld&&this.ld.dispose()}finally{C--}};
Vf.prototype.update=function(a,b){var c=this.wa&&this.Xa?na:ma;for(var d=null,e=null,f=0;f<this.xh.length;f++){var h=this.xh[f],k=h.closest(c,a);k.connection&&(d=k.connection,e=h,c=k.yi)}c={closest:d,local:e,yi:c};if((this.lc=this.kl(c,b))||Yf(this,c,a)){C++;c.closest?(a=this.wa!=c.closest,b=this.Xa!=c.local,this.wa&&this.Xa&&(a||b||this.lc)&&Zf(this)):Zf(this);this.Xa=this.wa=this.Zd=null;if(!this.lc&&(a=c.closest,b=c.local,a))if(a==this.wa||a.v().Cb())console.log("Trying to connect to an insertion marker");
else{this.wa=a;this.Xa=b;a=this.wa;b=this.Xa;c=this.Cd;b.type==2||b.type==4?((d=!a.isConnected())||(d=a.F(),d=!!Ze(c,b.type===2?d.s:d.B)),b=d?0:2):b=0;switch(b){case 1:this.Uj=this.wa.v();break;case 0:d=this.Xa;b=this.wa;c=this.bk&&d==this.bk?this.ld:this.Zf;d=c.Mj(d.v(),d);if(d==this.Zd)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");c.W();c.I=!0;c.O().setAttribute("visibility","visible");d&&b&&(d.type!=3&&d.type!=1||c.moveBy(b.x-d.x,b.y-d.y));b&&d.connect(b);
this.Zd=d;break;case 2:this.Yf=this.wa.F(),$f(this.Yf.va,"blocklyReplaceable",!0)}a&&(c=a.m.j.ua.C(),b=ag(c,a),a.type==1||a.type==2?(c=c.Ee,b=N(0,-c)+O("v",c)+b.Qb+O("v",c)):(c=c.Df-c.pa,b=N(-c,0)+O("h",c)+b.ud+O("h",c)),c=a.m.ka(),Ye.Im=y(Zb,{"class":"blocklyHighlightedConnectionPath",d:b,transform:"translate("+(a.x-c.x)+","+(a.y-c.y)+")"+(a.m.o?" scale(-1 1)":"")},a.m.O()))}C--}};
function Wf(a,b){var c=b.type;C++;try{var d=a.g.qk(c);d.Cn(!0);if(b.od){var e=b.od();e&&d.Ld(e)}for(a=0;a<b.u.length;a++){var f=b.u[a];if(f.name!="_TEMP_COLLAPSED_INPUT"){var h=d.u[a];if(!h)throw Error("The insertion marker manager tried to create a marker but the result is missing an input. If you are using a mutator, make sure your domToMutation method is properly defined.");for(c=0;c<f.aa.length;c++){var k=f.aa[c],l=h.aa[c];if(!l)throw Error("The insertion marker manager tried to create a marker but the result is missing a field. If you are using a mutator, make sure your domToMutation method is properly defined.");
Gd(l,k.sb)}}}d.le(b.isCollapsed());d.oe(Mf(b));d.jg();d.O().setAttribute("visibility","hidden")}finally{C--}return d}function Xf(a){var b=a.Cd.cc(!1),c=a.Cd.ei(!0);if(c&&c!=a.Cd.A){b.push(c);a.bk=c;if(a.ld){C++;try{a.ld.dispose()}finally{C--}}a.ld=Wf(a,c.v())}return b}
function Yf(a,b,c){var d=b.local,e=b.closest;b=b.yi;if(d&&e){if(a.Xa&&a.wa){if(a.wa==e&&a.Xa==d)return!1;d=a.Xa.x+c.x-a.wa.x;a=a.Xa.y+c.y-a.wa.y;a=Math.sqrt(d*d+a*a);return!(e&&b>a-8)}if(a.Xa||a.wa)console.error("Only one of localConnection_ and closestConnection_ was set.");else return!0}else return!(!a.Xa||!a.wa);console.error("Returning true from shouldUpdatePreviews, but it's not clear why.");return!0}Vf.prototype.kl=function(a,b){return b&&Gb(this.g.Zb,b.id)?bg(b,this.Cd,a&&!!a.closest):!1};
function Zf(a){a.wa&&a.wa.F()&&(A(Ye.Im),delete Ye.Im);if(a.Yf)$f(a.Yf.va,"blocklyReplaceable",!1),a.Yf=null;else if(a.Uj)a.Uj=null;else if(a.Zd)if(a.Zd){var b=a.Zd,c=b.v(),d=c.A,e=c.B,f=c.s;f=b.type==1&&!(f&&f.K);!(b!=d||e&&e.K)||f?Nd(b.F(),!1):b.type==3&&b!=d?(d=b.K,Nd(d.v(),!1),e=e?e.K:null,Nd(c,!0),e&&e.connect(d)):Nd(c,!0);if(b.K)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");a.Zd=null;(a=c.O())&&a.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")}
Vf.prototype.Te=function(){var a=[];this.Zf&&a.push(this.Zf);this.ld&&a.push(this.ld);return a};function cg(a,b){this.ma=a;this.g=b;this.rc=new Vf(this.ma);this.Oa=null;this.lc=!1;this.zd=this.ma.ka();b=[];a=mb(a,!1);for(var c=0,d;d=a[c];c++){d=dg(d);for(var e=0;e<d.length;e++){var f={location:d[e].cr(),icon:d[e]};b.push(f)}}this.Nh=b}g=cg.prototype;g.dispose=function(){this.Nh.length=0;this.rc&&this.rc.dispose()};
g.Ii=function(a,b){Wc||E(!0);var c=new (G("drag"))(this.ma,!0,mb(this.ma,!1));D(c);this.g.ci&&eg(this.ma);lc();this.g.$a(!1);Tf();if(this.ma.getParent()||b&&this.ma.A&&this.ma.A.F())Nd(this.ma,b),a=this.hf(a),a=xa(this.zd,a),this.ma.translate(a.x,a.y),a=this.ma,a.j.tb.play("disconnect"),a.j.scale<1||(b=fg(a).height,b=Math.atan(10/b)/Math.PI*180,a.o||(b*=-1),Sf(a.O(),b,new Date)),a=this.rc,a.xh=Xf(a);this.ma.ne(!0);a=this.ma;a.Wg&&(b=a.ka(),a.O().removeAttribute("transform"),a.j.ub.tf(b.x,b.y),(b=
a.O())&&Wd(a.j.ub,b))};g.Kc=function(a,b){b=this.hf(b);gg(this.ma,xa(this.zd,b));for(var c=0;c<this.Nh.length;c++){var d=this.Nh[c];d.icon.kr(xa(d.location,b))}c=this.Oa;this.Oa=hg(this.g,a);this.rc.update(b,this.Oa);a=this.lc;this.lc=this.rc.lc;a!=this.lc&&$f(this.ma.va,"blocklyDraggingDelete",this.lc);this.Oa!==c&&c&&c.yk();this.Oa&&this.Oa.zk()};
g.Wf=function(a,b){this.Kc(a,b);this.Nh=[];a=new (G("drag"))(this.ma,!1,mb(this.ma,!1));D(a);mc();Tf();b=this.hf(b);a=xa(this.zd,b);var c=this.ma;c.Wg&&(c.translate(a.x,a.y),c.j.ub.Bh(c.j.ra));this.Oa&&this.Oa.Ak();this.lc?(ig(this),this.ma.dispose(!1,!0),ef=[],a=!0):a=!1;if(!a)if(this.ma.ne(!1),b){jg(this.ma,b.x,b.y);ig(this);if(this.rc.wa){if(b=this.rc,b.wa&&(C++,Zf(b),C--,b.Xa.connect(b.wa),b.Cd.I)){c=($e(b.Xa)?b.wa:b.Xa).v();var d=c.j;a=d.scale;d.tb.play("click");if(!(a<1)){var e=kg(d,c.O());
c.s?(e.x+=(c.o?3:-3)*a,e.y+=13*a):c.B&&(e.x+=(c.o?-23:23)*a,e.y+=3*a);c=y(Ob,{cx:e.x,cy:e.y,r:0,fill:"none",stroke:"#888","stroke-width":10},K(d));Rf(c,new Date,a)}eg(b.Cd.dc())}}else this.ma.W();lg(this.ma)}else mg(this.ma.j,this.g.Db.Od(!0),this.ma);this.g.$a(!0);E(!1)};function ig(a){var b=new (G("move"))(a.ma);b.vk=a.zd;Ld(b);D(b)}g.hf=function(a){a=new r(a.x/this.g.scale,a.y/this.g.scale);this.g.ci&&a.scale(1/this.g.options.rb.scale);return a};
g.Te=function(){return this.rc&&this.rc.Te?this.rc.Te():[]};B(Tc,"default",cg);function ng(a,b){this.mb=a;this.g=b;this.Oa=null;this.Xg=!1;this.zd=this.mb.ka();this.Md=ib()&&b.ub?b.ub:null}ng.prototype.dispose=function(){this.Md=this.g=this.mb=null};function og(a,b,c){a.hf(c);gg(a.mb,a.Md);c=a.Oa;a.Oa=hg(a.g,b);b=a.Xg;a.Xg=a.kl(a.Oa);b!=a.Xg&&$f(a.mb.va,"blocklyDraggingDelete",a.Xg);a.Oa!==c&&c&&c.yk();a.Oa&&a.Oa.zk()}ng.prototype.kl=function(a){return a&&Gb(this.g.Zb,a.id)?bg(a,this.mb,!1):!1};
function pg(a,b,c){og(a,b,c);b=a.hf(c);b=xa(a.zd,b);a.mb.moveTo(b.x,b.y);a.Oa&&a.Oa.Ak();a.Xg?a.mb.dispose(!1,!0):(a.Md&&a.Md.Bh(a.g.Cc),a.mb.ne&&a.mb.ne(!1));a.g.$a(!0);E(!1)}ng.prototype.hf=function(a){a=new r(a.x/this.g.scale,a.y/this.g.scale);this.g.ci&&a.scale(1/this.g.options.rb.scale);return a};function qg(a,b,c){qg.i.constructor.call(this,a?a.j.id:b);this.ga=a?a.id:null;this.In=c}H(qg,Pd);qg.prototype.type="click";qg.prototype.R=function(){var a=qg.i.R.call(this);a.targetType=this.In;this.ga&&(a.blockId=this.ga);return a};qg.prototype.M=function(a){qg.i.M.call(this,a);this.In=a.targetType;this.ga=a.blockId};B(Mc,"click",qg);function rg(a){this.g=a;this.Jm=sg(this.g);this.Rn=tg(this.g);this.Zp=new r(a.scrollX,a.scrollY)}rg.prototype.dispose=function(){this.g=null};rg.prototype.Ii=function(){M&&ug(M);Ee(this.g)};rg.prototype.Wf=function(a){this.Kc(a);Fe(this.g)};rg.prototype.Kc=function(a){a=xa(this.Zp,a);if(this.Jm&&this.Rn)this.g.scroll(a.x,a.y);else if(this.Jm)this.g.scroll(a.x,this.g.scrollY);else if(this.Rn)this.g.scroll(this.g.scrollX,a.y);else throw new TypeError("Invalid state.");};function vg(a,b){this.Ym=null;this.gb=new r(0,0);this.Aa=this.Ra=this.pf=this.qf=this.jc=null;this.nj=b;this.mg=this.Vd=this.ng=this.Pd=!1;this.hc=a;this.L=this.we=this.nc=this.Zc=this.si=this.ri=null;this.Fm=this.Zh=this.Ze=this.cm=!1}g=vg.prototype;g.dispose=function(){qb=null;Ie=!1;this.nj.Va=null;this.ri&&u(this.ri);this.si&&u(this.si);this.nc&&this.nc.dispose();this.we&&this.we.dispose();this.Zc&&this.Zc.dispose()};
function wg(a,b){a.gb=wa(new r(b.clientX,b.clientY),a.Ym);if(a.Pd)var c=!1;else c=a.gb,a.Pd=Math.sqrt(c.x*c.x+c.y*c.y)>(a.L?10:5),c=a.Pd;if(c){if(a.cm)throw Error("updateIsDragging_ should only be called once per gesture.");a.cm=!0;a.jc?(a.mg=!0,a.Zc=new ng(a.jc,a.Aa),c=a.Zc,Wc||E(!0),c.g.$a(!1),c.mb.jr(!1),c.Md&&(c.mb.moveTo(0,0),c.Md.tf(c.zd.x,c.zd.y),Wd(c.Md,c.mb.O())),c.mb.ne&&c.mb.ne(!0),og(a.Zc,a.hc,a.gb),c=!0):c=!1;if(!c){if(a.Ra){if(a.L){if(a.Ra&&a.Ra.isEnabled()){if(!(c=!xg(a.L))){c=a.gb;
c=Math.atan2(c.y,c.x)/Math.PI*180;var d=a.L.ep;c=c<d&&c>-d||c<-180+d||c>180-d?!0:!1}c?(a.Aa=a.L.P,yg(a.Aa),Wc||E(!0),a.pf=null,a.Ra=zg(a.L,a.Ra),a.Ra.select(),c=!0):c=!1}else c=!1;a.Vd=c}else a.Ra.Ja()&&(a.Vd=!0);a.Vd?(a.nc=new (Vc(Tc,a.nj.options,!0))(a.Ra,a.Aa),a.nc.Ii(a.gb,a.Fm),a.nc.Kc(a.hc,a.gb),c=!0):c=!1}else c=!1;if(c=!c)if(a.L)c=xg(a.L);else if(c=a.Aa)c=a.Aa,c=c.options.Ya&&c.options.Ya.Kc;c&&(a.we=new rg(a.Aa),a.ng=!0,a.we.Ii())}ub()}a.hc=b}
g.tj=function(a){Wa(a)?this.cancel():(this.Ze=!0,Tf(),yg(this.Aa),this.Aa.ci&&this.Aa.resize(),Ge(!!this.L),Gc(this.Aa),this.hc=a,Ve(),Ie=!0,this.Ra&&this.Ra.select(),bb(a)?vb(this,a):(a.type.toLowerCase()!="touchstart"&&a.type.toLowerCase()!="pointerdown"||a.pointerType=="mouse"||tb(a,this),this.Ym=new r(a.clientX,a.clientY),this.Fm=a.altKey||a.ctrlKey||a.metaKey,this.$l(a)))};
g.$l=function(a){this.ri=t(document,"mousemove",null,this.Xe.bind(this));this.si=t(document,"mouseup",null,this.Uh.bind(this));a.preventDefault();a.stopPropagation()};g.Xe=function(a){wg(this,a);this.ng?this.we.Kc(this.gb):this.Vd?this.nc.Kc(this.hc,this.gb):this.mg&&og(this.Zc,this.hc,this.gb);a.preventDefault();a.stopPropagation()};
g.Uh=function(a){wg(this,a);ub();if(this.Zh)console.log("Trying to end a gesture recursively.");else{this.Zh=!0;if(this.mg)pg(this.Zc,a,this.gb);else if(this.Vd)this.nc.Wf(a,this.gb);else if(this.ng)this.we.Wf(this.gb);else if(this.jc&&!this.Pd)this.jc.Tp&&this.jc.Tp(),this.jc.select&&this.jc.select();else if(Ag(this)){var b=this.qf,c=this.hc;Gf(b)&&b.Hi(c);Bg(this)}else!this.pf||this.Pd||Ag(this)?this.pf||this.jc||this.qf||this.Pd||(b=this.nj,M&&ug(M),b=this.Aa||b,D(new (G("click"))(null,b.id,"workspace"))):
(this.L&&this.L.Hd?this.Ra.isEnabled()&&(Wc||E(!0),lg(zg(this.L,this.Ra))):(b=new (G("click"))(this.pf,this.Aa.id,"block"),D(b)),Bg(this),E(!1));a.preventDefault();a.stopPropagation();this.dispose()}};g.cancel=function(){this.Zh||(ub(),this.mg?pg(this.Zc,this.hc,this.gb):this.Vd?this.nc.Wf(this.hc,this.gb):this.ng&&this.we.Wf(this.gb),this.dispose())};
function vb(a,b){a.Ra?(Bg(a),Ge(!!a.L),a.Ra.Gi(b)):a.jc?a.jc.Gi(b):a.Aa&&!a.L&&(Ge(),a.Aa.Gi(b));b.preventDefault();b.stopPropagation();a.dispose()}function Cg(a,b,c){if(a.Ze)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");a.Aa||(a.Aa=c);a.hc=b;a.tj(b)}function Dg(a,b,c){if(a.Ze)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");a.L||(a.L=c);Cg(a,b,c.g)}function Bg(a){a.Ra&&!a.L&&eg(a.Ra)}
function Eg(a,b){a.pf||a.jc||(a.pf=b,b.Bb&&b!=b.dc()?Fg(a,b.dc()):Fg(a,b))}function Fg(a,b){b.T?Fg(a,b.getParent()):a.Ra=b}function Ag(a){return(a.qf?Gf(a.qf):!1)&&!a.Pd&&(!a.L||!a.L.Hd)}g.qb=function(){return this.ng||this.Vd||this.mg};g.Te=function(){return this.nc?this.nc.Te():[]};function Gg(){for(var a=vf(),b=0,c;c=a[b];b++)if(c.Va)return!0;return!1};function Hg(){this.Lb=this.$b=this.jj=null;this.type="marker"}function Ig(a,b){var c=a.$b;a.$b=b;a.Lb&&a.Lb.ac(c,a.$b)}Hg.prototype.ac=function(){this.Lb&&this.Lb.ac(this.$b,this.$b)};Hg.prototype.jb=function(){this.Lb&&this.Lb.jb()};Hg.prototype.dispose=function(){this.Lb&&this.Lb.dispose()};function Jg(){Jg.i.constructor.call(this);this.type="cursor"}H(Jg,Hg);Jg.prototype.next=function(){var a=this.$b;if(!a)return null;for(a=a.next();a&&a.next()&&(a.getType()=="next"||a.getType()=="block");)a=a.next();a&&Ig(this,a);return a};Jg.prototype.hd=function(){var a=this.$b;if(!a)return null;if(a.getType()=="previous"||a.getType()=="output")a=a.next();(a=a.hd())&&Ig(this,a);return a};
Jg.prototype.vd=function(){var a=this.$b;if(!a)return null;for(a=a.vd();a&&a.vd()&&(a.getType()=="next"||a.getType()=="block");)a=a.vd();a&&Ig(this,a);return a};Jg.prototype.sd=function(){var a=this.$b;if(!a)return null;(a=a.sd())&&a.getType()=="block"&&(a=a.vd()||a);a&&Ig(this,a);return a};B(Lc,"default",Jg);function Kg(a){this.Jc=this.Kb=null;this.rg=Object.create(null);this.g=a}g=Kg.prototype;g.ag=function(){return this.Kb};g.dg=function(a){return this.rg[a]||null};g.Tc=function(a){a?(this.g.ra.appendChild(a),this.Jc=a):this.Jc=null};g.yd=function(a){a?this.g.ra&&(this.Jc?this.g.ra.insertBefore(a,this.Jc):this.g.ra.appendChild(a)):this.Rc=null};
g.dispose=function(){for(var a=Object.keys(this.rg),b=0,c;c=a[b];b++){var d=this.rg[c];if(d)d.dispose(),delete this.rg[c];else throw Error("Marker with ID "+c+" does not exist. Can only unregister markers that exist.");}this.rg=null;this.Kb&&(this.Kb.dispose(),this.Kb=null)};var Lg,Mg=null,Ng=null,Og="",Pg="";function Qg(a){var b=P,c=P.dispose;Rg();Mg=b;Ng=c;b=Lg;b.style.direction=a?"rtl":"ltr";b.style.display="block";a=Hc;Og=a.ua.bc();Pg=a.Lc().bc();z(b,Og);z(b,Pg)}function Rg(){if(Mg){Mg=null;var a=Lg;a.style.display="none";a.style.left="";a.style.top="";Ng&&Ng();Ng=null;a.textContent="";Og&&(hc(a,Og),Og="");Pg&&(hc(a,Pg),Pg="");Gc(Hc)}}function Sg(a,b,c){Lg.style.left=a+"px";Lg.style.top=b+"px";Lg.style.height=c+"px"};function Tg(a,b,c){this.sb=this.Ri;this.Kn=this.Pn=null;this.ab=new Ga(0,0);this.h=this.pk=this.re=this.bb=this.Ba=this.ob=this.Rc=this.Jc=null;c&&this.Lf(c);Gd(this,a);b&&(this.Pn=b)}g=Tg.prototype;g.Ri=null;g.name=void 0;g.disposed=!1;g.Xm=50;g.m=null;g.jd=!0;g.Ed=!0;g.em=null;g.yf=!0;g.Pl=!1;g.Lf=function(a){var b=a.tooltip;typeof b=="string"&&(b=eb(a.tooltip));b&&this.Jg(b)};g.C=function(){!this.h&&this.m&&this.m.j&&this.m.j.I&&(this.h=this.m.j.ua.C());return this.h};g.v=function(){return this.m};
g.ba=function(){this.ob||(this.ob=y(Wb,{},null),this.isVisible()||(this.ob.style.display="none"),this.m.O().appendChild(this.ob),this.Wh(),Ug(this),this.Jg(this.Kn),Qe(Vg(this)),this.pk=t(Vg(this),"mousedown",this,this.rd))};g.Wh=function(){Wg(this);Xg(this)};function Wg(a){a.Ba=y(ac,{rx:a.C().dh,ry:a.C().dh,x:0,y:0,height:a.ab.height,width:a.ab.width,"class":"blocklyFieldRect"},a.ob)}
function Xg(a){a.bb=y(cc,{"class":"blocklyText"},a.ob);a.C().Si&&a.bb.setAttribute("dominant-baseline","central");a.re=document.createTextNode("");a.bb.appendChild(a.re)}g.Jj=function(a){Gd(this,a.textContent)};g.dispose=function(){uc===this&&Ec();Mg==this&&Rg();Ue(Vg(this));this.pk&&u(this.pk);A(this.ob);this.disposed=!0};
function Ug(a){var b=a.ob;a.yf&&b&&(a.m.Ob()?(z(b,"blocklyEditableText"),hc(b,"blocklyNonEditableText"),b.style.cursor=a.co):(z(b,"blocklyNonEditableText"),hc(b,"blocklyEditableText"),b.style.cursor=""))}function Gf(a){return!!a.m&&a.m.Ob()&&!!a.Hi&&typeof a.Hi==="function"}g.isVisible=function(){return this.Ed};g.za=function(a){if(this.Ed!=a){this.Ed=a;var b=this.O();b&&(b.style.display=a?"block":"none")}};g.O=function(){return this.ob};g.Na=function(){};
g.Vk=function(){this.re&&(this.re.nodeValue=Yg(this));this.Nn()};g.Nn=function(){var a=this.C(),b=this.Ba?this.C().zf:0,c=b*2,d=a.eh,e=0;this.bb&&(e=nc(this.bb,a.Bf+"pt",a.ye,a.xe),c+=e);this.Ba&&(d=Math.max(d,a.Bl));this.ab.height=d;this.ab.width=c;Zg(this,b,e);$g(this)};function Zg(a,b,c){if(a.bb){var d=a.C(),e=a.ab.height/2;a.bb.setAttribute("x",a.m.o?a.ab.width-c-b:b);a.bb.setAttribute("y",d.Si?e:e-d.eh/2+d.El)}}
function $g(a){a.Ba&&(a.Ba.setAttribute("width",a.ab.width),a.Ba.setAttribute("height",a.ab.height),a.Ba.setAttribute("rx",a.C().dh),a.Ba.setAttribute("ry",a.C().dh))}g.getSize=function(){if(!this.isVisible())return new Ga(0,0);this.jd?(this.Vk(),this.jd=!1):this.Ed&&this.ab.width==0&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.Vk());return this.ab};
function Yg(a){var b=ah(a);if(!b)return"\u00a0";b.length>a.Xm&&(b=b.substring(0,a.Xm-2)+"\u2026");b=b.replace(/\s/g,"\u00a0");a.m&&a.m.o&&(b+="\u200f");return b}function ah(a){if(a.Oj){var b=a.Oj.call(a);if(b!==null)return String(b)}return String(a.sb)}g.qg=function(){this.jd=!0;this.h=null};function bh(a){a.jd=!0;a.m&&a.m.I&&(a.m.W(),a.m.vb(),a.xl())}
function Gd(a,b){if(b!==null){var c=a.Mh(b);b=ch(a,b,c);if(!(b instanceof Error)){if(c=a.Pn)if(c=c.call(a,b),b=ch(a,b,c),b instanceof Error)return;c=a.m;if(!c||!c.disposed){var d=a.sb;d===b?a.Uf(b):(c&&C==0&&D(new (G("change"))(c,"field",a.name||null,d,b)),a.Uf(b),a.jd&&bh(a))}}}}function ch(a,b,c){if(c===null)return a.jd&&bh(a),Error();c!==void 0&&(b=c);return b}g.Mh=function(a){return a===null||a===void 0?null:a};g.Uf=function(a){this.sb=a;this.jd=!0};
g.rd=function(a){if(this.m&&this.m.j&&(a=this.m.j.ed(a))){if(a.Ze)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");a.qf||(a.qf=this)}};g.Jg=function(a){a||a===""||(a=this.m);var b=Vg(this);b?b.Ub=a:this.Kn=a};function Vg(a){return a.em||a.O()}g.tc=function(){for(var a=null,b=this.m,c=b.u,d=0;d<b.u.length;d++)for(var e=c[d],f=e.aa,h=0;h<f.length;h++)if(f[h]===this){a=e;break}return a};g.ym=function(){return!1};
g.Tc=function(a){a?(this.ob.appendChild(a),this.Jc=a):this.Jc=null};g.yd=function(a){a?(this.ob.appendChild(a),this.Rc=a):this.Rc=null};g.xl=function(){var a=this.m.j;a.og&&this.Jc&&a.ag().ac();a.og&&this.Rc&&a.dg("local_marker_1").ac()};function dh(a,b,c){this.Ah=null;dh.i.constructor.call(this,a,null,c);c||(this.Ah=b||null)}H(dh,Tg);dh.prototype.Ri="";dh.M=function(a){var b=eb(a.text);return new dh(b,void 0,a)};dh.prototype.yf=!1;dh.prototype.Lf=function(a){dh.i.Lf.call(this,a);this.Ah=a["class"]};dh.prototype.Wh=function(){Xg(this);this.Ah&&z(this.bb,this.Ah)};dh.prototype.Mh=function(a){return a===null||a===void 0?null:String(a)};B(Nc,"field_label",dh);function eh(a,b,c,d){if(a!=5&&!b)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=a;this.name=b;this.m=c;this.connection=d;this.aa=[]}g=eh.prototype;g.align=-1;g.Ed=!0;g.v=function(){return this.m};
function fh(a,b,c,d){if(b<0||b>a.aa.length)throw Error("index "+b+" out of bounds.");if(!(c||c==""&&d))return b;typeof c=="string"&&(c=Nf({type:"field_label",text:c}));if(c.m)throw Error("Field already bound to a block.");c.m=a.m;a.m.I&&(c.ba(),c.Na());c.name=d;c.za(a.isVisible());c.Pk&&(b=fh(a,b,c.Pk));a.aa.splice(b,0,c);++b;c.ol&&(b=fh(a,b,c.ol));a.m.I&&(a.m=a.m,a.m.W(),a.m.vb());return b}g.isVisible=function(){return this.Ed};
g.za=function(a){if(this.Ed!=a){this.Ed=a;for(var b=0,c;c=this.aa[b];b++)c.za(a);if(this.connection){this.connection=this.connection;if(a)gh(this.connection);else if(b=this.connection,hh(b,!1),b.K)for(b=mb(b.F(),!1),c=0;c<b.length;c++){for(var d=b[c],e=d.cc(!0),f=0;f<e.length;f++)hh(e[f],!1);d=dg(d);for(f=0;f<d.length;f++)d[f].za(!1)}if(b=this.connection.F())b.O().style.display=a?"block":"none"}}};g.qg=function(){for(var a=0,b;b=this.aa[a];a++)b.qg()};
g.lf=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.lf(a)};g.Hg=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.Hg(a)};g.Ue=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.Ue()};g.ba=function(){if(this.m.j.I)for(var a=0;a<this.aa.length;a++)this.aa[a].ba()};
g.dispose=function(){for(var a=0,b;b=this.aa[a];a++)b.dispose();this.connection&&this.connection.dispose();this.m=null};function pf(a,b,c){if(ih&&typeof ih.prototype[b]!="undefined")throw Error('Block prototypeName "'+b+'" conflicts with Blockly.Generator members.');this.id=c&&!a.yb(c)?c:gb();a.dj[this.id]=this;this.B=this.A=this.s=null;this.u=[];this.Mc=void 0;this.disabled=!1;this.Ub="";this.contextMenu=!0;this.zc=null;this.Hc=[];this.rm=this.Zm=this.lm=!0;this.Id=this.T=!1;this.Yb={text:null,sn:!1,size:new Ga(160,80)};this.Wn=new r(0,0);this.j=a;this.Bb=a.kd;this.o=a.o;this.df=!1;this.uc=void 0;this.I=null;if(b){this.type=
b;c=Hf[b];if(!c||typeof c!="object")throw TypeError("Unknown block type: "+b);gd(this,c)}a.vh(this);a.Wc[this.type]||(a.Wc[this.type]=[]);a.Wc[this.type].push(this);(a=Wc)||E(!0);b=Xc;try{typeof this.ba=="function"&&(Xc=!1,this.ba(),Xc=b),C==0&&D(new (G("create"))(this))}finally{a||E(!1),Xc=b}this.Bp=this.Mc;if(typeof this.onchange=="function"){if((a=this.onchange)&&typeof a!="function")throw Error("onchange must be a function.");this.wg&&kb(this.j.Ga,this.wg);if(this.onchange=a)this.wg=a.bind(this),
uf(this.j,this.wg)}}g=pf.prototype;g.data=null;g.disposed=!1;g.Jb="#000000";g.Lg="";
g.dispose=function(a){if(this.j){this.wg&&kb(this.j.Ga,this.wg);Nd(this,a);C==0&&D(new (G("delete"))(this));C++;try{if(this.j){this.j.Ai(this);var b=this.j;b.Wc[this.type].splice(b.Wc[this.type].indexOf(this),1);b.Wc[this.type].length||delete b.Wc[this.type];delete this.j.dj[this.id];this.j=null}M==this&&(M=null);for(var c=this.Hc.length-1;c>=0;c--)this.Hc[c].dispose(!1);c=0;for(var d;d=this.u[c];c++)d.dispose();this.u.length=0;var e=this.cc(!0);c=0;for(var f;f=e[c];c++)f.dispose()}finally{C--,this.disposed=
!0}}};function Nd(a,b){if(a.s){var c=null;a.s.isConnected()&&(c=a.s.K,a.s.disconnect());if(c&&b){a:{b=null;for(var d=0;d<a.u.length;d++){var e=a.u[d].connection;if(e&&e.type==1&&e.K){if(b){a=null;break a}b=e}}a=b}a&&a.isConnected()&&!a.F().T&&(a=a.K,a.disconnect(),af(a,c,!1)==0?c.connect(a):a.Bk(c))}}else a.B&&(c=null,a.B.isConnected()&&(c=a.B.K,a.B.disconnect()),d=nb(a),b&&d&&!d.T&&(a=a.A.K,a.disconnect(),c&&af(c,a,!1)==0&&c.connect(a)))}
g.cc=function(){var a=[];this.s&&a.push(this.s);this.B&&a.push(this.B);this.A&&a.push(this.A);for(var b=0,c;c=this.u[b];b++)c.connection&&a.push(c.connection);return a};g.ei=function(a){for(var b=this.A;b;){var c=b.F();if(!c||a&&c.T)return b;b=c.A}return null};g.vb=function(){};g.getParent=function(){return this.zc};function Md(a,b){for(var c=0,d;d=a.u[c];c++)if(d.connection&&d.connection.F()==b)return d;return null}
function jh(a){do{var b=a;a=a.getParent();if(!a)return null}while(nb(a)==b);return a}function nb(a){return a.A&&a.A.F()}g.dc=function(){var a=this;do{var b=a;a=b.zc}while(a);return b};function ld(a,b){if(!b)return a.Hc;b=[];for(var c=0,d;d=a.u[c];c++)d.connection&&(d=d.connection.F())&&b.push(d);(a=nb(a))&&b.push(a);return b}
g.Ei=function(a){if(a!=this.zc){if(this.zc){kb(this.zc.Hc,this);if(this.B&&this.B.isConnected())throw Error("Still connected to previous block.");if(this.s&&this.s.isConnected())throw Error("Still connected to parent block.");this.zc=null}else this.j.Ai(this);(this.zc=a)?a.Hc.push(this):this.j.vh(this)}};function mb(a,b){var c=[a];a=ld(a,b);for(var d,e=0;d=a[e];e++)c.push.apply(c,mb(d,b));return c}function od(a){return a.lm&&!a.T&&!(a.j&&a.j.options.readOnly)}
g.Ja=function(){return this.Zm&&!this.T&&!(this.j&&this.j.options.readOnly)};g.bl=function(a){this.Zm=a};g.il=function(a){this.T=a};g.Cb=function(){return this.df};g.Cn=function(a){this.df=a};g.Ob=function(){return this.rm&&!(this.j&&this.j.options.readOnly)};g.al=function(a){this.rm=a;a=0;for(var b;b=this.u[a];a++)for(var c=0,d;d=b.aa[c];c++)Ug(d)};
g.Mj=function(a,b){var c=this.cc(!0);a=a.cc(!0);if(c.length!=a.length)throw Error("Connection lists did not match in length.");for(var d=0;d<a.length;d++)if(a[d]==b)return c[d];return null};g.Jg=function(a){this.Ub=a};g.Lj=function(){return this.Jb};g.Ci=function(a){this.Jb=ob(a).gg};g.pe=function(a){this.Lg=a};
function Bd(a,b){if(typeof b!=="string")throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(b===void 0?"nothing":b+" of type "+typeof b)+" instead");for(var c=0,d;d=a.u[c];c++)for(var e=0,f;f=d.aa[e];e++)if(f.name===b)return f;return null}function Dd(a){for(var b=0,c;c=a.u[b];b++)for(var d=0;c.aa[d];d++);return[]}function kf(a,b){return(a=Bd(a,b))?a.sb:null}
g.hl=function(a,b){if(a){b===void 0&&(b=null);if(!this.B){if(this.s)throw Error("Remove output connection prior to adding previous connection.");this.B=this.pg(4)}this.B.lf(b)}else if(this.B){if(this.B.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.B.dispose();this.B=null}};
g.cl=function(a,b){if(a)b===void 0&&(b=null),this.A||(this.A=this.pg(3)),this.A.lf(b);else if(this.A){if(this.A.isConnected())throw Error("Must disconnect next statement before removing connection.");this.A.dispose();this.A=null}};
g.dl=function(a,b){if(a){b===void 0&&(b=null);if(!this.s){if(this.B)throw Error("Remove previous connection prior to adding output connection.");this.s=this.pg(2)}this.s.lf(b)}else if(this.s){if(this.s.isConnected())throw Error("Must disconnect output value before removing connection.");this.s.dispose();this.s=null}};g.oe=function(a){this.Mc!=a&&(D(new (G("change"))(this,"inline",null,this.Mc,a)),this.Mc=a)};
function Mf(a){if(a.Mc!=void 0)return a.Mc;for(var b=1;b<a.u.length;b++)if(a.u[b-1].type==5&&a.u[b].type==5)return!1;for(b=1;b<a.u.length;b++)if(a.u[b-1].type==1&&a.u[b].type==5)return!0;return!1}g.isEnabled=function(){return!this.disabled};g.Ac=function(a){this.isEnabled()!=a&&(D(new (G("change"))(this,"disabled",null,this.disabled,!a)),this.disabled=!a)};function kh(a){for(a=jh(a);a;){if(a.disabled)return!0;a=jh(a)}return!1}g.isCollapsed=function(){return this.Id};
g.le=function(a){this.Id!=a&&(D(new (G("change"))(this,"collapsed",null,this.Id,a)),this.Id=a)};
g.toString=function(a,b){function c(m){var n=m.Ke;!n&&m.K&&(n=m.K.Ke);return!!n&&(n.indexOf("Boolean")!=-1||n.indexOf("Number")!=-1)}function d(){h&&h.getType()==k.getType()&&h.N==k.N&&(h=null)}var e=[];b=b||"?";var f=yf;yf=!0;for(var h=Cf(this),k=h;h;){switch(h.getType()){case "input":var l=h.N;h.hd()?c(l)&&e.push("("):e.push(b);break;case "field":l=h.N,l.name!="_TEMP_COLLAPSED_FIELD"&&e.push(ah(l))}l=h;h=l.hd()||l.next();if(!h){h=l.sd();for(d();h&&!h.next();)h=h.sd(),d(),h&&h.getType()=="input"&&
c(h.N)&&e.push(")");h&&(h=h.next())}}yf=f;for(b=2;b<e.length;b++)e[b-2]=="("&&e[b]==")"&&(e[b-2]=e[b-1],e.splice(b-1,2));e=e.reduce(function(m,n){return m+(m.substr(-1)=="("||n==")"?"":" ")+n},"");e=e.trim()||"???";a&&e.length>a&&(e=e.substring(0,a-3)+"...");return e};function lh(a,b){var c=Nf(b);return!c&&b.alt?typeof b.alt=="string"?(b=mh(b.alt))?lh(a,b):null:lh(a,b.alt):c}function nh(a){return a=="input_value"||a=="input_statement"||a=="input_dummy"}
function mh(a){return(a=a.trim())?{type:"field_label",text:a}:null}g.Fe=function(a,b){var c=null;if(a==1||a==3)c=this.pg(a);a=new eh(a,b,this,c);this.u.push(a);return a};g.Tk=function(a,b){for(var c=0,d;d=this.u[c];c++)if(d.name==a)return d.dispose(),this.u.splice(c,1),!0;if(b)return!1;throw Error("Input not found: "+a);};function Cd(a,b){for(var c=0,d;d=a.u[c];c++)if(d.name==b)return d;return null}function oh(a,b){return(a=Cd(a,b))&&a.connection&&a.connection.F()}
g.mf=function(a){this.Yb.text!=a&&(D(new (G("change"))(this,"comment",null,this.Yb.text,a)),this.Yb.text=a)};g.ka=function(){return this.Wn};g.moveBy=function(a,b){if(this.zc)throw Error("Block has parent.");var c=new (G("move"))(this);this.Wn.translate(a,b);Ld(c);D(c)};g.pg=function(a){return new Ye(this,a)};function ph(){this.fc=[];this.ke=this.Pa=this.pi=this.ni=this.mi=this.Ic=this.oi=this.Qd=this.Hk=null}g=ph.prototype;
g.W=function(a){var b=document.createElement("div");b.className="blocklyMenu goog-menu blocklyNonSelectable";b.tabIndex=0;this.ke&&b.setAttribute("role",this.ke);this.Pa=b;for(var c=0,d;d=this.fc[c];c++)b.appendChild(d.ta());this.oi=t(b,"mouseover",this,this.tp,!0);this.Ic=t(b,"click",this,this.op,!0);this.mi=t(b,"mouseenter",this,this.rp,!0);this.ni=t(b,"mouseleave",this,this.sp,!0);this.pi=t(b,"keydown",this,this.pp);a.appendChild(b)};
g.focus=function(){var a=this.Pa;a&&(a.focus({preventScroll:!0}),z(a,"blocklyFocused"))};g.Gg=function(a){this.ke=a};g.dispose=function(){this.oi&&(u(this.oi),this.oi=null);this.Ic&&(u(this.Ic),this.Ic=null);this.mi&&(u(this.mi),this.mi=null);this.ni&&(u(this.ni),this.ni=null);this.pi&&(u(this.pi),this.pi=null);for(var a=0,b;b=this.fc[a];a++)b.dispose();this.Pa=null};
function qh(a,b){for(var c=a.Pa;b&&b!=c;){if(ic(b,"blocklyMenuItem"))for(var d=0,e;e=a.fc[d];d++)if(e.Pa==b)return e;b=b.parentElement}return null}
g.ic=function(a){var b=this.Qd;b&&(b.ic(!1),this.Qd=null);if(a){a.ic(!0);this.Qd=a;b=this.Pa;var c=a.Pa,d=Ja(c),e=Ja(b);var f=Ia(b,"borderLeftWidth");Ia(b,"borderRightWidth");var h=Ia(b,"borderTopWidth");Ia(b,"borderBottomWidth");f=d.x-e.x-parseFloat(f);d=d.y-e.y-parseFloat(h);c=new Ga(c.offsetWidth,c.offsetHeight);e=b.clientHeight-c.height;h=b.scrollLeft;var k=b.scrollTop;h+=Math.min(f,Math.max(f-(b.clientWidth-c.width),0));k+=Math.min(d,Math.max(d-e,0));f=new r(h,k);b.scrollLeft=f.x;b.scrollTop=
f.y;Xe(b,"activedescendant",a.Wa())}};function rh(a,b,c){b+=c;for(var d;d=a.fc[b];){if(d.isEnabled()){a.ic(d);break}b+=c}}g.tp=function(a){(a=qh(this,a.target))&&(a.isEnabled()?this.Qd!=a&&this.ic(a):this.ic(null))};g.op=function(a){var b=this.Hk;this.Hk=null;b&&typeof a.clientX=="number"&&va(b,new r(a.clientX,a.clientY))<1||(a=qh(this,a.target))&&a.isEnabled()&&a.Hf&&a.Hf(a)};g.rp=function(){this.focus()};g.sp=function(){if(this.Pa){var a=this.Pa;a&&(a.blur(),hc(a,"blocklyFocused"));this.ic(null)}};
g.pp=function(a){if(this.fc.length&&!(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)){var b=this.Qd;switch(a.keyCode){case 13:case 32:b&&b.isEnabled()&&b.Hf&&b.Hf(b);break;case 38:b=this.fc.indexOf(this.Qd);rh(this,b<0?this.fc.length:b,-1);break;case 40:rh(this,this.fc.indexOf(this.Qd),1);break;case 33:case 36:rh(this,-1,1);break;case 34:case 35:rh(this,this.fc.length,-1);break;default:return}a.preventDefault();a.stopPropagation()}};
g.getSize=function(){var a=this.Pa,b=Ha(a);b.height=a.scrollHeight;return b};var sh=0;function th(a,b){this.mj=a;this.sb=b;this.Oh=!0;this.Pa=null;this.Zk=!1;this.ke=null;this.Hm=this.ij=this.hj=!1;this.Hf=null}g=th.prototype;
g.ta=function(){var a=document.createElement("div");a.id="blockly-"+(sh++).toString(36);this.Pa=a;a.className="blocklyMenuItem goog-menuitem "+(this.Oh?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.ij?"blocklyMenuItemSelected goog-option-selected ":"")+(this.Hm?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.Zk?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var b=document.createElement("div");b.className="blocklyMenuItemContent goog-menuitem-content";if(this.hj){var c=document.createElement("div");
c.className="blocklyMenuItemCheckbox goog-menuitem-checkbox";b.appendChild(c)}c=this.mj;typeof this.mj=="string"&&(c=document.createTextNode(this.mj));b.appendChild(c);a.appendChild(b);this.ke&&a.setAttribute("role",this.ke);Xe(a,"selected",this.hj&&this.ij||!1);Xe(a,"disabled",!this.Oh);return a};g.dispose=function(){this.Pa=null};g.Wa=function(){return this.Pa.id};g.Gg=function(a){this.ke=a};
g.ic=function(a){this.Hm=a;var b=this.Pa;b&&this.isEnabled()&&(a?(z(b,"blocklyMenuItemHighlight"),z(b,"goog-menuitem-highlight")):(hc(b,"blocklyMenuItemHighlight"),hc(b,"goog-menuitem-highlight")))};g.isEnabled=function(){return this.Oh};g.Ac=function(a){this.Oh=a};function uh(a,b,c){a.Hf=b.bind(c)};var P={Gh:null,lb:null,show:function(a,b,c){Qg(c);if(b.length){var d=P.Pp(b,c);P.lb=d;P.je(d,a,c);setTimeout(function(){d.focus()},1);P.Gh=null}else P.jb()},Pp:function(a,b){var c=new ph;c.Gg("menu");for(var d=0,e;e=a[d];d++){var f=new th(e.text);f.Zk=b;f.Gg("menuitem");c.fc.push(f);f.Ac(e.enabled);e.enabled&&uh(f,function(){P.jb();this.sa(this.scope)},e)}return c},je:function(a,b,c){var d=document.body;var e=document.documentElement;d=new r(d.scrollLeft||e.scrollLeft,d.scrollTop||e.scrollTop);d=
new ya(d.y,document.documentElement.clientHeight+d.y,d.x,document.documentElement.clientWidth+d.x);var f=new ya(b.clientY+d.top,b.clientY+d.top,b.clientX+d.left,b.clientX+d.left);P.$o(a);b=a.getSize();c&&(f.left+=b.width,f.right+=b.width,d.left+=b.width,d.right+=b.width);e=f.bottom+b.height>=d.bottom?f.top-b.height:f.bottom;c?(c=Math.max(f.right-b.width,d.left),c=Math.min(c,d.right-b.width)):(c=Math.min(f.left,d.right-b.width),c=Math.max(c,d.left));e<0?Sg(c,0,b.height+e):Sg(c,e,b.height);a.focus()},
$o:function(a){a.W(Lg);var b=a.Pa;z(b,"blocklyContextMenu");t(b,"contextmenu",null,Va);a.focus()},jb:function(){Mg==P&&Rg();P.Gh=null},dispose:function(){P.lb&&(P.lb.dispose(),P.lb=null)},Oq:function(a,b){return function(){C++;try{var c=sd(b,a.j),d=a.ka();d.x=a.o?d.x-ma:d.x+ma;d.y+=ma*2;c.moveBy(d.x,d.y)}finally{C--}C==0&&!c.T&&D(new (G("create"))(c));c.select()}}};function vh(){wh=this;this.Rb=Object.create(null)}var wh=null;vh.prototype.register=function(a){if(this.Rb[a.id])throw Error('Menu item with ID "'+a.id+'" is already registered.');this.Rb[a.id]=a};vh.prototype.unregister=function(a){if(!this.Rb[a])throw Error('Menu item with ID "'+a+'" not found.');delete this.Rb[a]};vh.prototype.getItem=function(a){return this.Rb[a]||null};
function xh(a,b){var c=[],d=wh.Rb;Object.keys(d).forEach(function(e){e=d[e];if(a==e.Eb){var f=e.ya(b);f!="hidden"&&(e={text:typeof e.hb=="function"?e.hb(b):e.hb,enabled:f=="enabled",sa:e.sa,scope:b,weight:e.weight},c.push(e))}});c.sort(function(e,f){return e.weight-f.weight});return c}new vh;function yh(a,b,c){yh.i.constructor.call(this,c);this.dn=a;this.an=b}H(yh,Pd);yh.prototype.type="selected";yh.prototype.R=function(){var a=yh.i.R.call(this);a.oldElementId=this.dn;a.newElementId=this.an;return a};yh.prototype.M=function(a){yh.i.M.call(this,a);this.dn=a.oldElementId;this.an=a.newElementId};B(Mc,"selected",yh);function zh(a,b){zh.i.constructor.call(this,a,b);this.pc=a.j.Fh[b];this.im=a.j.Fh[oa[b]];this.ge=new r(0,0);this.Vc=Ah;this.K=null}H(zh,Ye);var Ah=-1;g=zh.prototype;g.dispose=function(){zh.i.dispose.call(this);this.Vc==1&&Bh(this.pc,this,this.y)};g.v=function(){return zh.i.v.call(this)};g.F=function(){return zh.i.F.call(this)};function df(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}
function Ch(a,b){if(!a.m.j.qb()){var c=a.m.dc();if(!c.Bb){var d=!1;if(!c.Ja()){c=b.v().dc();if(!c.Ja())return;b=a;d=!0}var e=M==c;e||c.uh();var f=b.x+ma+Math.floor(Math.random()*10)-a.x,h=b.y+ma+Math.floor(Math.random()*10)-a.y;d&&(h=-h);c.o&&(f=b.x-ma-Math.floor(Math.random()*10)-a.x);c.moveBy(f,h);e||c.Cg()}}}
g.moveTo=function(a,b){if(this.Vc==Ah){var c=this.pc;c.xa.splice(Dh(c,b),0,this);this.Vc=1}else this.Vc==1&&(Bh(this.pc,this,this.y),c=this.pc,c.xa.splice(Dh(c,b),0,this));this.x=a;this.y=b};g.moveBy=function(a,b){this.moveTo(this.x+a,this.y+b)};function Eh(a,b){a.moveTo(b.x+a.ge.x,b.y+a.ge.y)}function Fh(a,b,c){a.ge.x=b;a.ge.y=c}
function Gh(a){var b=a.K.x-a.x,c=a.K.y-a.y;if(b!=0||c!=0){a=a.F();var d=a.O();if(!d)throw Error("block is not rendered.");d=Xa(d);a.O().setAttribute("transform","translate("+(d.x-b)+","+(d.y-c)+")");jg(a,-b,-c)}}
g.closest=function(a,b){var c=this.im;if(c.xa.length){var d=this.y,e=this.x;this.x=e+b.x;this.y=d+b.y;var f=Dh(c,this.y);b=null;for(var h=a,k,l=f-1;l>=0&&Math.abs(c.xa[l].y-this.y)<=a;)k=c.xa[l],af(this,k,!0,h)==0&&(b=k,h=df(k,this)),l--;for(;f<c.xa.length&&Math.abs(c.xa[f].y-this.y)<=a;)k=c.xa[f],af(this,k,!0,h)==0&&(b=k,h=df(k,this)),f++;this.x=e;this.y=d;a={connection:b,yi:h}}else a={connection:null,yi:a};return a};
function hh(a,b){b&&a.Vc==1||!b&&a.Vc==0||a.m.Bb||(b?(b=a.pc,b.xa.splice(Dh(b,a.y),0,a),a.Vc=1):(a.Vc==1&&Bh(a.pc,a,a.y),a.Vc=0))}function gh(a){hh(a,!0);var b=[];if(a.type!=1&&a.type!=3)return b;if(a=a.F()){if(a.isCollapsed()){var c=[];a.s&&c.push(a.s);a.A&&c.push(a.A);a.B&&c.push(a.B)}else c=a.cc(!0);for(var d=0;d<c.length;d++)b.push.apply(b,gh(c[d]));b.length||(b[0]=a)}return b}
g.Bk=function(a){var b=this.v();if(Xc){var c=Wc;setTimeout(function(){b.disposed||b.getParent()||(E(c),Ch(this,a),E(!1))}.bind(this),250)}};g.sj=function(a,b){zh.i.sj.call(this,a,b);a.I&&a.W();b.I&&(wd(b),b.W(),b.O().style.display="block")};g.Dg=function(){zh.i.Dg.call(this);var a=this.F();a&&(a.jg(),a.W(!1),a=this.v(),a.I&&a.W())};g.$m=function(a){return Hh(this.im,this,a)};
g.Dh=function(a){zh.i.Dh.call(this,a);var b=this.v();a=a.v();var c=b.I,d=a.I;c&&wd(b);d&&wd(a);c&&d&&(this.type==3||this.type==4?a.W():b.W());if(b=Md(b,a))b=b.isVisible(),a.O().style.display=b?"block":"none"};g.mn=function(){!this.isConnected()||this.K&&af(this,this.K,!1)==0||(Nd($e(this)?this.F():this.m),this.m.vb())};function Ih(){Ih.i.constructor.call(this)}H(Ih,Jg);g=Ih.prototype;g.next=function(){var a=this.$b;if(!a)return null;(a=Jh(this,a,this.On))&&Ig(this,a);return a};g.hd=function(){return this.next()};g.vd=function(){var a=this.$b;if(!a)return null;(a=Kh(this,a,this.On))&&Ig(this,a);return a};g.sd=function(){return this.vd()};function Jh(a,b,c){if(!b)return null;var d=b.hd()||b.next();if(c(d))return d;if(d)return Jh(a,d,c);b=Lh(a,b.sd());return c(b)?b:b?Jh(a,b,c):null}
function Kh(a,b,c){if(!b)return null;var d=b.vd();d=d?Mh(a,d):b.sd();return c(d)?d:d?Kh(a,d,c):null}g.On=function(a){var b=!1;a=a&&a.getType();if(a=="output"||a=="input"||a=="field"||a=="next"||a=="previous"||a=="workspace")b=!0;return b};function Lh(a,b){if(!b)return null;var c=b.next();return c?c:Lh(a,b.sd())}function Mh(a,b){if(!b.hd())return b;for(b=b.hd();b.next();)b=b.next();return Mh(a,b)}B(Lc,"basicCursor",Ih);function Q(a,b,c){this.l=y(Wb,{},null);this.l.Sg="";this.style=Nh(a.ua.C(),null);this.va=a.ua.Vm(this.l,this.style);this.Uk=this.I=!1;this.j=a;this.B=this.A=this.s=null;this.Wg=ib()&&!!a.ub;var d=this.va.Ea;d.Ub=this;Qe(d);Q.i.constructor.call(this,a,b,c);this.l.dataset?this.l.dataset.id=this.id:Ka&&this.l.setAttribute("data-id",this.id)}H(Q,pf);g=Q.prototype;g.height=0;g.width=0;g.Pi=null;
g.jg=function(){if(!this.j.I)throw TypeError("Workspace is headless.");for(var a=0,b;b=this.u[a];a++)b.ba();b=dg(this);for(a=0;a<b.length;a++)b[a].Uq();this.Na();$f(this.va,"blocklyDraggable",this.Ja());a=this.O();this.j.options.readOnly||this.hp||!a||t(a,"mousedown",this,this.rd);this.hp=!0;a.parentNode||this.j.ra.appendChild(a)};
g.select=function(){if(this.T&&this.getParent())this.getParent().select();else if(M!=this){var a=null;if(M){a=M.id;C++;try{ug(M)}finally{C--}}a=new (G("selected"))(a,this.id,this.j.id);D(a);M=this;this.uh()}};function ug(a){if(M==a){var b=new (G("selected"))(a.id,null,a.j.id);b.Ta=a.j.id;D(b);M=null;a.Cg()}}g.ce=null;g.Xb=null;g.Tn=null;function dg(a){var b=[];a.ce&&b.push(a.ce);a.Xb&&b.push(a.Xb);a.Tn&&b.push(a.Tn);return b}
g.Ei=function(a){var b=this.zc;if(a!=b){lc();Q.i.Ei.call(this,a);mc();var c=this.O();if(!this.j.Zj&&c){var d=this.ka();a?(a.O().appendChild(c),a=this.ka(),jg(this,a.x-d.x,a.y-d.y)):b&&(this.j.ra.appendChild(c),this.translate(d.x,d.y));this.Na()}}};g.ka=function(){var a=0,b=0,c=this.Wg?this.j.ub.qc:null,d=this.O();if(d){do{var e=Xa(d);a+=e.x;b+=e.y;this.Wg&&this.j.ub.qc.firstChild==d&&(e=this.j.ub.Nj(),a+=e.x,b+=e.y);d=d.parentNode}while(d&&d!=this.j.ra&&d!=c)}return new r(a,b)};
g.moveBy=function(a,b){if(this.zc)throw Error("Block has parent.");var c=C==0;if(c)var d=new (G("move"))(this);var e=this.ka();this.translate(e.x+a,e.y+b);jg(this,a,b);c&&(Ld(d),D(d));xd(this.j)};g.translate=function(a,b){this.O().setAttribute("transform","translate("+a+","+b+")")};g.moveTo=function(a){var b=this.ka();this.moveBy(a.x-b.x,a.y-b.y)};function gg(a,b){a.Wg?a.j.ub.tf(b.x,b.y):(a.l.Sg="translate("+b.x+","+b.y+")",a.l.setAttribute("transform",a.l.Sg+a.l.Kg))}
function Oh(a){if(a.j&&!a.j.qb()&&!a.getParent()&&!a.Bb){var b=a.j.Nb;if(b&&b.Vp){var c=b.ml,d=c/2,e=a.ka();b=Math.round((e.x-d)/c)*c+d-e.x;c=Math.round((e.y-d)/c)*c+d-e.y;b=Math.round(b);c=Math.round(c);b==0&&c==0||a.moveBy(b,c)}}}g.Se=function(){var a=this.ka(),b=fg(this);if(this.o){var c=a.x-b.width;var d=a.x}else c=a.x,d=a.x+b.width;return new ya(a.y,a.y+b.height,c,d)};g.qg=function(){this.va.Of=this.j.ua.C();for(var a=0,b;b=this.u[a];a++)b.qg()};
g.le=function(a){this.Id!=a&&(Q.i.le.call(this,a),a?this.I&&this.W():Ph(this))};function Ph(a){for(var b=a.isCollapsed(),c=0,d;d=a.u[c];c++)d.name!="_TEMP_COLLAPSED_INPUT"&&d.za(!b);if(b){d=dg(a);for(c=0;b=d[c];c++)b.za(!1);c=a.toString(30);(d=Bd(a,"_TEMP_COLLAPSED_FIELD"))?Gd(d,c):(a=d=Cd(a,"_TEMP_COLLAPSED_INPUT")||a.Fe(5,"_TEMP_COLLAPSED_INPUT"),c=new dh(c),fh(a,a.aa.length,c,"_TEMP_COLLAPSED_FIELD"))}else wd(a),a.Tk("_TEMP_COLLAPSED_INPUT")}
g.rd=function(a){var b=this.j&&this.j.ed(a);if(b){if(b.Ze)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");Eg(b,this);b.hc=a}};g.showHelp=function(){var a=typeof this.$e=="function"?this.$e():this.$e;a&&window.open(a)};g.Gi=function(a){if(this.j.options.readOnly||!this.contextMenu)var b=null;else b=xh("block",{block:this}),this.ap&&this.ap(b);b&&b.length&&(P.show(a,b,this.o),P.Gh=this)};
function jg(a,b,c){if(a.I){for(var d=a.cc(!1),e=0;e<d.length;e++)d[e].moveBy(b,c);d=dg(a);for(e=0;e<d.length;e++)d[e].Xo();for(e=0;e<a.Hc.length;e++)jg(a.Hc[e],b,c)}}g.ne=function(a){if(a){var b=this.O();b.Sg="";b.Kg="";ef=ef.concat(this.cc(!0));z(this.l,"blocklyDragging")}else ef=[],hc(this.l,"blocklyDragging");for(b=0;b<this.Hc.length;b++)this.Hc[b].ne(a)};g.bl=function(a){Q.i.bl.call(this,a);$f(this.va,"blocklyDraggable",a)};g.al=function(a){Q.i.al.call(this,a);a=dg(this);for(var b=0;b<a.length;b++)Ug(a[b])};
g.il=function(a){Q.i.il.call(this,a);this.Na()};g.Cn=function(a){this.df!=a&&(this.df=a)&&(this.Ci(this.j.ua.C().Ao),$f(this.va,"blocklyInsertionMarker",!0))};g.O=function(){return this.l};
g.dispose=function(a,b){if(this.j){Oe=Ne=null;Ve();Ue(this.va.Ea);lc();var c=this.j;M==this&&(ug(this),Qh(this.j));P.Gh==this&&P.jb();if(b&&this.I){Nd(this,a);b=this.j;var d=this.O();b.tb.play("delete");var e=kg(b,d);d=d.cloneNode(!0);d.gq=e.x;d.hq=e.y;d.setAttribute("transform","translate("+e.x+","+e.y+")");K(b).appendChild(d);d.Zl=d.getBBox();Qf(d,b.o,new Date,b.scale)}this.I=!1;if(this.Pi){for(var f in this.Pi)clearTimeout(this.Pi[f]);this.Pi=null}f=dg(this);for(b=0;b<f.length;b++)f[b].dispose();
Q.i.dispose.call(this,!!a);A(this.l);xd(c);this.l=null;mc()}};g.Na=function(){this.va.Na(this);for(var a=dg(this),b=0;b<a.length;b++)a[b].Na();for(a=0;b=this.u[a];a++)for(var c=0,d;d=b.aa[c];c++)d.Na()};function wd(a){var b=ld(a,!1);a.Na();if(!a.isCollapsed()){a=0;for(var c;c=b[a];a++)c.I&&wd(c)}}g.lp=function(){return this.Xb};
g.mf=function(a){if(!ka.Comment)throw Error("Missing require for Blockly.Comment");this.Yb.text!=a&&(Q.i.mf.call(this,a),a=a!=null,!!this.Xb==a?this.Xb.rr():(a?this.Xb=new ka.Comment(this):(this.Xb.dispose(),this.Xb=null),this.I&&(this.W(),this.vb())))};g.Ac=function(a){this.isEnabled()!=a&&(Q.i.Ac.call(this,a),this.I&&!kh(this)&&wd(this))};g.ic=function(a){this.I&&this.va.Ln(a)};g.uh=function(){$f(this.va,"blocklySelected",!0)};g.Cg=function(){$f(this.va,"blocklySelected",!1)};g.Lj=function(){return this.style.Jd};
g.Ci=function(a){Q.i.Ci.call(this,a);a=Rh(this.j.ua.C(),this.Jb);this.va.pe(a.style);this.style=a.style;this.Lg=a.name;this.Na()};g.pe=function(a){var b=Nh(this.j.ua.C(),a);this.Lg=a;if(b)this.uc=b.uc,this.va.pe(b),this.Jb=b.Jd,this.style=b,this.Na();else throw Error("Invalid style name: "+a);};function eg(a){do{var b=a.O(),c=b.parentNode,d=c.childNodes;d[d.length-1]!==b&&c.appendChild(b);a=a.getParent()}while(a)}g.hl=function(a,b){Q.i.hl.call(this,a,b);this.I&&(this.W(),this.vb())};
g.cl=function(a,b){Q.i.cl.call(this,a,b);this.I&&(this.W(),this.vb())};g.dl=function(a,b){Q.i.dl.call(this,a,b);this.I&&(this.W(),this.vb())};g.oe=function(a){Q.i.oe.call(this,a);this.I&&(this.W(),this.vb())};g.Tk=function(a,b){a=Q.i.Tk.call(this,a,b);this.I&&(this.W(),this.vb());return a};g.Fe=function(a,b){a=Q.i.Fe.call(this,a,b);this.I&&(this.W(),this.vb());return a};
function vd(a,b){a.B&&hh(a.B,b);a.s&&hh(a.s,b);if(a.A){hh(a.A,b);var c=a.A.F();c&&vd(c,b)}if(!a.Id)for(c=0;c<a.u.length;c++){var d=a.u[c].connection;d&&(hh(d,b),(d=d.F())&&vd(d,b))}}g.cc=function(a){var b=[];if(a||this.I)if(this.s&&b.push(this.s),this.B&&b.push(this.B),this.A&&b.push(this.A),a||!this.Id){a=0;for(var c;c=this.u[a];a++)c.connection&&b.push(c.connection)}return b};g.ei=function(a){return Q.i.ei.call(this,a)};g.Mj=function(a,b){return Q.i.Mj.call(this,a,b)};
g.pg=function(a){return new zh(this,a)};g.vb=function(){if(this.j&&!this.j.qb()){var a=this.dc();if(!a.Bb)for(var b=this.cc(!1),c=0,d;d=b[c];c++){d.isConnected()&&$e(d)&&d.F().vb();for(var e=d.$m(ma),f=0,h;h=e[f];f++)d.isConnected()&&h.isConnected()||h.v().dc()!=a&&($e(d)?Ch(h,d):Ch(d,h))}}};function lg(a){var b=Wc;setTimeout(function(){E(b);Oh(a);E(!1)},125);setTimeout(function(){E(b);a.vb();E(!1)},250)}g.getParent=function(){return Q.i.getParent.call(this)};g.dc=function(){return Q.i.dc.call(this)};
g.W=function(a){if(!this.Uk){this.Uk=!0;try{this.I=!0;lc();this.isCollapsed()&&Ph(this);this.j.ua.W(this);var b=this.ka();this.B&&Eh(this.B,b);this.s&&Eh(this.s,b);for(var c=0;c<this.u.length;c++){var d=this.u[c].connection;d&&(Eh(d,b),d.isConnected()&&Gh(d))}this.A&&(Eh(this.A,b),this.A.isConnected()&&Gh(this.A));if(a!==!1){var e=this.getParent();e?e.W(!0):xd(this.j)}mc();this.xl()}finally{this.Uk=!1}}};g.xl=function(){this.j.og&&this.va.Sf&&this.j.ag().ac();this.j.og&&this.va.kk&&this.j.dg("local_marker_1").ac()};
g.Tc=function(a){this.va.Tc(a)};g.yd=function(a){this.va.yd(a)};function fg(a){var b=a.height,c=a.width,d=nb(a);d&&(d=fg(d),a=a.j.ua.C().Ui,b+=d.height-a,c=Math.max(c,d.width));return{height:b,width:c}};function Sh(){this.xa=[]}function Th(a,b,c){if(!a.xa.length)return-1;var d=Dh(a,c);if(d>=a.xa.length)return-1;c=b.y;for(var e=d;e>=0&&a.xa[e].y==c;){if(a.xa[e]==b)return e;e--}for(e=d;e<a.xa.length&&a.xa[e].y==c;){if(a.xa[e]==b)return e;e++}return-1}function Dh(a,b){if(!a.xa.length)return 0;for(var c=0,d=a.xa.length;c<d;){var e=Math.floor((c+d)/2);if(a.xa[e].y<b)c=e+1;else if(a.xa[e].y>b)d=e;else{c=e;break}}return c}
function Bh(a,b,c){b=Th(a,b,c);if(b==-1)throw Error("Unable to find connection in connectionDB.");a.xa.splice(b,1)}function Hh(a,b,c){function d(m){var n=f-e[m].x,v=h-e[m].y;Math.sqrt(n*n+v*v)<=c&&l.push(e[m]);return v<c}var e=a.xa,f=b.x,h=b.y;a=0;for(var k=b=e.length-2;a<k;)e[k].y<h?a=k:b=k,k=Math.floor((a+b)/2);var l=[];b=a=k;if(e.length){for(;a>=0&&d(a);)a--;do b++;while(b<e.length&&d(b))}return l};function Uh(a,b){Uh.i.constructor.call(this,b);this.Jn=a}H(Uh,Pd);Uh.prototype.type="theme_change";Uh.prototype.R=function(){var a=Uh.i.R.call(this);a.themeName=this.Jn;return a};Uh.prototype.M=function(a){Uh.i.M.call(this,a);this.Jn=a.themeName};B(Mc,"theme_change",Uh);function Vh(a,b,c,d,e){Vh.i.constructor.call(this,d);this.Wb=a;this.Vb=b;this.scale=c;this.vg=e}H(Vh,Pd);Vh.prototype.type="viewport_change";Vh.prototype.R=function(){var a=Vh.i.R.call(this);a.viewTop=this.Wb;a.viewLeft=this.Vb;a.scale=this.scale;a.oldScale=this.vg;return a};Vh.prototype.M=function(a){Vh.i.M.call(this,a);this.Wb=a.viewTop;this.Vb=a.viewLeft;this.scale=a.scale;this.vg=a.oldScale};B(Mc,"viewport_change",Vh);function Wh(a){this.g=a}function Xh(a){var b=0,c=0;a&&(b=a.eg(),c=a.Tj);return new Ga(b,c)}function Yh(a){var b=Xh(Zh(a.g,!0));return{width:b.width,height:b.height,position:a.g.Gb}}function $h(a){var b=Xh(a.g.na);return{width:b.width,height:b.height,position:a.g.Gb}}function ai(a){var b=0,c=$h(a),d=Yh(a),e=!!a.g.na;a=!!Zh(a.g,!0);var f=(e?c.position:d.position)==2;e&&f?b=c.width:a&&f&&(b=d.width);return{top:0,left:b}}
function bi(a,b){b=b?a.g.scale:1;var c=ci(a.g),d=$h(a),e=Yh(a),f=a.g.na?d.position:e.position;if(a.g.na){if(f==2||f==3)c.width-=d.width}else!Zh(a.g,!0)||f!=2&&f!=3||(c.width-=e.width);return{height:c.height/b,width:c.width/b,top:-a.g.scrollY/b,left:-a.g.scrollX/b}}
Wh.prototype.Rh=function(){var a=this.g.scale;var b=[].concat(this.g.Rg);if(b.length){for(var c=b[0].Se(),d=1;d<b.length;d++){var e=b[d];e.Cb&&e.Cb()||(e=e.Se(),e.top<c.top&&(c.top=e.top),e.bottom>c.bottom&&(c.bottom=e.bottom),e.left<c.left&&(c.left=e.left),e.right>c.right&&(c.right=e.right))}b=c}else b=new ya(0,0,0,0);return{height:(b.bottom-b.top)*a,width:(b.right-b.left)*a,top:b.top*a,left:b.left*a}};
Wh.prototype.Od=function(a,b,c){a=a?this.g.scale:1;var d=b||bi(this,!1);c=c||this.Rh();if(sg(this.g)&&tg(this.g))b={};else{b=sg(this.g);var e=tg(this.g),f=d||bi(this,!1);var h={};e||(h.top=f.top,h.bottom=f.top+f.height);b||(h.left=f.left,h.right=f.left+f.width);b=h}h=c.top+c.height;e=c.left+c.width;f=d.width;var k=d.height;var l=f/2,m=k/2;d=Math.min(c.top-m,h-k);h=Math.max(h+m,c.top+k);k=Math.min(c.left-l,e-f);c=Math.max(e+l,c.left+f);d=b.top!==void 0?b.top:d;e=b.left!==void 0?b.left:k;return{top:d/
a,left:e/a,width:((b.right!==void 0?b.right:c)-e)/a,height:((b.bottom!==void 0?b.bottom:h)-d)/a}};Wh.prototype.zb=function(){var a=$h(this),b=Yh(this),c=ci(this.g),d=ai(this),e=bi(this),f=this.Rh(),h=this.Od(!1,e,f);return{Qq:f.height,Tq:f.width,Sq:f.top,Rq:f.left,scrollHeight:h.height,scrollWidth:h.width,scrollTop:h.top,scrollLeft:h.left,Sa:e.height,Ka:e.width,Wb:e.top,Vb:e.left,eb:d.top,Ua:d.left,Gn:c.height,Hn:c.width,pr:a.width,nr:a.height,Gb:a.position,Xq:b.width,Wq:b.height}};
B(Sc,"default",Wh);function di(a,b){this.L=b;di.i.constructor.call(this,a)}H(di,Wh);di.prototype.Rh=function(){try{var a=this.g.ra.getBBox()}catch(c){a={height:0,y:0,width:0,x:0}}var b=this.g.scale;return{height:a.height*b,width:a.width*b,top:a.y*b,left:a.x*b}};di.prototype.Od=function(a,b,c){b=c||this.Rh();c=this.L.Be*this.g.scale;a=a?this.g.scale:1;return{height:(b.height+2*c)/a,width:(b.width+b.left+c)/a,top:0,left:0}};function ei(a){var b=de;this.g=a;this.Pg=b;this.Mg=[];this.$c=Object.create(null)}g=ei.prototype;g.Lc=function(){return this.Pg};g.Ig=function(a){var b=this.Pg;this.Pg=a;if(a=fi(this.g))b&&hc(a,b.bc()),z(a,this.Pg.bc());for(b=0;a=this.Mg[b];b++)gi(a);Ge()};g.subscribe=function(a,b,c){this.$c[b]||(this.$c[b]=[]);this.$c[b].push({element:a,propertyName:c});a.style[c]=""};
g.unsubscribe=function(a){if(a)for(var b=Object.keys(this.$c),c=0,d;d=b[c];c++){for(var e=this.$c[d],f=e.length-1;f>=0;f--)e[f].element===a&&e.splice(f,1);this.$c[d].length||delete this.$c[d]}};g.dispose=function(){this.$c=this.Mg=this.Pg=null};function hi(a,b){hi.i.constructor.call(this,a,b);this.bi=!1;this.wb=Object.create(null);this.Dn=this.zg=0;this.Nm=this.Dk=null}H(hi,vg);g=hi.prototype;g.tj=function(a){this.Nm=this.Aa.options.oa&&this.Aa.options.oa.rn;hi.i.tj.call(this,a);!this.Zh&&Ab(a)&&ii(this,a)};g.$l=function(a){this.Dk=t(document,"mousedown",null,this.up.bind(this),!0);this.ri=t(document,"mousemove",null,this.Xe.bind(this),!0);this.si=t(document,"mouseup",null,this.Uh.bind(this),!0);a.preventDefault();a.stopPropagation()};
g.up=function(a){!this.qb()&&Ab(a)&&(ii(this,a),this.bi&&ub())};g.Xe=function(a){if(this.qb())zb(a)&&!yb(a)||hi.i.Xe.call(this,a);else if(this.bi){if(Ab(a)){this.wb[wb(a)]=ji(this,a);var b=Object.keys(this.wb);if(this.Nm&&b.length===2){b=Object.keys(this.wb);b=va(this.wb[b[0]],this.wb[b[1]])/this.Dn;if(this.zg>0&&this.zg<Infinity){var c=b-this.zg;c=c>0?c*5:c*6;var d=this.Aa,e=cb(a,K(d),De(d));d.zoom(e.x,e.y,c)}this.zg=b;a.preventDefault()}else hi.i.Xe.call(this,a)}ub()}else hi.i.Xe.call(this,a)};
g.Uh=function(a){if(Ab(a)&&!this.qb()){var b=wb(a);this.wb[b]&&delete this.wb[b];Object.keys(this.wb).length<2&&(this.wb=Object.create(null),this.zg=0)}!this.bi||this.qb()?zb(a)&&!yb(a)||hi.i.Uh.call(this,a):(a.preventDefault(),a.stopPropagation(),this.dispose())};g.dispose=function(){hi.i.dispose.call(this);this.Dk&&u(this.Dk)};function ii(a,b){a.wb[wb(b)]=ji(a,b);var c=Object.keys(a.wb);c.length==2&&(a.Dn=va(a.wb[c[0]],a.wb[c[1]]),a.bi=!0,b.preventDefault())}
function ji(a,b){return a.Aa?new r(b.changedTouches?b.changedTouches[0].pageX:b.pageX,b.changedTouches?b.changedTouches[0].pageY:b.pageY):null};function ki(a){this.Lk=a;this.Ff=Object.create(null)}g=ki.prototype;g.ck=null;g.dispose=function(){this.Ff=this.Lk=null};g.load=function(a,b){if(a.length){try{var c=new p.Audio}catch(k){return}for(var d,e=0;e<a.length;e++){var f=a[e],h=f.match(/\.(\w+)$/);if(h&&c.canPlayType("audio/"+h[1])){d=new p.Audio(f);break}}d&&d.play&&(this.Ff[b]=d)}};g.preload=function(){for(var a in this.Ff){var b=this.Ff[a];b.volume=.01;var c=b.play();c!==void 0?c.then(b.pause).catch(function(){}):b.pause();if(Pa||Ra)break}};
g.play=function(a,b){var c=this.Ff[a];c?(a=new Date,this.ck!=null&&a-this.ck<100||(this.ck=a,c=Pa||Oa?c:c.cloneNode(),c.volume=b===void 0?1:b,c.play())):this.Lk&&this.Lk.tb.play(a,b)};
function li(a,b,c){li.i.constructor.call(this,a);this.Db=new (Vc(Sc,a,!0))(this);this.zb=a.zb||this.Db.zb.bind(this.Db);this.Fg=a.Fg||mi;this.Zb=new Db;var d=[];d[1]=new Sh;d[2]=new Sh;d[3]=new Sh;d[4]=new Sh;this.Fh=d;b&&(this.ub=b);c&&(this.ve=c);this.Oi=!!this.ve&&ib();this.Vh=[];this.tb=new ki(a.rb);this.Nb=this.options.Qj?new ae(this.options.Qj,a.Am):null;this.ec=new Kg(this);this.ul=Object.create(null);this.Ij=Object.create(null);ni&&oi&&pi(this,"VARIABLE",oi);qi&&ri&&(pi(this,"PROCEDURE",ri),
uf(this,si));this.Ha=this.options.rb?this.options.rb.Ha:new ei(this);this.Ha.Mg.push(this);c=this.options.Wk||"geras";a=this.Lc();b=this.options.Xk;c=new (Uc(Oc,c))(c);c.ba(a,b);this.ua=c;this.gj=null;this.og=!1;this.Rg=[];this.uj=[];this.fj=new Ga(0,0)}H(li,td);g=li.prototype;g.Bi=null;g.I=!0;g.Oc=!0;g.kd=!1;g.ci=!1;g.Yk=!0;g.scrollX=0;g.scrollY=0;g.scale=1;g.xk=1;g.ln=0;g.gn=0;g.uf=null;g.X=null;g.L=null;g.na=null;g.Va=null;g.ub=null;g.ve=null;g.Oi=!1;g.Yh=!1;g.Xj=null;g.Rm=null;g.P=null;g.Mm=null;
g.Yj=!0;g.Tc=function(a){this.ec.Tc(a)};g.yd=function(a){this.ec.yd(a)};g.dg=function(a){return this.ec?this.ec.dg(a):null};g.ag=function(){return this.ec?this.ec.ag():null};g.Lc=function(){return this.Ha.Lc()};g.Ig=function(a){a||(a=de);this.Ha.Ig(a)};function gi(a){a.l&&a.ua.Sk(a.l,a.Lc());ti(gf(a).filter(function(b){return!!b.Lg}));ui(a);a.na&&gi(a.na);a.isVisible()&&a.za(!0);a=new (G("theme_change"))(a.Lc().name,a.id);D(a)}
function ti(a){for(var b=0,c;c=a[b];b++){var d=c.Lg;d&&(c.pe(d),c.ce&&c.ce.qr())}}function De(a){if(a.Yj){var b=K(a).getScreenCTM();b&&(a.Mm=b.inverse(),a.Yj=!1)}return a.Mm}g.Vg=function(){this.Yj=!0};g.isVisible=function(){return this.Oc};function kg(a,b){var c=0,d=0,e=1;if(a.ra.contains(b)||a.Cc.contains(b))e=a.scale;do{var f=Xa(b);if(b==a.ra||b==a.Cc)e=1;c+=f.x*e;d+=f.y*e;b=b.parentNode}while(b&&b!=K(a));return new r(c,d)}function ci(a){a=a.fj;return new Ga(a.width,a.height)}
function fi(a){if(!a.Xj)for(var b=a.l;b;){if((" "+(b.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!=-1){a.Xj=b;break}b=b.parentNode}return a.Xj}
g.ta=function(a){this.l=y(Wb,{"class":"blocklyWorkspace"},null);a&&(this.Qa=y(ac,{height:"100%",width:"100%","class":a},this.l),a=="blocklyMainBackground"&&this.Nb?this.Qa.style.fill="url(#"+this.Nb.We.id+")":this.Ha.subscribe(this.Qa,"workspaceBackgroundColour","fill"));this.ra=y(Wb,{"class":"blocklyBlockCanvas"},this.l);this.Cc=y(Wb,{"class":"blocklyBubbleCanvas"},this.l);this.kd||(t(this.l,"mousedown",this,this.rd,!1,!0),t(this.l,"wheel",this,this.Op));this.options.Bm&&(this.na=new (Vc(Pc,this.options,
!0))(this));this.Nb&&this.Nb.update(this.scale);vi(this);var b=Vc(Lc,this.options);b&&(a=this.ec,b=new b,a.Kb&&a.Kb.Lb&&a.Kb.Lb.dispose(),a.Kb=b,a.Kb&&(b=a.Kb,b=new wi(a.g,a.g.ua.C(),b),a.Kb.Lb=b,a.Tc(a.Kb.Lb.ta())));this.ua.ta(this.l,this.Lc());return this.l};
g.dispose=function(){this.I=!1;this.Va&&this.Va.cancel();this.l&&(A(this.l),this.l=null);this.Cc=this.ra=null;this.na&&(this.na.dispose(),this.na=null);this.L&&(this.L.dispose(),this.L=null);this.uf&&(this.uf.dispose(),this.uf=null);this.X&&(this.X.dispose(),this.X=null);this.Yg&&(this.Yg.dispose(),this.Yg=null);this.tb&&(this.tb.dispose(),this.tb=null);this.Nb&&(this.Nb.dispose(),this.Nb=null);this.ua.dispose();this.ec&&(this.ec.dispose(),this.ec=null);li.i.dispose.call(this);if(this.Ha){var a=this.Ha,
b=a.Mg.indexOf(this);if(b<0)throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");a.Mg.splice(b,1);this.Ha.unsubscribe(this.Qa);this.options.rb||(this.Ha.dispose(),this.Ha=null)}this.Ij=this.ul=this.Fh=null;this.options.rb||(a=K(this))&&a.parentNode&&A(a.parentNode);this.Bi&&(u(this.Bi),this.Bi=null)};g.qk=function(a,b){return new Q(this,a,b)};function Zh(a,b){return a.L||b?a.L:a.na?Zh(a.na):null}function xd(a){a.Yk&&a.I&&(a.X&&a.X.resize(),a.Vg())}
g.resize=function(){this.na&&this.na.position();this.L&&this.L.position();var a=Ib(this.Zb,Kb);var b=this.Db;b={Sn:bi(b),sh:ai(b),cq:$h(b)};for(var c=[],d=0,e;e=a[d];d++)e.position(b,c),(e=e.Se())&&c.push(e);this.X&&this.X.resize();this.Vg();vi(this)};function yg(a){var b=document.documentElement;var c=window;b=Ka&&c.pageYOffset!=b.scrollTop?new r(b.scrollLeft,b.scrollTop):new r(c.pageXOffset||b.scrollLeft,c.pageYOffset||b.scrollTop);ua(a.Rm,b)||(a.Rm=b,a.Vg(),vi(a))}
function xi(a,b,c){K(a);b&&(a.fj.width=b);c&&(a.fj.height=c)}function K(a){if(!a.gj)for(var b=a.l;b;){if(b.tagName=="svg"){a.gj=b;break}b=b.parentNode}return a.gj}function ne(a){if(C==0){var b=a.scale,c=-a.scrollY,d=-a.scrollX;if(!(b==a.xk&&Math.abs(c-a.ln)<1&&Math.abs(d-a.gn)<1)){var e=new (G("viewport_change"))(c,d,b,a.id,a.xk);a.xk=b;a.ln=c;a.gn=d;D(e)}}}
g.translate=function(a,b){if(this.Oi&&this.Yh)this.ve.tf(a,b);else{var c="translate("+a+","+b+") scale("+this.scale+")";this.ra.setAttribute("transform",c);this.Cc.setAttribute("transform",c)}if(this.ub){c=this.ub;var d=this.scale;c.xd=d;var e=a.toFixed(0),f=b.toFixed(0);c.dm.x=parseInt(e,10);c.dm.y=parseInt(f,10);c.qc.setAttribute("transform","translate("+e+","+f+") scale("+d+")")}this.Nb&&this.Nb.moveTo(a,b);ne(this)};
function Fe(a){if(a.Oi){a.Yh=!1;var b=a.ve.Nj();a.ve.Bh(a.l);b="translate("+b.x+","+b.y+") scale("+a.scale+")";a.ra.setAttribute("transform",b);a.Cc.setAttribute("transform",b)}}
function Ee(a){if(a.Oi&&!a.Yh){a.Yh=!0;var b=a.ra.previousSibling,c=parseInt(K(a).getAttribute("width"),10),d=parseInt(K(a).getAttribute("height"),10),e=Xa(a.ra),f=a.ve,h=a.ra,k=a.Cc,l=a.scale;if(f.ea.childNodes.length)throw Error("Already dragging a block.");f.Qk=b;h.setAttribute("transform","translate(0, 0) scale("+l+")");k.setAttribute("transform","translate(0, 0) scale("+l+")");f.ea.setAttribute("width",c);f.ea.setAttribute("height",d);f.ea.appendChild(h);f.ea.appendChild(k);f.ea.style.display=
"block";a.ve.tf(e.x,e.y)}}g.eg=function(){var a=this.zb();return a?a.Ka/this.scale:0};g.za=function(a){this.Oc=a;if(this.l)if(this.X&&this.X.me(a),Zh(this)&&Zh(this).me(a),K(this).style.display=a?"block":"none",this.na&&this.na.za(a),a){a=gf(this);for(var b=a.length-1;b>=0;b--)a[b].qg();this.W();this.na&&this.na.position()}else Ge(!0)};g.W=function(){for(var a=gf(this),b=a.length-1;b>=0;b--)a[b].W(!1);if(this.Va)for(a=this.Va.Te(),b=0;b<a.length;b++)a[b].W(!1);b=this.ec;b.g.og&&b.Jc&&b.g.ag().ac()};
function yi(a){for(var b=J,c=0,d;d=b.Vh[c];c++)d.ic(!1);b.Vh.length=0;if(d=a?b.yb(a):null)b.Vh.indexOf(d)==-1&&b.Vh.push(d),d.ic(!0)}
function zi(a){var b=Ai;if(a.I&&b.tagName&&!(b.getElementsByTagName("block").length>=qf(a)))if(a.Va&&a.Va.cancel(),b.tagName.toLowerCase()=="comment"){C++;try{var c=ka.Lq.Jj(b),d=parseInt(b.getAttribute("x"),10),e=parseInt(b.getAttribute("y"),10);isNaN(d)||isNaN(e)||(a.o&&(d=-d),c.moveBy(d+50,e+50))}finally{C--}C==0&&ka.Kq.Vq(c);c.select()}else{C++;try{var f=sd(b,a),h=parseInt(b.getAttribute("x"),10),k=parseInt(b.getAttribute("y"),10);if(!isNaN(h)&&!isNaN(k)){a.o&&(h=-h);do{b=!1;var l=gf(a);c=0;for(var m;m=
l[c];c++){var n=m.ka();if(Math.abs(h-n.x)<=1&&Math.abs(k-n.y)<=1){b=!0;break}}if(!b){var v=f.cc(!1);c=0;for(var w;w=v[c];c++)if(w.closest(ma,new r(h,k)).connection){b=!0;break}}b&&(h=a.o?h-ma:h+ma,k+=ma*2)}while(b);f.moveBy(h,k)}}finally{C--}C==0&&!f.T&&D(new (G("create"))(f));f.select()}}function ui(a){(a=a.kd?a.P:a)&&!a.Va&&a.na&&Zh(a.na)&&a.na.ir()}g.jf=function(a,b){li.i.jf.call(this,a,b);ui(this)};g.Pe=function(a){li.i.Pe.call(this,a);ui(this)};
g.dd=function(a,b,c){a=li.i.dd.call(this,a,b,c);ui(this);return a};function vi(a){var b=Ib(a.Zb,Lb);a.uj=[];for(var c=0,d;d=b[c];c++){var e=d.wm();e&&a.uj.push({component:d,Vo:e})}}function hg(a,b){for(var c=0,d;d=a.uj[c];c++)if(d.Vo.contains(b.clientX,b.clientY))return d.component;return null}g.rd=function(a){var b=this.ed(a);b&&Cg(b,a,this)};g.Ii=function(a){a=cb(a,K(this),De(this));a.x/=this.scale;a.y/=this.scale};g.qb=function(){return this.Va!=null&&this.Va.qb()};
g.Ja=function(){return this.options.Ya&&!!this.options.Ya.scrollbars||this.options.Ya&&this.options.Ya.vf||this.options.Ya&&this.options.Ya.Kc||this.options.oa&&this.options.oa.vf||this.options.oa&&this.options.oa.rn};function sg(a){var b=!!a.X;return a.Ja()&&(!b||b&&!!a.X.la)}function tg(a){var b=!!a.X;return a.Ja()&&(!b||b&&!!a.X.Y)}
g.Op=function(a){if(Gg())a.preventDefault(),a.stopPropagation();else{var b=this.options.oa&&this.options.oa.vf,c=this.options.Ya&&this.options.Ya.vf;if(b||c){var d=db(a);!b||!a.ctrlKey&&c?(b=this.scrollX-d.x,c=this.scrollY-d.y,a.shiftKey&&!d.x&&(b=this.scrollX-d.y,c=this.scrollY),this.scroll(b,c)):(d=-d.y/50,b=cb(a,K(this),De(this)),this.zoom(b.x,b.y,d));a.preventDefault()}}};g.Gi=function(a){if(!this.options.readOnly&&!this.kd){var b=xh("workspace",{j:this});this.Yo&&this.Yo(b,a);P.show(a,b,this.o)}};
function Gc(a){if(a.options.rb)Gc(a.options.rb);else{Hc=a;document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{K(a).focus({preventScroll:!0})}catch(b){try{K(a).parentNode.setActive()}catch(c){K(a).parentNode.focus({preventScroll:!0})}}}}
g.zoom=function(a,b,c){c=Math.pow(this.options.oa.zn,c);var d=this.scale*c;if(this.scale!=d){d>this.options.oa.sg?c=this.options.oa.sg/this.scale:d<this.options.oa.tg&&(c=this.options.oa.tg/this.scale);var e=this.ra.getCTM(),f=K(this).createSVGPoint();f.x=a;f.y=b;f=f.matrixTransform(e.inverse());a=f.x;b=f.y;e=e.translate(a*(1-c),b*(1-c)).scale(c);this.scrollX=e.e;this.scrollY=e.f;this.setScale(d)}};
function Bi(a,b){var c=a.zb();if(a.L){var d=c.Hn?c.Hn/2:0;c=c.Gn?c.Gn/2:0}else d=c.Ka/2+c.Ua,c=c.Sa/2+c.eb;a.zoom(d,c,b)}g.gp=function(){hc(this.ra,"blocklyCanvasTransitioning");hc(this.Cc,"blocklyCanvasTransitioning")};
g.setScale=function(a){this.options.oa.sg&&a>this.options.oa.sg?a=this.options.oa.sg:this.options.oa.tg&&a<this.options.oa.tg&&(a=this.options.oa.tg);this.scale=a;Ge(!1);this.L&&(this.L.Rk(),vi(this));this.Nb&&this.Nb.update(this.scale);a=this.zb();this.scrollX-=a.Ua;this.scrollY-=a.eb;a.Vb+=a.Ua;a.Wb+=a.eb;this.scroll(this.scrollX,this.scrollY);if(this.X)if(this.L){var b=this.X;b.la&&ye(b.la,a);b.Y&&Ae(b.Y,a)}else b=this.X,b.la&&ze(b.la,a),b.Y&&Be(b.Y,a)};
g.scroll=function(a,b){Ge(!0);var c=this.zb();a=Math.min(a,-c.scrollLeft);b=Math.min(b,-c.scrollTop);var d=c.scrollTop+Math.max(0,c.scrollHeight-c.Sa);a=Math.max(a,-(c.scrollLeft+Math.max(0,c.scrollWidth-c.Ka)));b=Math.max(b,-d);this.scrollX=a;this.scrollY=b;this.X&&this.X.set(-(a+c.scrollLeft),-(b+c.scrollTop),!1);a+=c.Ua;b+=c.eb;this.translate(a,b)};
function mi(a){var b=this.zb();typeof a.x=="number"&&(this.scrollX=-(b.scrollLeft+(b.scrollWidth-b.Ka)*a.x));typeof a.y=="number"&&(this.scrollY=-(b.scrollTop+(b.scrollHeight-b.Sa)*a.y));this.translate(this.scrollX+b.Ua,this.scrollY+b.eb)}g.yb=function(a){return li.i.yb.call(this,a)};g.Ca=function(a){return li.i.Ca.call(this,a)};g.vh=function(a){this.Rg.push(a);li.i.vh.call(this,a)};g.Ai=function(a){kb(this.Rg,a);li.i.Ai.call(this,a)};g.$a=function(a){var b=!this.Yk&&a;this.Yk=a;b&&xd(this)};
g.clear=function(){this.$a(!1);li.i.clear.call(this);this.Rg=[];this.$a(!0)};function Ci(a,b){if(typeof b!="function")throw TypeError("Button callbacks must be functions.");a.Ij.CREATE_VARIABLE=b}function Di(a,b){return(a=a.Ij[b])?a:null}function pi(a,b,c){if(typeof c!="function")throw TypeError("Toolbox category callbacks must be functions.");a.ul[b]=c}
g.ed=function(a){var b=a.type=="mousedown"||a.type=="touchstart"||a.type=="pointerdown",c=this.Va;return c?b&&c.Ze?(console.warn("Tried to start the same gesture twice."),c.cancel(),null):c:b?this.Va=new hi(a,this):null};function Qh(a){a.Va&&a.Va.cancel()};function Ei(a){var b="blockly";typeof b=="string"&&(b=document.getElementById(b)||document.querySelector(b));if(!document.contains(b))throw Error("Error: container is not in current document");a=new je(a||{});var c=document.createElement("div");c.className="injectionDiv";c.tabIndex=0;Xe(c,"label",q.WORKSPACE_ARIA_LABEL);b.appendChild(c);b=Fi(c,a);var d=new Vd(c),e=new wf(c),f=Gi(b,a,d,e);Hi(f);Hc=f;Ii(f);c.addEventListener("focusin",function(){Hc=f});return f}
function Fi(a,b){a.setAttribute("dir","LTR");var c=b.vp,d=b.ie;if(!Xd){Xd=!0;var e=$d.join("\n");$d.length=0;c&&(c=d.replace(/[\\/]$/,""),e=e.replace(/<<<PATH>>>/g,c),c=document.createElement("style"),c.id="blockly-common-style",c.appendChild(document.createTextNode(e)),document.head.insertBefore(c,document.head.firstChild))}a=y(bc,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklySvg",tabindex:"0"},
a);c=y(Qb,{},a);e=b.Am;c=y($b,{id:"blocklyGridPattern"+String(Math.random()).substring(2),patternUnits:"userSpaceOnUse"},c);e.length>0&&e.spacing>0?(y(Yb,{stroke:e.colour},c),e.length>1&&y(Yb,{stroke:e.colour},c)):y(Yb,{},c);b.Qj=c;return a}
function Gi(a,b,c,d){b.rb=null;b=new li(b,c,d);c=b.options;b.scale=c.oa.Fn;a.appendChild(b.ta("blocklyMainBackground"));z(fi(b),b.ua.bc());z(fi(b),b.Lc().bc());!c.Bm&&c.Xd&&(d=new je({parentWorkspace:b,rtl:b.o,oneBasedIndex:b.options.ui,renderer:b.options.Wk,rendererOverrides:b.options.Xk,move:{scrollbars:!0}}),d.Gb=b.options.Gb,b.L=new (Vc(Rc,b.options,!0))(d),b.L.Hd=!1,b.L.g.za(!0),d=b.L.ta(bc),jc(d,a));if(c.Em){if(!Ji)throw Error("Missing require for Blockly.Trashcan");b.uf=new Ji(b);d=b.uf.ta();
b.l.insertBefore(d,b.ra)}if(c.oa&&c.oa.controls){if(!Ki)throw Error("Missing require for Blockly.ZoomControls");b.Yg=new Ki(b);c=b.Yg.ta();b.l.appendChild(c)}b.Ha.subscribe(a,"workspaceBackgroundColour","background-color");b.translate(0,0);uf(b,Li(b));Ii(b);Lg||(Lg=document.createElement("div"),Lg.className="blocklyWidgetDiv",(Ac||document.body).appendChild(Lg));zc();L||(L=document.createElement("div"),L.className="blocklyTooltipDiv",(Ac||document.body).appendChild(L));return b}
function Mi(a){var b=a.Db;if(!(sg(b.g)&&tg(b.g)||a.qb())){b=b.Od(!0);for(var c=[].concat(a.Rg),d=0,e;e=c[d];d++)mg(a,b,e)}}
function Li(a){return function(b){var c=a.Db;if(!(sg(c.g)&&tg(c.g)||a.qb()))if(Yc.indexOf(b.type)!==-1){c=c.Od(!0);var d=null;switch(b.type){case "create":case "move":(d=a.yb(b.ga))&&(d=d.dc())}if(d){var e=Wc;E(b.group);mg(a,c,d)&&!b.group&&console.warn("Moved object in bounds but there was no event group. This may break undo.");e!==null&&E(e)}}else b.type==="viewport_change"&&b.scale>b.vg&&Mi(a)}}
function mg(a,b,c){var d=c.Se(),e=pc(b.top,d.top,b.top+b.height-(d.bottom-d.top))-d.top,f=b.left;b=b.left+b.width-(d.right-d.left);a.o?f=Math.min(b,f):b=Math.max(f,b);return(a=pc(f,d.left,b)-d.left)||e?(c.moveBy(a,e),!0):!1}
function Hi(a){var b=a.options,c=K(a);t(c.parentNode,"contextmenu",null,function(e){Wa(e)||e.preventDefault()});c=t(window,"resize",null,function(){Ge(!0);Ii(a);Mi(a)});a.Bi=c;Ni();if(b.Xd){c=a.na;var d=Zh(a,!0);c?c.ba():d&&(d.ba(a),d.show(b.Xd),typeof d.An=="function"&&d.An())}b.Em&&a.uf.ba();b.oa&&b.oa.controls&&a.Yg.ba();b.Ya&&b.Ya.scrollbars?(a.X=new ke(a,b.Ya.scrollbars===!0||!!b.Ya.scrollbars.hg,b.Ya.scrollbars===!0||!!b.Ya.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),a.X.resize()):
a.Fg({x:.5,y:.5});b.xp&&Oi(b.ie,a)}function Ni(){la||(t(document,"scroll",null,function(){for(var a=vf(),b=0,c;c=a[b];b++)c.Vg&&c.Vg()}),t(document,"keydown",null,Pi),Cb(document,"touchend",null,ub),Cb(document,"touchcancel",null,ub),Pa&&t(window,"orientationchange",document,function(){Ii(Hc)}));la=!0}
function Oi(a,b){function c(){for(;e.length;)u(e.pop());d.preload()}var d=b.tb;d.load([a+"click.mp3",a+"click.wav",a+"click.ogg"],"click");d.load([a+"disconnect.wav",a+"disconnect.mp3",a+"disconnect.ogg"],"disconnect");d.load([a+"delete.mp3",a+"delete.ogg",a+"delete.wav"],"delete");var e=[];e.push(t(document,"mousemove",null,c,!0));e.push(t(document,"touchstart",null,c,!0))};function Qi(a){this.Qn="";this.yn=Object.create(null);if(a){a=a.split(",");for(var b=0;b<a.length;b++)this.yn[a[b]]=!0}this.reset()}Qi.prototype.reset=function(){this.pc=Object.create(null);this.jm=Object.create(null);this.$=null};Qi.prototype.jl=function(a){this.$=a};
function Ri(a,b,c){var d=b;c=="VARIABLE"&&(a.$?b=(b=a.$.Ve(b))?b.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),b=null),b&&(d=b));b=d.toLowerCase();var e=c=="VARIABLE"||c=="DEVELOPER_VARIABLE"?a.Qn:"";c in a.pc||(a.pc[c]=Object.create(null));var f=a.pc[c];if(b in f)return e+f[b];d?(d=encodeURI(d.replace(/ /g,
"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(d[0])!=-1&&(d="my_"+d)):d=q.UNNAMED_KEY||"unnamed";for(var h="";a.jm[d+h]||d+h in a.yn;)h=h?h+1:2;d+=h;a.jm[d]=!0;a=(c=="VARIABLE"||c=="DEVELOPER_VARIABLE"?a.Qn:"")+d;f[b]=a.substr(e.length);return a};var qi={};function Si(a){var b=of(a,"procedures_defnoreturn").map(function(c){return c.np()});a=of(a,"procedures_defreturn").map(function(c){return c.np()});b.sort(Ti);a.sort(Ti);return[b,a]}function Ti(a,b){return a[0].localeCompare(b[0],void 0,{sensitivity:"base"})}
function ri(a){function b(f,h){for(var k=0;k<f.length;k++){var l=f[k][0],m=f[k][1],n=I("block");n.setAttribute("type",h);n.setAttribute("gap",16);var v=I("mutation");v.setAttribute("name",l);n.appendChild(v);for(l=0;l<m.length;l++){var w=I("arg");w.setAttribute("name",m[l]);v.appendChild(w)}c.push(n)}}var c=[];if(Hf.procedures_defnoreturn){var d=I("block");d.setAttribute("type","procedures_defnoreturn");d.setAttribute("gap",16);var e=I("field");e.setAttribute("name","NAME");e.appendChild(document.createTextNode(q.PROCEDURES_DEFNORETURN_PROCEDURE));
d.appendChild(e);c.push(d)}Hf.procedures_defreturn&&(d=I("block"),d.setAttribute("type","procedures_defreturn"),d.setAttribute("gap",16),e=I("field"),e.setAttribute("name","NAME"),e.appendChild(document.createTextNode(q.PROCEDURES_DEFRETURN_PROCEDURE)),d.appendChild(e),c.push(d));Hf.procedures_ifreturn&&(d=I("block"),d.setAttribute("type","procedures_ifreturn"),d.setAttribute("gap",16),c.push(d));c.length&&c[c.length-1].setAttribute("gap",24);a=Si(a);b(a[0],"procedures_callnoreturn");b(a[1],"procedures_callreturn");
return c}
function Ui(a){for(var b=[],c=of(a,"procedures_mutatorarg"),d=0,e;e=c[d];d++)b.push(kf(e,"NAME"));c=I("xml");d=I("block");d.setAttribute("type","procedures_mutatorarg");e=I("field");e.setAttribute("name","NAME");a:if(b.length){for(var f="",h=14,k="x";;){for(var l=!1,m=0;m<b.length;m++)if(b[m].toLowerCase()==k){l=!0;break}if(!l){b=k;break a}h++;h==25&&(h=0,f=Number(f)+1);k="ijkmnopqrstuvwxyzabcdefgh".charAt(h)+f}b=void 0}else b="x";e.appendChild(document.createTextNode(b));d.appendChild(e);c.appendChild(d);
if(b=ee(c)){if(!a.options.Xd)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(ie(b)){if(!a.na)throw Error("Existing toolbox has no categories.  Can't change mode.");a.options.Xd=b;a.na.W(b)}else{if(!a.L)throw Error("Existing toolbox has categories.  Can't change mode.");a.options.Xd=b;a.L.show(b)}}else if(a.options.Xd)throw Error("Can't nullify an existing toolbox.");}
function si(a){if(a.type=="bubble_open"&&a.Nq==="mutator"&&a.$j){a=(bd[a.Ta]||null).yb(a.ga);var b=a.type;if(b=="procedures_defnoreturn"||b=="procedures_defreturn")a=a.ce.g,Ui(a),uf(a,Vi)}}function Vi(a){a.type!="create"&&a.type!="delete"&&a.type!="change"||Ui(bd[a.Ta]||null)};function Wi(){Xi=this;this.Rb=Object.create(null);this.ef=Object.create(null)}var Xi,Yi={Shift:16,Control:17,Alt:18,Meta:91};Wi.prototype.register=function(a,b){if(this.Rb[a.name]&&!b)throw Error('Shortcut with name "'+a.name+'" already exists.');this.Rb[a.name]=a};
Wi.prototype.unregister=function(a){if(!this.Rb[a])return console.warn('Keyboard shortcut with name "'+a+'" not found.'),!1;for(var b in this.ef){var c=b,d=this.ef[c],e=d.indexOf(a);e>-1&&(d.splice(e,1),d.length==0&&delete this.ef[c])}delete this.Rb[a];return!0};function R(a,b){var c=Xi;a=String(a);var d=c.ef[a];if(d)throw Error('Shortcut with name "'+b+'" collides with shortcuts '+d.toString());c.ef[a]=[b]}
function Zi(a,b){var c="";if(b){for(var d=hd(Yi),e=0,f;f=b[e];e++)if(d.indexOf(f)<0)throw Error(f+" is not a valid modifier key.");for(var h in Yi)b.indexOf(Yi[h])>-1&&(c!=""&&(c+="+"),c+=h)}c!=""&&a?c=c+"+"+a:a&&(c=a.toString());return c}new Wi;function jf(a,b,c,d){this.j=a;this.name=b;this.type=c||"";this.Sd=d||gb();D(new (G("var_create"))(this))}jf.prototype.Wa=function(){return this.Sd};function $i(a,b){return a.name.localeCompare(b.name,void 0,{sensitivity:"base"})};var ni={};function jd(a){var b=gf(a);a=Object.create(null);for(var c=0;c<b.length;c++){var d=Dd(b[c]);if(d)for(var e=0;e<d.length;e++){var f=d[e],h=f.Wa();h&&(a[h]=f)}}b=[];for(h in a)b.push(a[h]);return b}var aj={};function oi(a){var b=[],c=document.createElement("button");c.setAttribute("text","%{BKY_NEW_VARIABLE}");c.setAttribute("callbackKey","CREATE_VARIABLE");Ci(a,function(d){bj(d.Mi)});b.push(c);a=cj(a);return b=b.concat(a)}
function cj(a){a=a.Th("");var b=[];if(a.length>0){var c=a[a.length-1];if(Hf.variables_set){var d=I("block");d.setAttribute("type","variables_set");d.setAttribute("gap",Hf.math_change?8:24);d.appendChild(dj(c));b.push(d)}Hf.math_change&&(d=I("block"),d.setAttribute("type","math_change"),d.setAttribute("gap",Hf.variables_get?20:8),d.appendChild(dj(c)),c=qd('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),d.appendChild(c),b.push(d));if(Hf.variables_get){a.sort($i);
c=0;for(var e;e=a[c];c++)d=I("block"),d.setAttribute("type","variables_get"),d.setAttribute("gap",8),d.appendChild(dj(e)),b.push(d)}}return b}function bj(a){function b(c){ej(c,function(d){if(d){var e=fj(d,a);if(e){if(e.type=="")var f=q.VARIABLE_ALREADY_EXISTS.replace("%1",e.name);else f=q.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,f=f.replace("%1",e.name).replace("%2",e.type);lf(f,function(){b(d)})}else a.dd(d,"")}})}b("")}
function ej(a,b){gj(a,function(c){c&&(c=c.replace(/[\s\xa0]+/g," ").trim(),c==q.RENAME_VARIABLE||c==q.NEW_VARIABLE)&&(c=null);b(c)})}function fj(a,b){b=b.$.Re();a=a.toLowerCase();for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a)return d;return null}function dj(a){var b=I("field");b.setAttribute("name","VAR");b.setAttribute("id",a.Wa());b.setAttribute("variabletype",a.type);b.appendChild(document.createTextNode(a.name));return b}
function yd(a,b){a=a.Re();var c=[];if(b.length!=a.length)for(var d=0;d<a.length;d++){var e=a[d];b.indexOf(e)==-1&&c.push(e)}return c};var Hc=null,M=null,ef=[],Ai=null,hj=null,ij=null,Ac=null;function Ii(a){for(;a.options.rb;)a=a.options.rb;var b=K(a),c=ci(a),d=b.parentNode;if(d){var e=d.offsetWidth;d=d.offsetHeight;c.width!=e&&(b.setAttribute("width",e+"px"),xi(a,e,null));c.height!=d&&(b.setAttribute("height",d+"px"),xi(a,null,d));a.resize()}}
function Pi(a){var b=Hc;if(b&&!(Wa(a)||b.I&&!b.isVisible()))a:{var c=Xi,d="";for(e in Yi)a.getModifierState(e)&&(d!=""&&(d+="+"),d+=e);d!=""&&a.keyCode?d=d+"+"+a.keyCode:a.keyCode&&(d=a.keyCode.toString());d=c.ef[d]||[];var e=0;for(var f;f=d[e];e++)if(f=c.Rb[f],(!f.ya||f.ya(b))&&f.sa&&f.sa(b,a,f))break a}}function jj(a){a.j.kd||(E(!0),Ge(),a.s?a.dispose(!1,!0):a.dispose(!0,!0),E(!1))}
function kj(a){if(a.df)a=null;else{for(var b=md(a,!0),c=0,d;d=b.childNodes[c];c++)if(d.nodeName.toLowerCase()=="next"){b.removeChild(d);break}c=a.ka();b.setAttribute("x",a.o?-c.x:c.x);b.setAttribute("y",c.y);a={xml:b,source:a.j,iq:lb(a,!0)}}a&&(Ai=a.xml,hj=a.source,ij=a.iq)}function lj(){if(!Ai)return!1;var a=hj;a.kd&&(a=a.P);return ij&&rf(a,ij)?(E(!0),zi(a),E(!1),!0):!1}
function Ge(a){Ve();Rg();Fc();var b=!!a;Ib(Hc.Zb,Mb).forEach(function(c){!b&&c.Mb&&c.Mb&&c.Mb.isVisible()&&(c.Mb.jb(),mj(c,!1))})}function lf(a,b){alert(a);b&&b()}function mf(a,b){b(confirm(a))}function gj(a,b){b(prompt(q.NEW_VARIABLE_TITLE,a))}
function nj(a){return function(){var b=a.type?'Block "'+a.type+'": ':"";if(a.output&&a.previousStatement)throw Error(b+"Must not have both an output and a previousStatement.");a.style&&a.style.uc&&(this.uc=a.style.uc,a.style=null);if(a.style&&a.colour)throw Error(b+"Must not have both a colour and a style.");if(a.style){var c=a.style;try{this.pe(c)}catch(w){console.warn(b+"Style does not exist: ",c)}}else if("colour"in a)if(a.colour===void 0)console.warn(b+"Undefined colour value.");else{c=a.colour;
try{this.Ci(c)}catch(w){console.warn(b+"Illegal colour value: ",c)}}for(c=0;a["message"+c]!==void 0;){var d=a["args"+c]||[],e=a["lastDummyAlign"+c],f=b;var h=fb(a["message"+c],!0);for(var k=d.length,l=[],m=0,n=0;n<h.length;n++){var v=h[n];if(typeof v=="number"){if(v<1||v>k)throw Error('Block "'+this.type+'": Message index %'+v+" out of range.");if(l[v])throw Error('Block "'+this.type+'": Message index %'+v+" duplicated.");l[v]=!0;m++}}if(m!=k)throw Error('Block "'+this.type+'": Message does not reference all '+
k+" arg(s).");k=[];for(l=0;l<h.length;l++){m=h[l];typeof m=="number"&&(m=d[m-1]);if(typeof m=="string"&&(m=mh(m),!m))continue;k.push(m)}(d=k.length)&&!nh(k[d-1].type)&&(d={type:"input_dummy"},e&&(d.align=e),k.push(d));e=[];for(d=0;h=k[d];d++)if(nh(h.type)){l=h;m=f;n={LEFT:-1,RIGHT:1,CENTRE:0,CENTER:0};h=null;switch(l.type){case "input_value":h=this.Fe(1,l.name);break;case "input_statement":h=this.Fe(3,l.name);break;case "input_dummy":h=this.Fe(5,l.name||"")}h?(l.check&&h.lf(l.check),l.align&&(n=n[l.align.toUpperCase()],
n===void 0?console.warn(m+"Illegal align value: ",l.align):(l=h,l.align=n,l.m.I&&(l.m=l.m,l.m.W())))):h=null;if(h){for(l=0;m=e[l];l++)n=h,fh(n,n.aa.length,m[0],m[1]);e.length=0}}else(l=lh(this,h))&&e.push([l,h.name]);c++}a.inputsInline!==void 0&&this.oe(a.inputsInline);a.output!==void 0&&this.dl(!0,a.output);a.previousStatement!==void 0&&this.hl(!0,a.previousStatement);a.nextStatement!==void 0&&this.cl(!0,a.nextStatement);a.tooltip!==void 0&&(c=a.tooltip,c=eb(c),this.Jg(c));a.enableContextMenu!==
void 0&&(c=a.enableContextMenu,this.contextMenu=!!c);a.helpUrl!==void 0&&(c=a.helpUrl,this.$e=eb(c));typeof a.extensions=="string"&&(console.warn(b+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+a.type+"' block."),a.extensions=[a.extensions]);a.mutator!==void 0&&Kf(a.mutator,this,!0);b=a.extensions;if(Array.isArray(b))for(c=0;c<b.length;++c)Kf(b[c],this,!1)}}
function oj(a){for(var b=0;b<a.length;b++){var c=a[b];if(c){var d=c.type;d==null||d===""?console.warn("Block definition #"+b+" in JSON array is missing a type attribute. Skipping."):(Hf[d]&&console.warn("Block definition #"+b+' in JSON array overwrites prior definition of "'+d+'".'),Hf[d]={ba:nj(c)})}else console.warn("Block definition #"+b+" in JSON array is "+c+". Skipping.")}};function pj(a,b,c){typeof a!="function"&&(qj(a),a=JSON.parse(JSON.stringify(a)));this.ff=a;this.ol=this.Pk=this.Qh=null;a=this.ff;if(Array.isArray(a)){for(var d=!1,e=0;e<a.length;e++){var f=a[e][0];typeof f=="string"?a[e][0]=eb(f):(f.alt!=null&&(a[e][0].alt=eb(f.alt)),d=!0)}if(!(d||a.length<2)){f=[];for(e=0;e<a.length;e++)f.push(a[e][0]);var h=za(f);e=Aa(f,h);d=Ba(f,h);if((e||d)&&!(h<=e+d)){e&&(this.Pk=f[0].substring(0,e-1));d&&(this.ol=f[0].substr(1-d));f=[];for(h=0;h<a.length;h++){var k=a[h][0],
l=a[h][1];k=k.substring(e,k.length-d);f[h]=[k,l]}this.ff=f}}}this.kf=rj(this,!1)[0];pj.i.constructor.call(this,this.kf[1],b,c);this.rf=this.Gd=this.kb=this.lb=this.Eg=null}H(pj,Tg);pj.M=function(a){return new pj(a.options,void 0,a)};pj.prototype.Jj=function(a){typeof this.ff=="function"&&rj(this,!1);Gd(this,a.textContent)};pj.prototype.Pl=!0;var sj=Oa?"\u25bc":"\u25be";g=pj.prototype;g.co="default";
g.Wh=function(){!this.C().Dl||this.C().Dl&&!this.m.T?Wg(this):this.em=this.m.O();Xg(this);this.kb=y(Xb,{},this.ob);this.C().to?(this.rf=y(Xb,{height:this.C().Af+"px",width:this.C().Af+"px"},this.ob),this.rf.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.C().uo)):(this.Gd=y(dc,{},this.bb),this.Gd.appendChild(document.createTextNode(this.m.o?sj+" ":" "+sj)),this.m.o?this.bb.insertBefore(this.Gd,this.re):this.bb.appendChild(this.Gd));this.Ba&&z(this.Ba,"blocklyDropdownRect")};
g.Hi=function(a){var b=new ph;b.Gg("listbox");this.lb=b;var c=rj(this,!1);this.Eg=null;for(var d=0;d<c.length;d++){var e=c[d][0],f=c[d][1];if(typeof e=="object"){var h=new Image(e.width,e.height);h.src=e.src;h.alt=e.alt||"";e=h}e=new th(e,f);e.Gg("option");e.Zk=this.m.o;e.hj=!0;b.fc.push(e);e.ij=f==this.sb;f==this.sb&&(this.Eg=e);uh(e,this.qp,this)}this.lb.Hk=a&&typeof a.clientX==="number"?new r(a.clientX,a.clientY):null;this.lb.W(rc);z(this.lb.Pa,"blocklyDropdownMenu");this.C().so&&(a=this.m.T?this.m.getParent().Lj():
this.m.Lj(),b=this.m.T?this.m.getParent().style.Le:this.m.style.Le,qc.style.backgroundColor=a,qc.style.borderColor=b);a=this.fp.bind(this);this.Ba?(f=this.Ba.getBoundingClientRect(),c=Ja(this.Ba),d=f.width,f=f.height):(f=fg(this.m),b=this.m.j.scale,c=Ja(Vg(this)),d=f.width*b,f=f.height*b,Na?(c.x+=1.5*b,c.y+=1.5*b):La||Ka||(c.x-=.5*b,c.y-=.5*b),d+=1*b,f+=1*b);b=new ya(c.y,c.y+f,c.x,c.x+d);d=new ya(b.top,b.bottom,b.left,b.right);b=d.left+(d.right-d.left)/2;c=d.bottom;d=d.top;f=this.v();for(e=f.j;e.options.rb;)e=
e.options.rb;tc=K(e).parentNode;f=f.o;uc=this;wc=a||null;a=qc;a.style.direction=f?"rtl":"ltr";f=Hc;xc=f.ua.bc();yc=f.Lc().bc();z(a,xc);z(a,yc);a=Ja(tc);f=Ha(tc);a={left:a.x,right:a.x+f.width,top:a.y,bottom:a.y+f.height,width:f.width,height:f.height};f=Ha(qc);c+f.height<a.bottom?a=Bc(b,c,a,f):d-f.height>a.top?a=Dc(b,d,a,f):c+f.height<document.documentElement.clientHeight?a=Bc(b,c,a,f):d-f.height>document.documentElement.clientTop?a=Dc(b,d,a,f):(a=Cc(b,a.left,a.right,f.width),a={Vj:a.Qe,Wj:0,Fj:a.Qe,
Gj:0,aj:null,Ge:null,cj:null,bj:!1});d=a;d.bj?(sc.style.display="",sc.style.transform="translate("+d.Ge+"px,"+d.cj+"px) rotate(45deg)",sc.setAttribute("class",d.aj?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):sc.style.display="none";a=Math.floor(d.Vj);b=Math.floor(d.Wj);c=Math.floor(d.Fj);d=Math.floor(d.Gj);f=qc;f.style.left=a+"px";f.style.top=b+"px";f.style.display="block";f.style.opacity=1;f.style.transform="translate("+(c-a)+"px,"+(d-b)+"px)";this.lb.focus();
this.Eg&&this.lb.ic(this.Eg);this.Na()};g.fp=function(){this.lb&&this.lb.dispose();this.Eg=this.lb=null;this.Na()};g.qp=function(a){uc===this&&Fc();Gd(this,a.sb)};function rj(a,b){return typeof a.ff=="function"?(a.Qh&&b||(a.Qh=a.ff.call(a),qj(a.Qh)),a.Qh):a.ff}
g.Mh=function(a){for(var b=!1,c=rj(this,!0),d=0,e;e=c[d];d++)if(e[1]==a){b=!0;break}return b?a:(this.m&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.m.type+", Field name: "+this.name+", Value: "+a),null)};g.Uf=function(a){pj.i.Uf.call(this,a);a=rj(this,!0);for(var b=0,c;c=a[b];b++)c[1]==this.sb&&(this.kf=c)};
g.Na=function(){this.Ba&&(this.Ba.setAttribute("stroke",this.m.style.Le),this.lb?this.Ba.setAttribute("fill",this.m.style.Le):this.Ba.setAttribute("fill","transparent"));this.m&&this.Gd&&(this.Gd.style.fill=this.m.T?this.m.style.Ch:this.m.style.Jd)};
g.Vk=function(){this.re.nodeValue="";this.kb.style.display="none";var a=this.kf&&this.kf[0];if(a&&typeof a=="object"){this.kb.style.display="";this.kb.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a.src);this.kb.setAttribute("height",a.height);this.kb.setAttribute("width",a.width);var b=Number(a.height);a=Number(a.width);var c=!!this.Ba,d=Math.max(c?this.C().Cl:0,b+10);c=c?this.C().zf:0;if(this.rf)var e=tj(this,a+c,d/2-this.C().Af/2);else{e=this.Gd;var f=this.C().Bf,h=this.C().ye,k=this.C().xe;
e=nc(e,f+"pt",h,k)}this.ab.width=a+e+c*2;this.ab.height=d;f=0;this.m.o?this.kb.setAttribute("x",c+e):(f=a+e,this.bb.setAttribute("text-anchor","end"),this.kb.setAttribute("x",c));this.kb.setAttribute("y",d/2-b/2);Zg(this,f+c,a+e)}else this.re.nodeValue=Yg(this),z(this.bb,"blocklyDropdownText"),this.bb.setAttribute("text-anchor","start"),a=!!this.Ba,b=Math.max(a?this.C().Cl:0,this.C().eh),d=this.bb,c=this.C().Bf,e=this.C().ye,f=this.C().xe,d=nc(d,c+"pt",e,f),a=a?this.C().zf:0,c=0,this.rf&&(c=tj(this,
d+a,b/2-this.C().Af/2)),this.ab.width=d+c+a*2,this.ab.height=b,Zg(this,a,d);$g(this)};function tj(a,b,c){if(!a.rf)return 0;var d=a.Ba?a.C().zf:0,e=a.C().vo,f=a.C().Af;a.rf.setAttribute("transform","translate("+(a.m.o?d:b+e)+","+c+")");return f+e}g.Oj=function(){if(!this.kf)return null;var a=this.kf[0];return typeof a=="object"?a.alt:a};
function qj(a){if(!Array.isArray(a))throw TypeError("FieldDropdown options must be an array.");if(!a.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var b=!1,c=0;c<a.length;++c){var d=a[c];Array.isArray(d)?typeof d[1]!="string"?(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option id must be a string. Found "+d[1]+" in: ",d)):d[0]&&typeof d[0]!="string"&&typeof d[0].src!="string"&&(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must have a string label or image description. Found"+
d[0]+" in: ",d)):(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must be an array. Found: ",d))}if(b)throw TypeError("Found invalid FieldDropdown options.");}B(Nc,"field_dropdown",pj);function uj(a,b,c,d){this.g=a;this.Mi=b;this.tl=c.text;this.je=new r(0,0);this.Nc=d;this.zh=c.callbackKey||c.callbackkey;this.hm=c["web-class"]||null;this.Ck=null;this.info=c}g=uj.prototype;g.width=0;g.height=0;
g.ta=function(){var a=this.Nc?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.hm&&(a+=" "+this.hm);this.l=y(Wb,{"class":a},this.g.ra);if(!this.Nc)var b=y(ac,{"class":"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.l);a=y(ac,{"class":this.Nc?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.l);var c=y(cc,{"class":this.Nc?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.l),d=eb(this.tl);this.g.o&&(d+="\u200f");c.textContent=d;this.Nc&&(this.rl=
c,this.g.Ha.subscribe(this.rl,"flyoutForegroundColour","fill"));var e=Ia(c,"fontSize"),f=Ia(c,"fontWeight"),h=Ia(c,"fontFamily");this.width=nc(c,e,f,h);d=oc(d,e,f,h);this.height=d.height;this.Nc||(this.width+=10,this.height+=4,b.setAttribute("width",this.width),b.setAttribute("height",this.height));a.setAttribute("width",this.width);a.setAttribute("height",this.height);c.setAttribute("x",this.width/2);c.setAttribute("y",this.height/2-d.height/2+d.Ib);vj(this);this.Ck=t(this.l,"mouseup",this,this.Np);
return this.l};g.show=function(){vj(this);this.l.setAttribute("display","block")};function vj(a){a.l.setAttribute("transform","translate("+a.je.x+","+a.je.y+")")}g.moveTo=function(a,b){this.je.x=a;this.je.y=b;vj(this)};g.dispose=function(){this.Ck&&u(this.Ck);this.l&&A(this.l);this.rl&&this.g.Ha.unsubscribe(this.rl)};
g.Np=function(a){(a=this.Mi.ed(a))&&a.cancel();this.Nc&&this.zh?console.warn("Labels should not have callbacks. Label text: "+this.tl):this.Nc||this.zh&&Di(this.Mi,this.zh)?this.Nc||Di(this.Mi,this.zh)(this):console.warn("Buttons should have callbacks. Button text: "+this.tl)};Yd(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(","));function ih(a){this.ug=a}g=ih.prototype;g.fh=null;g.ph=null;g.qh=null;g.zo="  ";g.bo=60;g.nh=[];g.$h=null;function wj(a,b){return b+a.replace(/(?!\n$)\n/g,"\n"+b)}
function xj(a,b){a.$h===!1&&console.warn("Generator init was not called before blockToCode was called.");if(!b)return"";if(!b.isEnabled())return xj(a,nb(b));if(b.Cb())return xj(a,ld(b,!1)[0]);var c=a[b.type];if(typeof c!="function")throw Error('Language "'+a.ug+'" does not know how to generate code for block type "'+b.type+'".');c=c.call(b,b);if(Array.isArray(c)){if(!b.s)throw TypeError("Expecting string from statement block: "+b.type);return[a.$k(b,c[0]),c[1]]}if(typeof c=="string")return a.ph&&
!b.ql&&(c=yj(a.ph,b)+c),a.qh&&!b.ql&&(c+=yj(a.qh,b)),a.$k(b,c);if(c===null)return"";throw SyntaxError("Invalid code generated: "+c);}
function zj(a,b,c,d){if(isNaN(d))throw TypeError("Expecting valid order from block: "+b.type);var e=oh(b,c);if(!e)return"";c=xj(a,e);if(c==="")return"";if(!Array.isArray(c))throw TypeError("Expecting tuple from value block: "+e.type);b=c[0];c=c[1];if(isNaN(c))throw TypeError("Expecting valid order from value block: "+e.type);if(!b)return"";e=!1;var f=Math.floor(d),h=Math.floor(c);if(f<=h&&(f!=h||f!=0&&f!=99))for(e=!0,f=0;f<a.nh.length;f++)if(a.nh[f][0]==d&&a.nh[f][1]==c){e=!1;break}e&&(b="("+b+")");
return b}function Aj(a,b){var c=S;a=oh(a,b);b=xj(c,a);if(typeof b!="string")throw TypeError("Expecting code from statement block: "+(a&&a.type));b&&(b=wj(b,c.zo));return b}function yj(a,b){b=b.id.replace(/\$/g,"$$$$");return a.replace(/%1/g,"'"+b+"'")}g.Wi="";function Bj(a){var b=S;b.Wi+=a+","}g.ba=function(){this.pj=Object.create(null);this.jp=Object.create(null)};g.$k=function(a,b){return b};g.finish=function(a){delete this.pj;delete this.jp;return a};g.Bn=function(a){return a};var S=new ih("JavaScript");Bj("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(p).join(","));S.lq=0;S.Eq=1.1;S.mh=1.2;S.lh=2;S.Bq=3;S.vq=3;S.oq=4.1;S.Hq=4.2;S.Ol=4.3;S.Kl=4.4;S.Gq=4.5;S.Iq=4.6;S.wq=4.7;S.mq=4.8;
S.zq=5;S.Ml=5.1;S.xq=5.2;S.Dq=5.3;S.Nl=6.1;S.kh=6.2;S.qq=7;S.Fq=8;S.Aq=8;S.Cq=8;S.yq=9;S.nq=10;S.rq=11;S.pq=12;S.Jl=13;S.Ll=14;S.uq=15;S.kq=16;S.Jq=17;S.tq=18;S.Ho=99;S.nh=[[S.lh,S.mh],[S.lh,S.lh],[S.mh,S.mh],[S.mh,S.lh],[S.Kl,S.Kl],[S.Ml,S.Ml],[S.kh,S.kh],[S.Jl,S.Jl],[S.Ll,S.Ll]];S.$h=!1;
S.ba=function(a){Object.getPrototypeOf(this).ba.call(this);this.pd?this.pd.reset():this.pd=new Qi(this.Wi);this.pd.jl(a.$);for(var b=this.pd,c=jd(a),d=0;d<c.length;d++)Ri(b,c[d].Wa(),"VARIABLE");b=this.pd;c=Si(a);c=c[0].concat(c[1]);for(d=0;d<c.length;d++)Ri(b,c[d][0],"PROCEDURE");b=[];c=gf(a);d=Object.create(null);for(var e=0,f;f=c[e];e++){var h=f.$q;!h&&f.mp&&(h=f.mp,aj[f.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+f.type+"')"),aj[f.type]=
!0));if(h)for(f=h(),h=0;h<f.length;h++)d[f[h]]=!0}d=Object.keys(d);for(c=0;c<d.length;c++)b.push(Ri(this.pd,d[c],"DEVELOPER_VARIABLE"));a=jd(a);for(c=0;c<a.length;c++)b.push(Ri(this.pd,a[c].Wa(),"VARIABLE"));b.length&&(this.pj.variables="var "+b.join(", ")+";");this.$h=!0};S.finish=function(a){var b=hd(this.pj);a=Object.getPrototypeOf(this).finish.call(this,a);this.$h=!1;this.pd.reset();return b.join("\n\n")+"\n\n\n"+a};S.Bn=function(a){return a+";\n"};
S.Qp=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+a+"'"};S.er=function(a){return a.split(/\n/g).map(this.Qp).join(" + '\\n' +\n")};
S.$k=function(a,b){var c="";if(!a.s||!a.s.K){var d=a.Yb.text;d&&(d=Ca(d,this.bo-3),c+=wj(d+"\n","// "));for(var e=0;e<a.u.length;e++)if(a.u[e].type==1){var f=a.u[e].connection.F();if(f){d=[];f=mb(f,!0);for(var h=0;h<f.length;h++){var k=f[h].Yb.text;k&&d.push(k)}d.length&&d.push("");(d=d.join("\n"))&&(c+=wj(d,"// "))}}}a=a.A&&a.A.F();a=xj(this,a);return c+b+a};
S.Yq=function(a,b,c,d,e){c=c||0;e=e||this.Ho;a.j.options.ui&&c--;var f=a.j.options.ui?"1":"0";a=c>0?zj(this,a,b,this.kh)||f:c<0?zj(this,a,b,this.Nl)||f:d?zj(this,a,b,this.Ol)||f:zj(this,a,b,e)||f;if(/^\s*-?\d+(\.\d+)?\s*$/.test(a))a=Number(a)+c,d&&(a=-a);else{if(c>0){a=a+" + "+c;var h=this.kh}else c<0&&(a=a+" - "+-c,h=this.Nl);d&&(a=c?"-("+a+")":"-"+a,h=this.Ol);h=Math.floor(h);e=Math.floor(e);h&&e>=h&&(a="("+a+")")}return a};function Cj(){}Cj.prototype.zk=function(){};Cj.prototype.yk=function(){};Cj.prototype.Ak=function(){};function Dj(){Dj.i.constructor.call(this);this.Qi=!1}H(Dj,Cj);function bg(a,b,c){b instanceof Q?(b=!b.getParent()&&od(b),a.Qi=b&&!c):a.Qi=od(b);return a.Qi};function Ej(a,b){Ej.i.constructor.call(this,b);this.$j=a}H(Ej,Pd);Ej.prototype.type="trashcan_open";Ej.prototype.R=function(){var a=Ej.i.R.call(this);a.isOpen=this.$j;return a};Ej.prototype.M=function(a){Ej.i.M.call(this,a);this.$j=a.isOpen};B(Mc,"trashcan_open",Ej);function Fj(a,b,c,d,e,f){var h=f.X&&!!f.X.Y;a.hg===0?(c=e.sh.left+c,h&&f.o&&(c+=me)):(c=e.sh.left+e.Sn.width-b.width-c,h&&!f.o&&(c-=me));a.vertical===0?a=e.sh.top+d:(a=e.sh.top+e.Sn.height-b.height-d,f.X&&f.X.la&&(a-=me));return new ya(a,a+b.height,c,c+b.width)}function Gj(a){return{hg:a.cq.position!==2?0:1,vertical:1}}
function Hj(a,b,c,d){for(var e=a.left,f=a.right-a.left,h=a.bottom-a.top,k=0,l;l=d[k];k++)a.left>l.right||a.right<l.left||a.top>l.bottom||a.bottom<l.top||(a=c===0?l.top-h-b:l.bottom+b,a=new ya(a,a+h,e,e+f),k=-1);return a};function Ji(a){Ji.i.constructor.call(this);this.g=a;this.id="trashcan";this.cd=[];this.Mb=null;this.g.options.li<=0||(a=new je({scrollbars:!0,parentWorkspace:this.g,rtl:this.g.o,oneBasedIndex:this.g.options.ui,renderer:this.g.options.Wk,rendererOverrides:this.g.options.Xk,move:{scrollbars:!0}}),a.Gb=this.g.Gb==3?2:3,this.Mb=new (Vc(Rc,this.g.options,!0))(a),uf(this.g,this.Ip.bind(this)))}H(Ji,Dj);g=Ji.prototype;g.Ec=47;g.$g=44;g.Ae=16;g.Cf=20;g.Ti=20;g.ih=10;g.Xi=0;g.Yi=32;g.xo=.1;g.ai=!1;g.nk=0;
g.l=null;g.Li=null;g.dk=0;g.md=0;g.Pc=0;g.Uc=0;g.kg=!1;
g.ta=function(){this.l=y(Wb,{"class":"blocklyTrash"},null);var a=String(Math.random()).substring(2);var b=y(Pb,{id:"blocklyTrashBodyClipPath"+a},this.l);y(ac,{width:this.Ec,height:this.$g,y:this.Ae},b);var c=y(Xb,{width:96,x:-this.Xi,height:124,y:-this.Yi,"clip-path":"url(#blocklyTrashBodyClipPath"+a+")"},this.l);c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.ie+"sprites.png");b=y(Pb,{id:"blocklyTrashLidClipPath"+a},this.l);y(ac,{width:this.Ec,height:this.Ae},b);this.Li=
y(Xb,{width:96,x:-this.Xi,height:124,y:-this.Yi,"clip-path":"url(#blocklyTrashLidClipPath"+a+")"},this.l);this.Li.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.ie+"sprites.png");Cb(this.l,"mousedown",this,this.To);Cb(this.l,"mouseup",this,this.click);Cb(c,"mouseover",this,this.Gp);Cb(c,"mouseout",this,this.Ep);this.$i();return this.l};
g.ba=function(){this.g.options.li>0&&(jc(this.Mb.ta(bc),K(this.g)),this.Mb.ba(this.g));Eb(this.g.Zb,{component:this,weight:1,Fc:[Mb,Hb,Lb,Kb]});this.kg=!0;this.nf(!1)};g.dispose=function(){Fb(this.g.Zb,"trashcan");this.l&&(A(this.l),this.l=null);this.g=this.Li=null;clearTimeout(this.dk)};
g.position=function(a,b){if(this.kg){var c=Gj(a);a=Hj(Fj(c,new Ga(this.Ec,this.$g+this.Ae),this.Ti,this.Cf,a,this.g),this.Cf,c.vertical===0?1:0,b);this.Uc=a.top;this.Pc=a.left;this.l.setAttribute("transform","translate("+this.Pc+","+this.Uc+")")}};g.Se=function(){return new ya(this.Uc,this.Uc+this.$g+this.Ae,this.Pc,this.Pc+this.Ec)};
g.wm=function(){if(!this.l)return null;var a=this.l.getBoundingClientRect(),b=a.top+this.Yi-this.ih;a=a.left+this.Xi-this.ih;return new ya(b,b+this.Ae+this.$g+2*this.ih,a,a+this.Ec+2*this.ih)};g.zk=function(){this.nf(this.Qi)};g.yk=function(){this.nf(!1)};g.Ak=function(){setTimeout(this.nf.bind(this,!1),100)};g.nf=function(a){this.ai!=a&&(clearTimeout(this.dk),this.ai=a,this.$i())};
g.$i=function(){this.md+=this.ai?.2:-.2;this.md=Math.min(Math.max(this.md,this.nk),1);Ij(this,this.md*45);this.l.style.opacity=.4+this.md*.4;this.md>this.nk&&this.md<1&&(this.dk=setTimeout(this.$i.bind(this),20))};function Ij(a,b){var c=a.g.Gb==3;a.Li.setAttribute("transform","rotate("+(c?-b:b)+","+(c?4:a.Ec-4)+","+(a.Ae-2)+")")}g.click=function(){if(this.cd.length&&(!this.Mb||!this.Mb.isVisible())){var a=this.cd.map(qd);this.Mb.show(a);mj(this,!0)}};
function mj(a,b){a=new (G("trashcan_open"))(b,a.g.id);D(a)}g.To=function(a){this.Mb&&this.Mb.isVisible()||!this.cd.length||a.stopPropagation()};g.Gp=function(){this.cd.length&&this.nf(!0)};g.Ep=function(){this.nf(!1)};
g.Ip=function(a){if(!(this.g.options.li<=0)&&a.type=="delete"&&a.gf.tagName&&a.gf.tagName.toLowerCase()!="shadow"){for(var b=a=a.gf.cloneNode(!0);b;){b.removeAttribute&&(b.removeAttribute("x"),b.removeAttribute("y"),b.removeAttribute("id"),b.removeAttribute("disabled"),b.nodeName=="comment"&&(b.removeAttribute("h"),b.removeAttribute("w"),b.removeAttribute("pinned")));var c=b.firstChild||b.nextSibling;if(!c)for(c=b.parentNode;c;){if(c.nextSibling){c=c.nextSibling;break}c=c.parentNode}b=c}a=pd(a);if(this.cd.indexOf(a)==
-1){for(this.cd.unshift(a);this.cd.length>this.g.options.li;)this.cd.pop();this.nk=a=this.xo;this.ai||Ij(this,a*45)}}};function Jj(a){Jj.i.constructor.call(this);a.Fg=this.Up.bind(this);var b=this.g=new li(a),c=new di(this.g,this);b.Db=c;b.zb=b.Db.zb.bind(b.Db);this.g.kd=!0;this.g.za(this.Oc);this.id=gb();this.o=!!a.o;this.Bd=a.Gb;this.Dj=[];this.ji=[];this.If=[];this.Ga=[];this.Nk=[];this.sf=this.g.ua.C().rh;this.P=null}H(Jj,Dj);g=Jj.prototype;g.Hd=!0;g.Oc=!1;g.Kd=!0;g.pa=8;g.Be=Jj.prototype.pa;g.wo=Jj.prototype.Be*3;g.Ko=2.5;g.Fd=0;g.Tj=0;g.ep=70;
g.ta=function(a){this.l=y(a,{"class":"blocklyFlyout",style:"display: none"},null);this.Qa=y(Zb,{"class":"blocklyFlyoutBackground"},this.l);this.l.appendChild(this.g.ta());this.g.Ha.subscribe(this.Qa,"flyoutBackgroundColour","fill");this.g.Ha.subscribe(this.Qa,"flyoutOpacity","fill-opacity");return this.l};
g.ba=function(a){this.P=a;this.g.P=a;this.g.X=new ke(this.g,!1,!0,"blocklyFlyoutScrollbar",this.Ko);this.jb();Array.prototype.push.apply(this.Dj,t(this.l,"wheel",this,this.jq));this.Hd||(this.Ph=this.Ej.bind(this),uf(this.P,this.Ph));Array.prototype.push.apply(this.Dj,t(this.Qa,"mousedown",this,this.rd));this.g.ed=this.P.ed.bind(this.P);this.g.jl(this.P.$);var b=this.g;b.xi=new ff(b);Eb(a.Zb,{component:this,weight:1,Fc:[Hb,Lb]})};
g.dispose=function(){this.jb();Fb(this.g.Zb,this.id);u(this.Dj);this.Ph&&(kb(this.P.Ga,this.Ph),this.Ph=null);this.g&&(this.g.Ha.unsubscribe(this.Qa),this.g.P=null,this.g.dispose(),this.g=null);this.l&&(A(this.l),this.l=null);this.P=this.Qa=null};g.eg=function(){return this.Fd};g.isVisible=function(){return this.Oc};g.za=function(a){var b=a!=this.isVisible();this.Oc=a;b&&(this.Hd||vi(this.g),this.Ug())};g.me=function(a){var b=a!=this.Kd;this.Kd=a;b&&this.Ug()};
g.Ug=function(){var a=this.Kd?this.isVisible():!1;this.l.style.display=a?"block":"none";this.g.X.me(a)};g.jb=function(){if(this.isVisible()){this.za(!1);for(var a=0,b;b=this.Ga[a];a++)u(b);this.Ga.length=0;this.wd&&(kb(this.g.Ga,this.wd),this.wd=null)}};
g.show=function(a){this.g.$a(!1);this.jb();Kj(this);typeof a=="string"&&(a=Lj(this,a));this.za(!0);a=he(a);a=Mj(this,a);Nj(this,a.Zo,a.kp);this.Ga.push(t(this.Qa,"mouseover",this,function(){for(var b=this.g.Ca(!1),c=0,d;d=b[c];c++)d.Cg()}));this.Fd=0;this.g.$a(!0);this.Rk();this.Ej();this.position();this.wd=this.Rk.bind(this);uf(this.g,this.wd)};
function Mj(a,b){var c=[],d=[];a.Nk.length=0;for(var e=a.wo,f=0,h;h=b[f];f++){if(h.custom){var k=Lj(a,h.custom);k=he(k);b.splice.apply(b,[f,1].concat(k));h=b[f]}switch(h.kind.toUpperCase()){case "BLOCK":k=h;var l=k;h=null;var m=l.blockxml;m&&typeof m!="string"?h=m:m&&typeof m=="string"?(h=qd(m),l.blockxml=h):l.type&&(h=I("xml"),h.setAttribute("type",l.type),h.setAttribute("disabled",l.disabled),l.blockxml=h);if(!h)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");
l=h;h=a;m=sd(l,h.g);m.isEnabled()||h.Nk.push(m);h=m;k=parseInt(k.gap||l.getAttribute("gap"),10);d.push(isNaN(k)?e:k);c.push({type:"block",block:h});break;case "SEP":k=d;l=e;h=parseInt(h.gap,10);!isNaN(h)&&k.length>0?k[k.length-1]=h:k.push(l);break;case "LABEL":k=Oj(a,h,!0);c.push({type:"button",button:k});d.push(e);break;case "BUTTON":k=Oj(a,h,!1),c.push({type:"button",button:k}),d.push(e)}}return{Zo:c,kp:d}}
function Lj(a,b){b=a.g.P.ul[b]||null;if(typeof b!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");a=b(a.g.P);if(!Array.isArray(a))throw new TypeError("Result of toolbox category callback must be an array.");return a}function Oj(a,b,c){if(!uj)throw Error("Missing require for Blockly.FlyoutButton");return new uj(a.g,a.P,b,c)}
function Kj(a){for(var b=a.g.Ca(!1),c=0,d;d=b[c];c++)d.j==a.g&&d.dispose(!1,!1);for(c=0;c<a.ji.length;c++)if(b=a.ji[c])Ue(b),A(b);for(c=a.ji.length=0;b=a.If[c];c++)b.dispose();a.If.length=0;a.g.xi.clear()}function Pj(a,b){return function(c){var d=a.P.ed(c);d&&(Eg(d,b),Dg(d,c,a))}}g.rd=function(a){var b=this.P.ed(a);b&&Dg(b,a,this)};
function zg(a,b){var c=null;C++;var d=a.P.Re();a.P.$a(!1);try{var e=a.P;if(!b.O())throw Error("oldBlock is not rendered.");var f=md(b,!0);e.$a(!1);var h=sd(f,e);if(!h.O())throw Error("block is not rendered.");var k=ab(e.ra),l=ab(a.g.ra),m=b.ka();m.scale(a.g.scale);var n=wa(xa(l,m),k);n.scale(1/e.scale);h.moveBy(n.x,n.y);c=h}finally{C--}Ge();b=yd(a.P,d);if(C==0){E(!0);for(d=0;d<b.length;d++)e=b[d],D(new (G("var_create"))(e));D(new (G("create"))(c))}a.Hd?a.jb():a.Ej();return c}
g.Ej=function(){for(var a=this.g.Ca(!1),b=0,c;c=a[b];b++)if(this.Nk.indexOf(c)==-1)for(var d=rf(this.P,lb(c));c;)c.Ac(d),c=nb(c)};
g.Rk=function(){this.wd&&kb(this.g.Ga,this.wd);this.g.scale=this.P.scale;for(var a=0,b=this.g.Ca(!1),c=0,d;d=b[c];c++){var e=fg(d).width;d.s&&(e-=this.sf);a=Math.max(a,e)}for(c=0;d=this.If[c];c++)a=Math.max(a,d.width);a+=this.Be*1.5+this.sf;a*=this.g.scale;a+=me;if(this.Fd!=a){for(c=0;d=b[c];c++){if(this.o){e=d.ka().x;var f=a/this.g.scale-this.Be;d.s||(f-=this.sf);d.moveBy(f-e,0)}d.um&&(e=d.um,f=d,d=fg(f),e.setAttribute("width",d.width),e.setAttribute("height",d.height),f=f.ka(),e.setAttribute("y",
f.y),e.setAttribute("x",this.o?f.x-d.width:f.x))}if(this.o)for(c=0;d=this.If[c];c++)d.moveTo(a/this.g.scale-d.width-this.Be-this.sf,d.je.y);this.P.Gb!=this.Bd||this.Bd!=2||this.P.na||this.P.translate(this.P.scrollX+a,this.P.scrollY);this.Fd=a;this.position();vi(this.P)}this.wd&&uf(this.g,this.wd)};function xg(a){return a.g.X?a.g.X.isVisible():!1};function Qj(a){Qj.i.constructor.call(this,a)}H(Qj,Jj);g=Qj.prototype;g.Up=function(a){if(this.isVisible()){var b=this.g.Db,c=b.Od(),d=bi(b);b=ai(b);typeof a.y=="number"&&(this.g.scrollY=-(c.top+(c.height-d.height)*a.y));this.g.translate(this.g.scrollX+b.left,this.g.scrollY+b.top)}};
g.position=function(){if(this.isVisible()&&this.P.isVisible()){var a=bi(this.P.Db);this.Tj=a.height;var b=this.Fd-this.pa;a=a.height-2*this.pa;var c=this.Bd==3,d=b+this.pa;d=["M "+(c?d:0)+",0"];d.push("h",c?-b:b);d.push("a",this.pa,this.pa,0,0,c?0:1,c?-this.pa:this.pa,this.pa);d.push("v",Math.max(0,a));d.push("a",this.pa,this.pa,0,0,c?0:1,c?this.pa:-this.pa,this.pa);d.push("h",c?b:-b);d.push("z");this.Qa.setAttribute("d",d.join(" "));this.isVisible()?(c=this.P.Db,b=ai(c),a=bi(c),c=$h(c),c=this.P.Gb==
this.Bd?this.P.na?this.Bd==2?c.width:a.width-this.Fd:this.Bd==2?0:a.width:this.Bd==2?0:a.width+b.left-this.Fd):c=0;b=this.Fd;a=this.Tj;this.l.setAttribute("width",b);this.l.setAttribute("height",a);xi(this.g,b,a);this.l.tagName=="svg"?kc(this.l,"translate("+c+"px,0px)"):this.l.setAttribute("transform","translate("+c+",0)");if(b=this.g.X)b.Di(c,0),b.resize(),b.la&&b.la.setPosition(b.la.position.x,b.la.position.y),b.Y&&b.Y.setPosition(b.Y.position.x,b.Y.position.y)}};
g.An=function(){var a=this.g.X;a.Y&&a.Y.set(0,!0)};g.jq=function(a){var b=db(a);if(b.y){var c=this.g.Db,d=c.Od();b=bi(c).top-d.top+b.y;c=this.g.X;c.Y&&c.Y.set(b,!0);Rg();Fc()}a.preventDefault();a.stopPropagation()};
function Nj(a,b,c){a.g.scale=a.P.scale;for(var d=a.Be,e=a.o?d:d+a.sf,f=0,h;h=b[f];f++)if(h.type=="block"){h=h.block;for(var k=mb(h,!1),l=0,m;m=k[l];l++)m.Bb=!0;h.W();l=h.O();k=fg(h);m=h.s?e-a.sf:e;h.moveBy(m,d);var n=a,v=h,w=k,F=f;m=y(ac,{"fill-opacity":0,x:a.o?m-k.width:m,y:d,height:w.height,width:w.width},null);m.Ub=v;Qe(m);n.g.ra.insertBefore(m,v.O());v.um=m;n.ji[F]=m;n=a;n.Ga.push(t(l,"mousedown",null,Pj(n,h)));n.Ga.push(t(m,"mousedown",null,Pj(n,h)));n.Ga.push(Cb(l,"mouseenter",h,h.uh));n.Ga.push(Cb(l,
"mouseleave",h,h.Cg));n.Ga.push(Cb(m,"mouseenter",h,h.uh));n.Ga.push(Cb(m,"mouseleave",h,h.Cg));d+=k.height+c[f]}else h.type=="button"&&(k=a,l=h.button,m=e,n=d,v=l.ta(),l.moveTo(m,n),l.show(),k.Ga.push(t(v,"mousedown",k,k.rd)),k.If.push(l),d+=h.button.height+c[f])}g.wm=function(){if(!this.l||this.Hd||!this.isVisible())return null;var a=this.l.getBoundingClientRect(),b=a.left;return this.Bd==2?new ya(-1E9,1E9,-1E9,b+a.width):new ya(-1E9,1E9,b,1E9)};B(Rc,"default",Qj);
function Ki(a){this.g=a;this.id="zoomControls";this.Xc=this.Zg=this.xf=this.Fk=this.Ek=this.Gk=null}g=Ki.prototype;g.Ec=32;g.Yc=32;g.oh=2;g.hh=11;g.Cf=20;g.Ti=20;g.l=null;g.Pc=0;g.Uc=0;g.kg=!1;
g.ta=function(){this.l=y(Wb,{},null);var a=String(Math.random()).substring(2);this.Zg=y(Wb,{"class":"blocklyZoom"},this.l);var b=y(Pb,{id:"blocklyZoomoutClipPath"+a},this.Zg);y(ac,{width:32,height:32},b);y(Xb,{width:96,height:124,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+a+")"},this.Zg).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.ie+"sprites.png");this.Fk=t(this.Zg,"mousedown",null,this.Xn.bind(this,-1));this.xf=y(Wb,{"class":"blocklyZoom"},this.l);b=y(Pb,
{id:"blocklyZoominClipPath"+a},this.xf);y(ac,{width:32,height:32},b);y(Xb,{width:96,height:124,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+a+")"},this.xf).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.ie+"sprites.png");this.Ek=t(this.xf,"mousedown",null,this.Xn.bind(this,1));this.g.Ja()&&(this.Xc=y(Wb,{"class":"blocklyZoom"},this.l),b=y(Pb,{id:"blocklyZoomresetClipPath"+a},this.Xc),y(ac,{width:32,height:32},b),y(Xb,{width:96,height:124,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+
a+")"},this.Xc).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.ie+"sprites.png"),this.Gk=t(this.Xc,"mousedown",null,this.Rp.bind(this)));return this.l};g.ba=function(){Eb(this.g.Zb,{component:this,weight:2,Fc:[Kb]});this.kg=!0};g.dispose=function(){Fb(this.g.Zb,"zoomControls");this.l&&A(this.l);this.Gk&&u(this.Gk);this.Ek&&u(this.Ek);this.Fk&&u(this.Fk)};
g.Se=function(){var a=this.oh+2*this.Yc;this.Xc&&(a+=this.hh+this.Yc);return new ya(this.Uc,this.Uc+a,this.Pc,this.Pc+this.Ec)};
g.position=function(a,b){if(this.kg){var c=Gj(a),d=this.oh+2*this.Yc;this.Xc&&(d+=this.hh+this.Yc);var e=c.vertical;a=Hj(Fj(c,new Ga(this.Ec,d),this.Ti,this.Cf,a,this.g),this.Cf,e===0?1:0,b);e===0?(e=this.oh+this.Yc,this.xf.setAttribute("transform","translate(0, "+e+")"),this.Xc&&this.Xc.setAttribute("transform","translate(0, "+(e+this.hh+this.Yc)+")")):(e=this.Xc?this.hh+this.Yc:0,this.xf.setAttribute("transform","translate(0, "+e+")"),this.Zg.setAttribute("transform","translate(0, "+(e+this.oh+
this.Yc)+")"));this.Uc=a.top;this.Pc=a.left;this.l.setAttribute("transform","translate("+this.Pc+","+this.Uc+")")}};g.Xn=function(a,b){Gc(this.g);Bi(this.g,a);Rj(this);qb=null;b.stopPropagation();b.preventDefault()};
g.Rp=function(a){Gc(this.g);var b=Math.log(this.g.options.oa.Fn/this.g.scale)/Math.log(this.g.options.oa.zn),c=this.g;z(c.ra,"blocklyCanvasTransitioning");z(c.Cc,"blocklyCanvasTransitioning");Bi(this.g,b);b=this.g;if(b.Ja()){c=b.zb();var d=(c.scrollWidth-c.Ka)/2,e=(c.scrollHeight-c.Sa)/2;d=-d-c.scrollLeft;e=-e-c.scrollTop;b.scroll(d,e)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.");setTimeout(this.g.gp.bind(this.g),500);Rj(this);qb=null;
a.stopPropagation();a.preventDefault()};function Rj(a){a=new (G("click"))(null,a.g.id,"zoom_controls");D(a)}Yd([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]);var Sj={am:"\u12a0\u121b\u122d\u129b",ar:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",be:"\u0431\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0456","be-tarask":"Tara\u0161kievica",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",bn:"\u09ac\u09be\u0982\u09b2\u09be",br:"Brezhoneg",ca:"Catal\u00e0",cs:"\u010cesky",da:"Dansk",de:"Deutsch",el:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",en:"English",eo:"Esperanto",es:"Espa\u00f1ol",eu:"Euskara",fa:"\u0641\u0627\u0631\u0633\u06cc",
fi:"Suomi",fo:"F\u00f8royskt",fr:"Fran\u00e7ais",gl:"Galego",ha:"Hausa",he:"\u05e2\u05d1\u05e8\u05d9\u05ea",hi:"\u0939\u093f\u0928\u094d\u0926\u0940",hr:"Hrvatski",hu:"Magyar",hy:"\u0570\u0561\u0575\u0565\u0580\u0567\u0576",ia:"Interlingua",id:"Bahasa Indonesia",ig:"As\u1ee5s\u1ee5 Igbo",is:"\u00cdslenska",it:"Italiano",ja:"\u65e5\u672c\u8a9e",kab:"Taqbaylit",kn:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",ko:"\ud55c\uad6d\uc5b4",lt:"Lietuvi\u0173",lv:"Latvie\u0161u",ms:"Bahasa Melayu",my:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c",
nb:"Norsk (bokm\u00e5l)",nl:"Nederlands, Vlaams",pl:"Polski",pms:"Piemont\u00e8is",pt:"Portugu\u00eas","pt-br":"Portugu\u00eas Brasileiro",ro:"Rom\u00e2n\u0103",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",sc:"Sardu",sk:"Sloven\u010dina",sl:"Sloven\u0161\u010dina",sq:"Shqip",sr:"\u0421\u0440\u043f\u0441\u043a\u0438","sr-latn":"Srpski",sv:"Svenska",th:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",ti:"\u1275\u130d\u122d\u129b",tr:"T\u00fcrk\u00e7e",uk:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",
ur:"\u0627\u064f\u0631\u062f\u064f\u0648\u202c",vi:"Ti\u1ebfng Vi\u1ec7t",yo:"\u00c8d\u00e8 Yor\u00f9b\u00e1","zh-hans":"\u7b80\u4f53\u4e2d\u6587","zh-hant":"\u6b63\u9ad4\u4e2d\u6587"},Tj=window.BlocklyGamesLang,Uj=window.BlocklyGamesLanguages,Vj=["ar","fa","he","ur"].includes(Tj),Wj=/\.html$/.test(window.location.pathname),T=document.getElementById.bind(document);
function Xj(a){try{if(a.lineno||a.colno){var b=Date.now();if(!(Xj.Qm+1E4>b)){Xj.Qm=b;var c=new XMLHttpRequest,d="error="+encodeURIComponent((a.error&&a.error.stack||a.message+" "+a.filename+" "+a.lineno+":"+a.colno).trim())+"&url="+encodeURIComponent(window.location);c.open("POST","/scripts/errorReporter.py");c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");c.send(d);console.log("Error reported.")}}}catch(e){console.log(a.error)}}Xj.Qm=0;Wj||window.addEventListener("error",Xj);
function Yj(a){var b=Math,c=b.floor,d=Number;var e=(e=window.location.search.match(RegExp("[?&]level=([^&]+)")))?decodeURIComponent(e[1].replace(/\+/g,"%20")):"NaN";b=c.call(b,d(e));return isNaN(b)?1:Math.max(1,Math.min(b,a))}var Zj=10,ak=Yj(Zj);
function bk(a){document.title=U("Games.name",!0)+(a&&" : ")+a;document.dir=Vj?"rtl":"ltr";document.head.parentElement.setAttribute("lang",Tj);if(a=T("languageMenu")){for(var b=[],c=ba(Uj),d=c.next();!d.done;d=c.next())d=d.value,b.push([Sj[d],d]);b.sort(function(e,f){return e[0]>f[0]?1:e[0]<f[0]?-1:0});a.options.length=0;b=ba(b);for(c=b.next();!c.done;c=b.next())d=ba(c.value),c=d.next().value,d=d.next().value,c=new Option(c,d),d===Tj&&(c.selected=!0),a.options.add(c);a.options.length<=1&&(a.style.display=
"none")}for(a=1;a<=Zj;a++)T("level"+a);(a=document.querySelector('meta[name="viewport"]'))&&screen.availWidth<725&&a.setAttribute("content","width=725, initial-scale=.35, user-scalable=no")}function ck(a,b){if(!a)throw TypeError("Element not found: "+a);typeof a==="string"&&(a=T(a));a.addEventListener("click",b,!0);a.addEventListener("touchend",function(c){c.preventDefault();b(c)},!0)}function U(a,b){var c=window.BlocklyGamesMsg[a];c===void 0&&(c="[Unknown message: "+a+"]");return b?dk(c):c}
function dk(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};function ek(a,b){for(var c=0,d=0;d<b.length;d++)for(var e=b[d];e;)setTimeout(e.le.bind(e,a),c),e=nb(e),c+=10}function fk(a,b){if(od(a))Array.prototype.push.apply(b,mb(a,!1));else{a=ld(a,!1);for(var c=0;c<a.length;c++)fk(a[c],b)}}function gk(a){var b=[];a=a.Ca(!0);for(var c=0;c<a.length;c++)fk(a[c],b);return b}function hk(a,b){E(b);var c=a.shift();c&&(c.j?(c.dispose(!1,!0),setTimeout(hk,10,a,b)):hk(a,b));E(!1)}
wh.register({hb:function(){return q.UNDO},ya:function(a){return a.j.se.length>0?"enabled":"disabled"},sa:function(a){tf(a.j,!1)},Eb:"workspace",id:"undoWorkspace",weight:1});wh.register({hb:function(){return q.REDO},ya:function(a){return a.j.Bg.length>0?"enabled":"disabled"},sa:function(a){tf(a.j,!0)},Eb:"workspace",id:"redoWorkspace",weight:2});
wh.register({hb:function(){return q.CLEAN_UP},ya:function(a){return a.j.Ja()?a.j.Ca(!1).length>1?"enabled":"disabled":"hidden"},sa:function(a){a=a.j;a.$a(!1);E(!0);for(var b=a.Ca(!0),c=0,d=0,e;e=b[d];d++)if(e.Ja()){var f=e.ka();e.moveBy(-f.x,c-f.y);Oh(e);c=e.ka().y+fg(e).height+a.ua.C().jh}E(!1);a.$a(!0)},Eb:"workspace",id:"cleanWorkspace",weight:3});
wh.register({hb:function(){return q.COLLAPSE_ALL},ya:function(a){if(a.j.options.collapse){a=a.j.Ca(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(!c.isCollapsed())return"enabled";c=nb(c)}return"disabled"}return"hidden"},sa:function(a){ek(!0,a.j.Ca(!0))},Eb:"workspace",id:"collapseWorkspace",weight:4});
wh.register({hb:function(){return q.EXPAND_ALL},ya:function(a){if(a.j.options.collapse){a=a.j.Ca(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(c.isCollapsed())return"enabled";c=nb(c)}return"disabled"}return"hidden"},sa:function(a){ek(!1,a.j.Ca(!0))},Eb:"workspace",id:"expandWorkspace",weight:5});
wh.register({hb:function(a){if(a.j)return a=gk(a.j).length,a==1?q.DELETE_BLOCK:q.DELETE_X_BLOCKS.replace("%1",String(a))},ya:function(a){if(a.j)return gk(a.j).length>0?"enabled":"disabled"},sa:function(a){if(a.j){Qh(a.j);var b=gk(a.j),c=gb();b.length<2?hk(b,c):mf(q.DELETE_ALL_BLOCKS.replace("%1",b.length),function(d){d&&hk(b,c)})}},Eb:"workspace",id:"workspaceDelete",weight:6});
wh.register({hb:function(){return q.DUPLICATE_BLOCK},ya:function(a){a=a.block;return!a.Bb&&od(a)&&a.Ja()?(sf(a.j)?rf(a.j,lb(a,!0)):1)?"enabled":"disabled":"hidden"},sa:function(a){if(a.block){a=a.block;var b=Ai,c=hj;kj(a);zi(a.j);Ai=b;hj=c}},Eb:"block",id:"blockDuplicate",weight:1});
wh.register({hb:function(a){return a.block.Xb?q.REMOVE_COMMENT:q.ADD_COMMENT},ya:function(a){a=a.block;return Ka||a.Bb||!a.j.options.Wo||a.isCollapsed()||!a.Ob()?"hidden":"enabled"},sa:function(a){a=a.block;a.Xb?a.mf(null):a.mf("")},Eb:"block",id:"blockComment",weight:2});
wh.register({hb:function(a){return Mf(a.block)?q.EXTERNAL_INPUTS:q.INLINE_INPUTS},ya:function(a){a=a.block;if(!a.Bb&&a.Ja()&&!a.isCollapsed())for(var b=1;b<a.u.length;b++)if(a.u[b-1].type!=3&&a.u[b].type!=3)return"enabled";return"hidden"},sa:function(a){a.block.oe(!Mf(a.block))},Eb:"block",id:"blockInline",weight:3});
wh.register({hb:function(a){return a.block.isCollapsed()?q.EXPAND_BLOCK:q.COLLAPSE_BLOCK},ya:function(a){a=a.block;return!a.Bb&&a.Ja()&&a.j.options.collapse?"enabled":"hidden"},sa:function(a){a.block.le(!a.block.isCollapsed())},Eb:"block",id:"blockCollapseExpand",weight:4});
wh.register({hb:function(a){return a.block.isEnabled()?q.DISABLE_BLOCK:q.ENABLE_BLOCK},ya:function(a){a=a.block;return!a.Bb&&a.j.options.disable&&a.Ob()?kh(a)?"disabled":"enabled":"hidden"},sa:function(a){a=a.block;var b=Wc;b||E(!0);a.Ac(!a.isEnabled());b||E(!1)},Eb:"block",id:"blockDisable",weight:5});
wh.register({hb:function(a){var b=a.block;a=mb(b,!1).length;(b=nb(b))&&(a-=mb(b,!1).length);return a==1?q.DELETE_BLOCK:q.DELETE_X_BLOCKS.replace("%1",String(a))},ya:function(a){return!a.block.Bb&&od(a.block)?"enabled":"hidden"},sa:function(a){E(!0);a.block&&jj(a.block);E(!1)},Eb:"block",id:"blockDelete",weight:6});
wh.register({hb:function(){return q.HELP},ya:function(a){a=a.block;return(typeof a.$e=="function"?a.$e():a.$e)?"enabled":"hidden"},sa:function(a){a.block.showHelp()},Eb:"block",id:"blockHelp",weight:7});function V(a,b){return" "+a+","+b+" "}function ik(a,b){return" "+a+b.join("")}function jk(a,b){return" M "+a+","+b+" "}function N(a,b){return" m "+a+","+b+" "}function kk(a,b){return" l "+a+","+b+" "}function O(a,b){return" "+a+" "+b+" "}function lk(a,b,c){return"a "+b+" "+b+" "+a+c};function mk(){this.mc=0;this.Lo=3;this.Hb=5;this.Il=8;this.cb=10;this.Ul=this.Hb;this.Gf=15;this.Ee=5;this.rh=8;this.Go=15;this.Ui=4;this.Fo=12;this.lo=16;this.jo=this.Al=this.Gf;this.pa=8;this.Po=this.Df=15;this.Sl=0;this.Tl=20;this.Zn=4;this.Qo=this.Hb;this.Ro=this.cb;this.ao=this.Hb;this.$n=this.cb;this.yl=!1;this.No=15;this.Oo=100;this.Mo=15;this.jh=24;this.no=14.5;this.mo=this.Gf+11;this.po=2;this.oo=this.jh;this.Rl=N(0,0);this.Co=12;this.Do=6;this.Bf=11;this.ye="normal";this.xe="sans-serif";
this.El=this.eh=-1;this.dh=4;this.Bl=16;this.zf=5;this.qo="#fff";this.Si=!Ka&&!La;this.Cl=this.Bl;this.to=this.so=this.Dl=!1;this.vo=this.zf;this.Af=12;this.uo="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";
this.zi=String(Math.random()).substring(2);this.Bj="";this.Cj=null;this.pm="";this.Rf=this.km=this.rj=null;this.zl="#cc0a0a";this.Gl="#4286f4";this.bh=100;this.Vl=5;this.ah=10;this.ho=2;this.io=4;this.Ao="#000000";this.Fl=.2;this.Ql={Jo:1,Ce:2}}g=mk.prototype;
g.ba=function(){this.ze=this.gk();this.Ce=this.hk();this.De=this.jk();this.Vi=this.ik();var a=this.pa;this.gh={width:a,height:a,Mk:lk("0 0,0",a,V(-a,a)),wi:lk("0 0,0",a,V(a,a))};a=this.pa;this.Ef={vl:N(0,a)+lk("0 0,1",a,V(a,-a)),fq:lk("0 0,1",a,V(a,a)),Uo:lk("0 0,1",a,V(-a,a)),ej:lk("0 0,1",a,V(-a,-a)),Sp:a}};g.Ig=function(){this.yh=Object.create(null);var a=oc("Hg",this.Bf+"pt",this.ye,this.xe);this.eh=a.height;this.El=a.Ib};
function Rh(a,b){var c="auto_"+b;a.yh[c]||(a.yh[c]=nk({colourPrimary:b}));return{style:a.yh[c],name:c}}function Nh(a,b){return a.yh[b||""]||(b&&b.indexOf("auto_")==0?Rh(a,b.substring(5)).style:nk({colourPrimary:"#000000"}))}function nk(a){var b={};a&&gd(b,a);a=ob(b.colourPrimary||"#000");b.Jd=a.gg;b.colourSecondary?a=ob(b.colourSecondary).gg:(a=b.Jd,a=ta("#fff",a,.6)||a);b.Ch=a;b.colourTertiary?a=ob(b.colourTertiary).gg:(a=b.Jd,a=ta("#fff",a,.3)||a);b.Le=a;b.uc=b.hat||"";return b}
g.dispose=function(){this.Cj&&A(this.Cj);this.rj&&A(this.rj);this.km&&A(this.km);this.Rf=null};g.gk=function(){var a=this.Co,b=this.Do;return{height:a,width:b,path:" l"+[V(b,a/4),V(-b*2,a/2),V(b,a/4)].join("")}};g.jk=function(){var a=this.No,b=this.Oo;return{height:a,width:b,path:ik("c",[V(30,-a),V(70,-a),V(b,0)])}};
g.ik=function(){function a(f){f=f?-1:1;var h=-f,k=c/2;return ik("c",[V(0,f*(k+2.5)),V(-b,h*(k+.5)),V(-b,f*k)])+ik("s",[V(b,h*2.5),V(b,f*k)])}var b=this.rh,c=this.Gf,d=a(!0),e=a(!1);return{type:this.Ql.Jo,width:b,height:c,Qb:e,yg:d}};g.hk=function(){function a(h){return" l"+[V(h*d,c),V(h*3,0),V(h*d,-c)].join("")}var b=this.Go,c=this.Ui,d=(b-3)/2,e=a(1),f=a(-1);return{type:this.Ql.Ce,width:b,height:c,ud:e,qn:f}};
function ag(a,b){switch(b.type){case 1:case 2:return a.Vi;case 4:case 3:return a.Ce;default:throw Error("Unknown connection type");}}
g.ta=function(a,b,c){c=this.Kj(c);b="blockly-renderer-style-"+b;this.Rf=document.getElementById(b);c=c.join("\n");if(this.Rf)this.Rf.firstChild.textContent=c;else{var d=document.createElement("style");d.id=b;d.appendChild(document.createTextNode(c));document.head.insertBefore(d,document.head.firstChild);this.Rf=d}a=y(Qb,{},a);b=y(Vb,{id:"blocklyEmbossFilter"+this.zi},a);y(Sb,{"in":"SourceAlpha",stdDeviation:1,result:"blur"},b);c=y(Ub,{"in":"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,
"lighting-color":"white",result:"specOut"},b);y(Tb,{x:-5E3,y:-1E4,z:2E4},c);y(Rb,{"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},b);y(Rb,{"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},b);this.Bj=b.id;this.Cj=b;a=y($b,{id:"blocklyDisabledPattern"+this.zi,patternUnits:"userSpaceOnUse",width:10,height:10},a);y(ac,{width:10,height:10,fill:"#aaa"},a);y(Zb,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},a);this.pm=a.id;this.rj=a};
g.Kj=function(a){return[a+" .blocklyText, ",a+" .blocklyFlyoutLabelText {","font: "+this.ye+" "+this.Bf+"pt "+this.xe+";","}",a+" .blocklyText {","fill: #fff;","}",a+" .blocklyNonEditableText>rect,",a+" .blocklyEditableText>rect {","fill: "+this.qo+";","fill-opacity: .6;","stroke: none;","}",a+" .blocklyNonEditableText>text,",a+" .blocklyEditableText>text {","fill: #000;","}",a+" .blocklyFlyoutLabelText {","fill: #000;","}",a+" .blocklyText.blocklyBubbleText {","fill: #000;","}",a+" .blocklyEditableText:not(.editing):hover>rect {",
"stroke: #fff;","stroke-width: 2;","}",a+" .blocklyHtmlInput {","font-family: "+this.xe+";","font-weight: "+this.ye+";","}",a+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",a+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",a+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",a+" .blocklyReplaceable .blocklyPathLight,",a+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",a+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.Fl+
";","stroke: none;","}"]};function ok(a){this.Je=this.S=this.type=this.height=this.width=0;this.h=a;this.Pb=this.h.Df};function pk(a,b){pk.i.constructor.call(this,a);this.fb=b;this.shape=ag(this.h,b);this.Wd=!!this.shape.isDynamic;this.type|=1024}H(pk,ok);function qk(a,b){qk.i.constructor.call(this,a,b);this.type|=8192;this.height=this.Wd?0:this.shape.height;this.Tb=this.width=this.Wd?0:this.shape.width;this.xb=this.h.Ee;this.Nf=0}H(qk,pk);function rk(a,b){rk.i.constructor.call(this,a,b);this.type|=2048;this.height=this.shape.height;this.width=this.shape.width}H(rk,pk);
function sk(a,b){sk.i.constructor.call(this,a,b);this.type|=4096;this.height=this.shape.height;this.width=this.shape.width}H(sk,pk);function tk(a,b){tk.i.constructor.call(this,a,b.connection);this.type|=128;this.input=b;this.align=b.align;(this.bd=b.connection&&b.connection.F()?b.connection.F():null)?(a=fg(this.bd),this.Mf=a.width,this.Eh=a.height):this.Eh=this.Mf=0;this.xb=this.Nf=0}H(tk,pk);
function uk(a,b){uk.i.constructor.call(this,a,b);this.type|=256;this.bd?(this.width=this.Mf,this.height=this.Eh):(this.height=this.h.mo,this.width=this.h.no);this.Me=this.Wd?this.shape.height(this.height):this.shape.height;this.oc=this.Wd?this.shape.width(this.height):this.shape.width;this.bd||(this.width+=this.oc*(this.Wd?2:1));this.xb=this.Wd?this.shape.xb(this.Me):this.h.Ee;this.Nf=this.Wd?this.shape.Nf(this.oc):0}H(uk,tk);
function vk(a,b){vk.i.constructor.call(this,a,b);this.type|=512;this.height=this.bd?this.Eh+this.h.Sl:this.h.oo;this.width=this.h.Po+this.shape.width}H(vk,tk);function wk(a,b){wk.i.constructor.call(this,a,b);this.type|=64;this.height=this.bd?this.Eh-this.h.Ee-this.h.Hb:this.shape.height;this.width=this.shape.width+this.h.po;this.xb=this.h.Ee;this.Me=this.shape.height;this.oc=this.shape.width}H(wk,tk);function xk(a,b){xk.i.constructor.call(this,a);this.icon=b;this.isVisible=b.isVisible();this.type|=4;a=b.Zq();this.height=a.height;this.width=a.width}H(xk,ok);function yk(a){yk.i.constructor.call(this,a);this.type|=524288;this.height=this.h.ze.height;this.width=this.h.ze.width}H(yk,ok);function zk(a,b){zk.i.constructor.call(this,a);this.sm=b;this.Ob=b.yf;this.ip=b.ym();this.type|=1;a=this.sm.getSize();this.height=a.height;this.width=a.width}H(zk,ok);
function Ak(a){Ak.i.constructor.call(this,a);this.type|=2;this.height=this.h.De.height;this.width=this.h.De.width;this.He=this.height}H(Ak,ok);function Bk(a,b){Bk.i.constructor.call(this,a);this.type=(b&&b!="left"?131072:32768)|16384;this.width=this.height=this.h.mc}H(Bk,ok);function Ck(a,b){Ck.i.constructor.call(this,a);this.type=(b&&b!="left"?262144:65536)|16384;this.width=this.h.pa;this.height=this.h.pa/2}H(Ck,ok);
function Dk(a,b){Dk.i.constructor.call(this,a);this.type|=40;this.width=b;this.height=this.h.Mo}H(Dk,ok);function Ek(a){this.type=1048576;this.elements=[];this.S=this.Ia=this.kc=this.minWidth=this.minHeight=this.width=this.height=0;this.Cm=this.Ye=this.Rj=this.Da=this.gd=!1;this.h=a;this.Pb=this.h.Df;this.align=null}Ek.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.");};function Fk(a){for(var b=a.elements.length-1,c;c=a.elements[b];b--)if(c.type&128)return c;return null}Ek.prototype.Ki=function(){return!0};Ek.prototype.Xf=function(){return!0};
function Gk(a){Gk.i.constructor.call(this,a);this.type|=2097152;this.He=this.Gc=0;this.wp=!1;this.connection=null}H(Gk,Ek);Gk.prototype.Sj=function(a){var b=(a.uc?a.uc==="cap":this.h.yl)&&!a.s&&!a.B,c=a.B&&a.B.F();return!!a.s||b||(c?nb(c)==a:!1)};
Gk.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&2?c=Math.max(c,e.He):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.Gc=this.He=c;this.kc=this.width};Gk.prototype.Ki=function(){return!1};Gk.prototype.Xf=function(){return!1};function Hk(a){Hk.i.constructor.call(this,a);this.type|=4194304;this.Dm=!1;this.connection=null;this.Ib=this.Tf=0}H(Hk,Ek);
Hk.prototype.Sj=function(a){return!!a.s||!!nb(a)};Hk.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&4096?c=Math.max(c,e.height):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.Tf=c;this.kc=this.width};Hk.prototype.Ki=function(){return!1};Hk.prototype.Xf=function(){return!1};
function Ik(a,b,c){Ik.i.constructor.call(this,a);this.type|=24;this.width=c;this.height=b;this.vm=!1;this.kc=0;this.elements=[new Dk(this.h,c)]}H(Ik,Ek);Ik.prototype.measure=function(){};function Jk(a){Jk.i.constructor.call(this,a);this.type|=8388608;this.fm=0}H(Jk,Ek);
Jk.prototype.measure=function(){this.width=this.minWidth;this.height=this.minHeight;for(var a=0,b=0,c;c=this.elements[b];b++)this.width+=c.width,c.type&128&&(c.type&512?a+=c.Mf:c.type&64&&c.Mf!=0&&(a+=c.Mf-c.oc)),c.type&8||(this.height=Math.max(this.height,c.height));this.fm=a;this.kc=this.width+a};Jk.prototype.Xf=function(){return!this.gd&&!this.Da};function Kk(a,b){this.V=b;this.ua=a;this.h=this.ua.C();this.s=b.s?new qk(this.h,b.s):null;this.cf=Mf(b)&&!b.isCollapsed();this.isCollapsed=b.isCollapsed();this.Cb=b.Cb();this.o=b.o;this.Ad=this.width=this.wf=this.height=0;this.rows=[];this.Lm=[];this.Gm=[];this.Fa=new Gk(this.h);this.qa=new Hk(this.h);this.Ji=this.Tb=0}g=Kk.prototype;
g.measure=function(){var a=!!this.V.B,b=(this.V.uc?this.V.uc==="cap":this.h.yl)&&!this.s&&!a,c=this.Fa.Sj(this.V)?Bk:Ck;this.Fa.elements.push(new c(this.h));b?(a=new Ak(this.h),this.Fa.elements.push(a),this.Fa.Gc=a.He):a&&(this.Fa.wp=!0,this.Fa.connection=new rk(this.h,this.V.B),this.Fa.elements.push(this.Fa.connection));this.V.u.length&&this.V.u[0].type==3&&!this.V.isCollapsed()?this.Fa.minHeight=this.h.Ro:this.Fa.minHeight=this.h.Qo;c=Bk;this.Fa.elements.push(new c(this.h,"right"));this.rows.push(this.Fa);
a=new Jk(this.h);this.Lm.push(a);c=dg(this.V);b=0;for(var d;d=c[b];b++){var e=new xk(this.h,d);this.isCollapsed&&d.Pq?this.Gm.push(e):a.elements.push(e)}d=null;for(b=0;c=this.V.u[b];b++)if(c.isVisible()){!d||c.type!=3&&d.type!=3&&(c.type!=1&&c.type!=5||this.cf)||(this.rows.push(a),a=new Jk(this.h),this.Lm.push(a));for(d=0;e=c.aa[d];d++)a.elements.push(new zk(this.h,e,c));this.Yl(c,a);d=c}this.isCollapsed&&(a.Cm=!0,a.elements.push(new yk(this.h)));(a.elements.length||a.Ye)&&this.rows.push(a);this.Ok();
this.rows.push(this.qa);this.Xl();a=this.rows;this.rows=[];for(b=0;b<a.length;b++)if(this.rows.push(a[b]),b!=a.length-1){c=this.rows;d=c.push;e=a[b];var f=a[b+1],h=new Ik(this.h,this.zm(e,f),this.width-this.Tb);e.Da&&(h.vm=!0);f.Da&&(h.gr=!0);d.call(c,h)}for(d=c=b=a=0;e=this.rows[d];d++)e.measure(),b=Math.max(b,e.width),e.Da&&(a=Math.max(a,e.width-Fk(e).width)),c=Math.max(c,e.kc);this.Ad=a;this.width=b;for(d=0;e=this.rows[d];d++)e.Da&&(e.Ad=this.Ad);this.wf=Math.max(b,c);this.s&&(this.Tb=this.s.width,
this.width+=this.s.width,this.wf+=this.s.width);this.Zi();this.tm()};g.Ok=function(){this.qa.Dm=!!this.V.A;this.qa.minHeight=this.V.u.length&&this.V.u[this.V.u.length-1].type==3?this.h.$n:this.h.ao;this.qa.Sj(this.V)?this.qa.elements.push(new Bk(this.h)):this.qa.elements.push(new Ck(this.h));this.qa.Dm&&(this.qa.connection=new sk(this.h,this.V.A),this.qa.elements.push(this.qa.connection));this.qa.elements.push(new Bk(this.h,"right"))};
g.Yl=function(a,b){this.cf&&a.type==1?(b.elements.push(new uk(this.h,a)),b.Rj=!0):a.type==3?(b.elements.push(new vk(this.h,a)),b.Da=!0):a.type==1?(b.elements.push(new wk(this.h,a)),b.gd=!0):a.type==5&&(b.minHeight=Math.max(b.minHeight,a.v()&&a.v().T?this.h.jo:this.h.Al),b.Ye=!0);b.align==null&&(b.align=a.align)};
g.Xl=function(){for(var a=0,b;b=this.rows[a];a++){var c=b.elements;b.elements=[];b.Ki()&&b.elements.push(new Dk(this.h,this.Nd(null,c[0])));if(c.length){for(var d=0;d<c.length-1;d++)b.elements.push(c[d]),b.elements.push(new Dk(this.h,this.Nd(c[d],c[d+1])));b.elements.push(c[c.length-1]);b.Xf()&&b.elements.push(new Dk(this.h,this.Nd(c[c.length-1],null)))}}};
g.Nd=function(a,b){if(!a&&b&&b.type&512)return this.h.Tl;if(a&&a.type&128&&!b){if(a.type&64)return this.h.mc;if(a.type&256)return this.h.cb;if(a.type&512)return this.h.mc}return a&&a.type&32768&&b&&(b.type&2048||b.type&4096)?b.Pb:a&&a.type&65536&&b&&(b.type&2048||b.type&4096)?b.Pb-this.h.pa:this.h.Hb};g.Zi=function(){for(var a=0,b;b=this.rows[a];a++)if(b.Da)Lk(this,b);else{var c=this.cg(b)-b.width;c>0&&Mk(b,c);b.type&6291456&&(b.kc=b.width)}};g.cg=function(){return this.width-this.Tb};
function Mk(a,b){a:{var c=0;for(var d;d=a.elements[c];c++)if(d.type&8){c=d;break a}c=null}a:{d=a.elements.length-1;for(var e;e=a.elements[d];d--)if(e.type&8){d=e;break a}d=null}if(a.gd||a.Da)a.kc+=b;a.align==-1?d.width+=b:a.align==0?(c.width+=b/2,d.width+=b/2):a.align==1?c.width+=b:d.width+=b;a.width+=b}function Lk(a,b){var c=Fk(b),d=b.width-c.width,e=a.Ad;d=e-d;d>0&&Mk(b,d);d=b.width;e=a.cg(b);c.width+=e-d;c.height=Math.max(c.height,b.height);b.width+=e-d;b.kc=Math.max(b.width,a.Ad+b.fm)}g.zm=function(){return this.h.Hb};
g.xm=function(a,b){return b.type&8?a.Ia+b.height/2:a.type&4194304?(a=a.Ia+a.height-a.Tf,b.type&4096?a+b.height/2:a-b.height/2):a.type&2097152?b.type&2?a.Gc-b.height/2:a.Gc+b.height/2:a.Ia+a.height/2};function Nk(a,b){for(var c=b.S,d=0,e;e=b.elements[d];d++)e.type&8&&(e.height=b.height),e.S=c,e.Je=a.xm(b,e),c+=e.width}
g.tm=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++)d.Ia=b,d.S=this.Tb,b+=d.height,a=Math.max(a,d.kc),Nk(this,d);this.s&&this.V.A&&this.V.A.isConnected()&&(a=Math.max(a,fg(this.V.A.F()).width));this.wf=a+this.Tb;this.height=b;this.Ji=this.Fa.Gc;this.qa.Ib=b-this.qa.Tf};function Ok(a,b){this.V=a;this.G=b;a.ka();this.Xh=this.U="";this.h=b.ua.C()}g=Ok.prototype;g.ac=function(){Pk(this);Qk(this);Rk(this);this.V.va.fl(this.U+"\n"+this.Xh);this.G.o&&this.V.va.Hj();Sk(this)};function Sk(a){a.V.height=a.G.height;a.V.width=a.G.wf}function Pk(a){for(var b=0,c;c=a.G.Gm[b];b++)c.icon.zp.setAttribute("display","none")}function Qk(a){a.zj();for(var b=1;b<a.G.rows.length-1;b++){var c=a.G.rows[b];c.Cm?a.Vf(c):c.Da?a.yj(c):c.gd?a.Aj(c):a.qm(c)}a.vj();a.xj()}
g.zj=function(){var a=this.G.Fa,b=a.elements,c=this.G.Fa;if(c.connection){var d=c.S+c.Pb;Fh(c.connection.fb,this.G.o?-d:d,0)}this.U+=N(a.S,this.G.Ji);for(c=0;d=b[c];c++)d.type&65536?this.U+=this.h.Ef.vl:d.type&262144?this.U+=this.h.Ef.fq:d.type&2048?this.U+=d.shape.ud:d.type&2?this.U+=this.h.De.path:d.type&8&&(this.U+=O("h",d.width));this.U+=O("v",a.height)};g.Vf=function(a){this.U+=this.h.ze.path+O("v",a.height-this.h.ze.height)};
g.Aj=function(a){var b=Fk(a);this.un(a);var c=typeof b.shape.Qb=="function"?b.shape.Qb(b.height):b.shape.Qb;this.U+=O("H",b.S+b.width)+c+O("v",a.height-b.Me)};g.yj=function(a){var b=Fk(a);this.U+=O("H",b.S+b.Pb+b.shape.width)+(b.shape.qn+O("h",-(b.Pb-this.h.gh.width))+this.h.gh.Mk)+O("v",a.height-2*this.h.gh.height)+this.h.gh.wi+O("H",a.S+a.width);this.xn(a)};g.qm=function(a){this.U+=O("V",a.Ia+a.height)};
g.vj=function(){var a=this.G.qa,b=a.elements;this.wn();for(var c=0,d="",e=b.length-1,f;f=b[e];e--)f.type&4096?d+=f.shape.qn:f.type&32768?d+=O("H",a.S):f.type&65536?d+=this.h.Ef.ej:f.type&262144?(d+=this.h.Ef.Uo,c=this.h.Ef.Sp):f.type&8&&(d+=O("h",f.width*-1));this.U+=O("V",a.Ib-c);this.U+=d};
g.xj=function(){var a=this.G.s;if(this.G.s){var b=this.G.Tb+this.G.s.Nf;Fh(this.V.s,this.G.o?-b:b,this.G.s.xb)}a&&(b=a.xb+a.height,a=typeof a.shape.yg=="function"?a.shape.yg(a.height):a.shape.yg,this.U+=O("V",b)+a);this.U+="z"};
function Rk(a){for(var b=0,c;c=a.G.rows[b];b++)for(var d=0,e;e=c.elements[d];d++)if(e.type&256)a.wj(e);else if(e.type&4||e.type&1){var f=a;if(e.type&1)var h=e.sm.O();else e.type&4&&(h=e.icon.zp);var k=e.Je-e.height/2,l=e.S,m="";f.G.o&&(l=-(l+e.width),e.ip&&(l+=e.width,m="scale(-1 1)"));e.type&4?(h.setAttribute("display","block"),h.setAttribute("transform","translate("+l+","+k+")"),e.icon.Xo()):h.setAttribute("transform","translate("+l+","+k+")"+m);f.G.Cb&&h.setAttribute("display","none")}}
g.wj=function(a){var b=a.height,c=a.xb;this.Xh+=jk(a.S+a.oc,a.Je-b/2)+O("v",c)+a.shape.Qb+O("v",b-(a.Me+c))+O("h",a.width-a.oc)+O("v",-b)+"z";this.vn(a)};g.vn=function(a){var b=a.Je-a.height/2;if(a.fb){var c=a.S+a.oc+a.Nf;this.G.o&&(c*=-1);Fh(a.fb,c,b+a.xb)}};g.xn=function(a){var b=Fk(a);if(b.fb){var c=a.S+a.Ad+b.Pb;this.G.o&&(c*=-1);Fh(b.fb,c,a.Ia)}};g.un=function(a){var b=Fk(a);if(b.fb){var c=a.S+a.width;this.G.o&&(c*=-1);Fh(b.fb,c,a.Ia)}};
g.wn=function(){var a=this.G.qa;if(a.connection){var b=a.connection,c=b.S;Fh(b.fb,this.G.o?-c:c,a.Ib)}};function Tk(a,b,c,d){var e=a?a.j.id:void 0;d&&d.getType()=="workspace"&&(e=d.N.id);Tk.i.constructor.call(this,e);this.ga=a?a.id:null;this.hn=c;this.cn=d;this.xc=b}H(Tk,Pd);Tk.prototype.type="marker_move";Tk.prototype.R=function(){var a=Tk.i.R.call(this);a.isCursor=this.xc;a.blockId=this.ga;a.oldNode=this.hn;a.newNode=this.cn;return a};Tk.prototype.M=function(a){Tk.i.M.call(this,a);this.xc=a.isCursor;this.ga=a.blockId;this.hn=a.oldNode;this.cn=a.newNode};B(Mc,"marker_move",Tk);function wi(a,b,c){this.g=a;this.lk=c;this.xg=null;this.h=b;this.Oe=null;a=this.xc()?this.h.zl:this.h.Gl;this.Jb=c.jj||a}g=wi.prototype;g.O=function(){return this.l};g.dg=function(){return this.lk};g.xc=function(){return this.lk.type=="cursor"};
g.ta=function(){var a=this.xc()?"blocklyCursor":"blocklyMarker";this.l=y(Wb,{"class":a},null);this.Rc=y(Wb,{width:this.h.bh,height:this.h.Vl},this.l);this.nd=y(ac,{width:this.h.bh,height:this.h.Vl},this.Rc);this.ae=y(ac,{"class":"blocklyVerticalMarker",rx:10,ry:10},this.Rc);this.$d=y(Zb,{transform:""},this.Rc);this.Qc=y(Zb,{transform:"",fill:"none","stroke-width":this.h.io},this.Rc);this.jb();this.xc()&&(a={attributeType:"XML",attributeName:"fill",dur:"1s",values:this.Jb+";transparent;transparent;",
repeatCount:"indefinite"},y(Nb,a,this.nd),y(Nb,a,this.$d),a.attributeName="stroke",y(Nb,a,this.Qc));return this.l};function Uk(a,b){a.xc()?(a.xg&&a.xg.Tc(null),b.Tc(a.O())):(a.xg&&a.xg.yd(null),b.yd(a.O()));a.xg=b}
g.ac=function(a,b){if(b){this.h=this.g.ua.C();var c=this.xc()?this.h.zl:this.h.Gl;this.Jb=this.lk.jj||c;this.nd.setAttribute("fill",this.Jb);this.ae.setAttribute("stroke",this.Jb);this.$d.setAttribute("fill",this.Jb);this.Qc.setAttribute("stroke",this.Jb);this.xc()&&(c=this.Jb+";transparent;transparent;",this.nd.firstChild.setAttribute("values",c),this.$d.firstChild.setAttribute("values",c),this.Qc.firstChild.setAttribute("values",c));c=b.N.type;if(b.getType()=="block")Vk(this,b);else if(b.getType()==
"output")Vk(this,b);else if(c==1){var d=b.N;c=d.v();var e=d.ge.x,f=d.ge.y;d=jk(0,0)+ag(this.h,d).Qb;this.$d.setAttribute("d",d);this.$d.setAttribute("transform","translate("+e+","+f+")"+(this.g.o?" scale(-1 1)":""));this.Oe=this.$d;Uk(this,c);Wk(this)}else if(c==3)f=b.N,c=f.v(),e=0,f=f.ge.y,d=fg(c).width,this.g.o&&(e=-d),Xk(this,e,f,d),Uk(this,c),Wk(this);else if(b.getType()=="previous")Vk(this,b);else if(b.getType()=="field")c=b.N,e=c.getSize().width,f=c.getSize().height,Yk(this,0,0,e,f),Uk(this,
c),Wk(this);else if(b.getType()=="workspace")e=b.Vn,c=e.x,e=e.y,this.g.o&&(c-=this.h.bh),Xk(this,c,e,this.h.bh),Uk(this,this.g),Wk(this);else if(b.getType()=="stack"){c=b.N;f=fg(c);e=f.width+this.h.ah;f=f.height+this.h.ah;var h=d=-this.h.ah/2,k=-this.h.ah/2;this.g.o&&(h=-(e+d));Yk(this,h,k,e,f);Uk(this,c);Wk(this)}c=b.v();a=new (G("marker_move"))(c,this.xc(),a,b);D(a);a=this.Oe.childNodes[0];a!==void 0&&a.beginElement&&a.beginElement()}else this.jb()};
function Vk(a,b){b=b.v();var c=b.width,d=b.height,e=d*.75,f=a.h.ho;if(b.B){var h=ag(a.h,b.B);a.Qc.setAttribute("d",N(-f,e)+O("V",-f)+O("H",a.h.Df)+h.ud+O("H",c+f*2)+O("V",e))}else b.s?(h=ag(a.h,b.s),a.Qc.setAttribute("d",N(c,0)+O("h",-(c-h.width))+O("v",a.h.Ee)+h.Qb+O("V",d)+O("H",c))):a.Qc.setAttribute("d",N(-f,e)+O("V",-f)+O("H",c+f*2)+O("V",e));a.g.o&&a.$f(a.Qc);a.Oe=a.Qc;Uk(a,b);Wk(a)}function Wk(a){a.jb();a.Oe.style.display=""}
function Xk(a,b,c,d){a.nd.setAttribute("x",b);a.nd.setAttribute("y",c);a.nd.setAttribute("width",d);a.Oe=a.nd}function Yk(a,b,c,d,e){a.ae.setAttribute("x",b);a.ae.setAttribute("y",c);a.ae.setAttribute("width",d);a.ae.setAttribute("height",e);a.Oe=a.ae}g.$f=function(a){a.setAttribute("transform","scale(-1 1)")};g.jb=function(){this.nd.style.display="none";this.ae.style.display="none";this.$d.style.display="none";this.Qc.style.display="none"};g.dispose=function(){this.l&&A(this.l)};function Zk(a,b,c){this.Of=c;this.Dc=a;this.Ea=y(Zb,{"class":"blocklyPath"},this.Dc);this.style=b;this.kk=this.Sf=null}g=Zk.prototype;g.fl=function(a){this.Ea.setAttribute("d",a)};g.Hj=function(){this.Ea.setAttribute("transform","scale(-1 1)")};g.Tc=function(a){a?(this.Dc.appendChild(a),this.Sf=a):this.Sf=null};g.yd=function(a){a?(this.Sf?this.Dc.insertBefore(a,this.Sf):this.Dc.appendChild(a),this.kk=a):this.kk=null};
g.Na=function(a){this.Ea.setAttribute("stroke",this.style.Le);this.Ea.setAttribute("fill",this.style.Jd);this.Mn(a.T);this.wl(!a.isEnabled()||kh(a))};g.pe=function(a){this.style=a};function $f(a,b,c){c?z(a.Dc,b):hc(a.Dc,b)}g.Ln=function(a){a?this.Ea.setAttribute("filter","url(#"+this.Of.Bj+")"):this.Ea.setAttribute("filter","none")};g.Mn=function(a){a&&(this.Ea.setAttribute("stroke","none"),this.Ea.setAttribute("fill",this.style.Ch))};
g.wl=function(a){$f(this,"blocklyDisabled",a);a&&this.Ea.setAttribute("fill","url(#"+this.Of.pm+")")};function $k(a){this.name=a;this.Kk=this.h=null}g=$k.prototype;g.bc=function(){return this.name+"-renderer"};g.ba=function(a,b){this.h=this.fk();b&&(this.Kk=b,gd(this.h,b));this.h.Ig(a);this.h.ba()};g.ta=function(a,b){this.h.ta(a,this.name+"-"+b.name,"."+this.bc()+"."+b.bc())};g.Sk=function(a,b){var c=this.C();c.dispose();this.h=this.fk();this.Kk&&gd(this.h,this.Kk);this.h.zi=c.zi;this.h.Ig(b);this.h.ba();this.ta(a,b)};g.dispose=function(){this.h&&this.h.dispose()};g.fk=function(){return new mk};
g.Wm=function(a){return new Kk(this,a)};g.Um=function(a,b){return new Ok(a,b)};g.Vm=function(a,b){return new Zk(a,b,this.h)};g.C=function(){return this.h};g.W=function(a){var b=this.Wm(a);b.measure();this.Um(a,b).ac()};function al(){al.i.constructor.call(this);this.Si=!1;this.La=1;this.Eo=30;this.Sl=-this.Ui/2}H(al,mk);al.prototype.Kj=function(a){return al.i.Kj.call(this,a).concat([a+" .blocklyInsertionMarker>.blocklyPathLight,",a+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.Fl+";","stroke: none;","}"])};function bl(a){this.G=a;this.lg=this.D="";this.Ma=this.G.o;a=a.ua;this.h=a.C();this.Ab=a.Ab;this.pb=this.Ab.OFFSET;this.Jk=this.Ab.Io;this.bf=this.Ab.Bo;this.Ag=this.Ab.Vi;this.Hp=this.Ab.Ce;this.Yp=this.Ab.De;this.Pm=this.Ab.ze}bl.prototype.Vf=function(a){this.G.o&&(this.D+=this.Pm.ud+O("v",a.height-this.Pm.height-this.pb))};function cl(a,b){var c=b.S+b.width-a.pb;b.vm&&(a.D+=O("H",c));a.Ma&&(a.D+=O("H",c),b.height>a.pb&&(a.D+=O("V",b.Ia+b.height-a.pb)))};function dl(a,b){dl.i.constructor.call(this,a,b);this.bd&&(this.width+=this.h.La,this.height+=this.h.La)}H(dl,uk);function el(a,b){el.i.constructor.call(this,a,b);this.bd&&(this.height+=this.h.La)}H(el,vk);function fl(a,b){fl.i.constructor.call(this,a,b)}H(fl,Kk);g=fl.prototype;g.Ok=function(){fl.i.Ok.call(this);this.V.u.length&&this.V.u[this.V.u.length-1].type==3||(this.qa.minHeight=this.h.Hb-this.h.La)};g.Yl=function(a,b){this.cf&&a.type==1?(b.elements.push(new dl(this.h,a)),b.Rj=!0):a.type==3?(b.elements.push(new el(this.h,a)),b.Da=!0):a.type==1?(b.elements.push(new wk(this.h,a)),b.gd=!0):a.type==5&&(b.minHeight=Math.max(b.minHeight,this.h.Al),b.Ye=!0);this.cf||b.align!=null||(b.align=a.align)};
g.Xl=function(){for(var a=!1,b=0,c;c=this.rows[b];b++)c.gd&&(a=!0);for(b=0;c=this.rows[b];b++){var d=c.elements;c.elements=[];c.Ki()&&c.elements.push(new Dk(this.h,this.Nd(null,d[0])));if(d.length){for(var e=0;e<d.length-1;e++){c.elements.push(d[e]);var f=this.Nd(d[e],d[e+1]);c.elements.push(new Dk(this.h,f))}c.elements.push(d[d.length-1]);c.Xf()&&(f=this.Nd(d[d.length-1],null),a&&c.Ye&&(f+=this.h.rh),c.elements.push(new Dk(this.h,f)))}}};
g.Nd=function(a,b){if(!a)return b&&b.type&1&&b.Ob?this.h.Hb:b&&b.type&256?this.h.Il:b&&b.type&512?this.h.Tl:this.h.cb;if(!(a.type&128)&&(!b||b.type&512))return a.type&1&&a.Ob?this.h.Hb:a.type&4?this.h.cb*2+1:a.type&2?this.h.mc:a.type&6144?this.h.cb:a.type&65536?this.h.Fo:a.type&524288?this.h.mc:this.h.cb;if(a.type&128&&!b){if(a.type&64)return this.h.mc;if(a.type&256)return this.h.cb;if(a.type&512)return this.h.mc}if(!(a.type&128)&&b&&b.type&128){if(a.type&1&&a.Ob){if(b.type&256||b.type&64)return this.h.Lo}else{if(b.type&
256||b.type&64)return this.h.Il;if(b.type&512)return this.h.cb}return this.h.cb-1}if(a.type&4&&b&&!(b.type&128))return this.h.cb;if(a.type&256&&b&&b.type&1)return b.Ob?this.h.Hb:this.h.cb;if(a.type&32768&&b){if(b.type&2)return this.h.mc;if(b.type&2048)return b.Pb;if(b.type&4096)return a=(this.o?1:-1)*this.h.La/2,b.Pb+a}if(a.type&65536&&b){if(b.type&2048)return b.Pb-this.h.pa;if(b.type&4096)return a=(this.o?1:-1)*this.h.La/2,b.Pb-this.h.pa+a}return a.type&1&&b&&b.type&1&&a.Ob==b.Ob||b&&b.type&524288?
this.h.cb:this.h.Hb};g.zm=function(a,b){return a.type&2097152&&b.type&4194304?this.h.lo:a.type&2097152||b.type&4194304?this.h.mc:a.gd&&b.gd?this.h.cb:!a.Da&&b.Da?this.h.Zn:a.Da&&b.Da||!a.Da&&b.Ye||a.Ye?this.h.cb:this.h.Hb};
g.xm=function(a,b){if(b.type&8)return a.Ia+b.height/2;if(a.type&4194304)return a=a.Ia+a.height-a.Tf,b.type&4096?a+b.height/2:a-b.height/2;if(a.type&2097152)return b.type&2?a.Gc-b.height/2:a.Gc+b.height/2;var c=a.Ia;b.type&1||b.type&4?(c+=b.height/2,(a.Rj||a.Da)&&b.height+this.h.Ul<=a.height&&(c+=this.h.Ul)):c=b.type&256?c+b.height/2:c+a.height/2;return c};
g.Zi=function(){if(this.cf){for(var a=0,b=null,c=this.rows.length-1,d;d=this.rows[c];c--)d.tk=a,d.type&8388608&&(d.Da&&Lk(this,d),b&&b.Da&&d.width<b.width?d.tk=b.width:a=d.width,b=d);for(c=a=0;d=this.rows[c];c++)d.Da?a=this.cg(d):d.type&8?d.width=Math.max(a,d.tk):(a=Math.max(a,d.tk)-d.width,a>0&&Mk(d,a),a=d.width)}else fl.i.Zi.call(this)};g.cg=function(a){return this.cf&&a.Da?this.Ad+this.h.Eo+this.Tb:fl.i.cg.call(this,a)};
g.tm=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++){d.Ia=b;d.S=this.Tb;b+=d.height;a=Math.max(a,d.kc);var e=b-this.Fa.He;d==this.qa&&e<this.h.jh&&(e=this.h.jh-e,this.qa.height+=e,b+=e);Nk(this,d)}this.s&&this.V.A&&this.V.A.isConnected()&&(a=Math.max(a,fg(this.V.A.F()).width-this.h.La));this.qa.Ib=b-this.qa.Tf;this.wf=a+this.Tb+this.h.La;this.width+=this.h.La;this.height=b+this.h.La;this.Ji=this.Fa.Gc};function gl(a,b){gl.i.constructor.call(this,a,b);this.vc=new bl(b)}H(gl,Ok);g=gl.prototype;g.ac=function(){Pk(this);Qk(this);Rk(this);var a=this.V.va;a.fl(this.U+"\n"+this.Xh);var b=this.vc;a.qe.setAttribute("d",b.D+"\n"+b.lg);this.G.o&&a.Hj();Sk(this)};
g.zj=function(){var a=this.vc,b=this.G.Fa;a.D+=N(b.S,a.G.Ji);for(var c=0,d;d=b.elements[c];c++)d.type&32768?a.D+=a.Ab.Rl:d.type&65536?a.D+=a.Jk.vl(a.Ma):d.type&2048?a.D+=a.Hp.ud:d.type&2?a.D+=a.Yp.path(a.Ma):d.type&8&&d.width!=0&&(a.D+=O("H",d.S+d.width-a.pb));a.D+=O("H",b.S+b.width-a.pb);cl(this.vc,this.G.Fa);gl.i.zj.call(this)};g.Vf=function(a){this.vc.Vf(a);gl.i.Vf.call(this,a)};
g.Aj=function(a){var b=this.vc,c=Fk(a);if(b.Ma){var d=a.height-c.Me;b.D+=jk(c.S+c.width-b.pb,a.Ia)+b.Ag.Qb(b.Ma)+O("v",d)}else b.D+=jk(c.S+c.width,a.Ia)+b.Ag.Qb(b.Ma);gl.i.Aj.call(this,a)};g.yj=function(a){var b=this.vc,c=Fk(a);if(b.Ma){var d=a.height-2*b.bf.height;b.D+=jk(c.S,a.Ia)+b.bf.Mk(b.Ma)+O("v",d)+b.bf.wi(b.Ma)+kk(a.width-c.S-b.bf.width,0)}else b.D+=jk(c.S,a.Ia+a.height)+b.bf.wi(b.Ma)+kk(a.width-c.S-b.bf.width,0);gl.i.yj.call(this,a)};
g.qm=function(a){cl(this.vc,a);this.U+=O("H",a.S+a.width)+O("V",a.Ia+a.height)};g.vj=function(){var a=this.vc,b=this.G.qa;if(a.Ma)a.D+=O("V",b.Ib-a.pb);else{var c=a.G.qa.elements[0];c.type&32768?a.D+=jk(b.S+a.pb,b.Ib-a.pb):c.type&65536&&(a.D+=jk(b.S,b.Ib),a.D+=a.Jk.ej())}gl.i.vj.call(this)};
g.xj=function(){var a=this.vc,b=a.G.s;b&&(b=b.xb+b.height,a.Ma?a.D+=jk(a.G.Tb,b):(a.D+=jk(a.G.Tb+a.pb,a.G.qa.Ib-a.pb),a.D+=O("V",b)),a.D+=a.Ag.yg(a.Ma));a.Ma||(b=a.G.Fa,a.D=b.elements[0].type&65536?a.D+O("V",a.Jk.height):a.D+O("V",b.Gc+a.pb));gl.i.xj.call(this)};
g.wj=function(a){var b=this.vc,c=b.pb,d=a.S+a.oc,e=a.Je-a.height/2,f=a.width-a.oc,h=e+c;b.Ma?(e=a.height-(a.xb+a.Me)+c,b.lg+=jk(d-c,h)+O("v",a.xb-c)+b.Ag.Qb(b.Ma)+O("v",e)+O("h",f)):b.lg+=jk(a.S+a.width+c,h)+O("v",a.height)+O("h",-f)+jk(d,e+a.xb)+b.Ag.Qb(b.Ma);gl.i.wj.call(this,a)};g.vn=function(a){var b=a.Je-a.height/2;if(a.fb){var c=a.S+a.oc+this.h.La;this.G.o&&(c*=-1);Fh(a.fb,c,b+a.xb+this.h.La)}};
g.xn=function(a){var b=Fk(a);if(b.fb){var c=a.S+a.Ad+b.Pb;c=this.G.o?c*-1:c+this.h.La;Fh(b.fb,c,a.Ia+this.h.La)}};g.un=function(a){var b=Fk(a);if(b.fb){var c=a.S+a.width+this.h.La;this.G.o&&(c*=-1);Fh(b.fb,c,a.Ia)}};g.wn=function(){var a=this.G.qa;if(a.connection){var b=a.connection,c=b.S;Fh(b.fb,(this.G.o?-c:c)+this.h.La/2,a.Ib+this.h.La)}};function hl(a){this.Ne=a;this.OFFSET=.5;this.Rl=N(this.OFFSET,this.OFFSET)}g=hl.prototype;g.ba=function(){this.Bo=il(this);this.Io=jl(this);this.Vi=this.ik();this.Ce=this.hk();this.ze=this.gk();this.De=this.jk()};function il(a){var b=a.Ne.pa;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b+a)-a,d=N(c,c)+lk("0 0,0",b,V(-c-a,b-c)),e=lk("0 0,0",b+a,V(b+a,b+a)),f=N(c,-c)+lk("0 0,0",b+a,V(b-c,c+a));return{width:b+a,height:b,Mk:function(h){return h?d:""},wi:function(h){return h?e:f}}}
function jl(a){var b=a.Ne.pa;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b-a)+a,d=N(c,c)+lk("0 0,1",b-a,V(b-c,-c+a)),e=N(a,b)+lk("0 0,1",b-a,V(b,-b+a)),f=-c,h=N(c,f)+lk("0 0,1",b-a,V(-c+a,-f-b));return{height:b,vl:function(k){return k?d:e},ej:function(){return h}}}
g.ik=function(){var a=this.Ne.rh,b=this.Ne.Gf,c=N(-2,-b+2.5+.9)+kk(a*-.45,-2.1),d=O("v",2.5)+N(-a*.97,2.5)+ik("q",[V(-a*.05,10),V(a*.3,9.5)])+N(a*.67,-1.9)+O("v",2.5),e=O("v",-1.5)+N(a*-.92,-.5)+ik("q",[V(a*-.19,-5.5),V(0,-11)])+N(a*.92,1),f=N(-5,b-.7)+kk(a*.46,-2.1);return{width:a,height:b,yg:function(h){return h?c:e},Qb:function(h){return h?d:f}}};g.hk=function(){return{ud:O("h",this.OFFSET)+this.Ne.Ce.ud}};g.gk=function(){return{ud:kk(5.1,2.6)+N(-10.2,6.8)+kk(5.1,2.6),height:12,width:10.2}};
g.jk=function(){var a=N(25,-8.7)+ik("c",[V(29.7,-6.2),V(57.2,-.5),V(75,8.7)]),b=ik("c",[V(17.8,-9.2),V(45.3,-14.9),V(75,-8.7)])+jk(100.5,this.Ne.De.height+.5);return{path:function(c){return c?a:b}}};function kl(a,b,c){this.Of=c;this.Dc=a;this.Og=y(Zb,{"class":"blocklyPathDark",transform:"translate(1,1)"},this.Dc);this.Ea=y(Zb,{"class":"blocklyPath"},this.Dc);this.qe=y(Zb,{"class":"blocklyPathLight"},this.Dc);this.kj="#000000";this.style=b}H(kl,Zk);g=kl.prototype;g.fl=function(a){this.Ea.setAttribute("d",a);this.Og.setAttribute("d",a)};g.Hj=function(){this.Ea.setAttribute("transform","scale(-1 1)");this.qe.setAttribute("transform","scale(-1 1)");this.Og.setAttribute("transform","translate(1,1) scale(-1 1)")};
g.Na=function(a){this.qe.style.display="";this.Og.style.display="";this.qe.setAttribute("stroke",this.style.Le);this.Og.setAttribute("fill",this.kj);kl.i.Na.call(this,a);this.Ea.setAttribute("stroke","none")};g.pe=function(a){this.style=a;this.kj=ta("#000",this.style.Jd,.2)||this.kj};g.Ln=function(a){a?(this.Ea.setAttribute("filter","url(#"+this.Of.Bj+")"),this.qe.style.display="none"):(this.Ea.setAttribute("filter","none"),this.qe.style.display="inline")};
g.Mn=function(a){a&&(this.qe.style.display="none",this.Og.setAttribute("fill",this.style.Ch),this.Ea.setAttribute("stroke","none"),this.Ea.setAttribute("fill",this.style.Ch))};g.wl=function(a){kl.i.wl.call(this,a);a&&this.Ea.setAttribute("stroke","none")};function ll(a){ll.i.constructor.call(this,a);this.Ab=null}H(ll,$k);g=ll.prototype;g.ba=function(a,b){ll.i.ba.call(this,a,b);this.Ab=new hl(this.C());this.Ab.ba()};g.Sk=function(a,b){ll.i.Sk.call(this,a,b);this.Ab.ba()};g.fk=function(){return new al};g.Wm=function(a){return new fl(this,a)};g.Um=function(a,b){return new gl(a,b)};g.Vm=function(a,b){return new kl(a,b,this.C())};B(Oc,"geras",ll);(function(){var a={name:"escape",ya:function(b){return!b.options.readOnly},sa:function(){Ge();return!0}};Xi.register(a);R(27,a.name)})();(function(){var a={name:"delete",ya:function(b){return!b.options.readOnly&&M&&od(M)},sa:function(b,c){c.preventDefault();if(Gg())return!1;jj(M);return!0}};Xi.register(a);R(46,a.name);R(8,a.name)})();
(function(){var a={name:"copy",ya:function(c){return!c.options.readOnly&&!Gg()&&M&&od(M)&&M.Ja()},sa:function(c,d){d.preventDefault();Ge();kj(M);return!0}};Xi.register(a);var b=Zi(67,[17]);R(b,a.name);b=Zi(67,[18]);R(b,a.name);b=Zi(67,[91]);R(b,a.name)})();(function(){var a={name:"cut",ya:function(c){return!c.options.readOnly&&!Gg()&&M&&od(M)&&M.Ja()&&!M.j.kd},sa:function(){kj(M);jj(M);return!0}};Xi.register(a);var b=Zi(88,[17]);R(b,a.name);b=Zi(88,[18]);R(b,a.name);b=Zi(88,[91]);R(b,a.name)})();
(function(){var a={name:"paste",ya:function(c){return!c.options.readOnly&&!Gg()},sa:function(){return lj()}};Xi.register(a);var b=Zi(86,[17]);R(b,a.name);b=Zi(86,[18]);R(b,a.name);b=Zi(86,[91]);R(b,a.name)})();(function(){var a={name:"undo",ya:function(c){return!c.options.readOnly&&!Gg()},sa:function(c){Ge();tf(c,!1);return!0}};Xi.register(a);var b=Zi(90,[17]);R(b,a.name);b=Zi(90,[18]);R(b,a.name);b=Zi(90,[91]);R(b,a.name)})();
(function(){var a={name:"redo",ya:function(c){return!Gg()&&!c.options.readOnly},sa:function(c){Ge();tf(c,!0);return!0}};Xi.register(a);var b=Zi(90,[16,17]);R(b,a.name);b=Zi(90,[16,18]);R(b,a.name);b=Zi(90,[16,91]);R(b,a.name);b=Zi(89,[17]);R(b,a.name)})();var ml=null,nl=null,ol=null;function pl(){var a=ml();ql("/scripts/storage.py","app="+encodeURIComponent(rl)+"&data="+encodeURIComponent(a),sl)}var tl=new Map;
function ql(a,b,c,d,e){e=e===void 0?"POST":e;tl.has(a)&&tl.get(a).abort();var f=new XMLHttpRequest;tl.set(a,f);f.onload=function(){this.status===200?c&&c.call(f):d?d.call(f):ul(U("Games.httpRequestError",!1)+"\nXHR status: "+f.status);tl.delete(a)};e==="POST"?(f.open(e,a),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(b)):(b&&(a+="?"+b),f.open(e,a),f.send())}
function sl(){window.location.hash=this.responseText.trim();ul(U("Games.linkAlert",!1).replace("%1",window.location.href));ol=ml()}function vl(){var a=this.responseText.trim();a.length?(a=a.replace(/^\{\[\(< UNTRUSTED CONTENT >\)\]\}\n/,""),nl(a)):ul(U("Games.hashError",!1).replace("%1",window.location.hash));ol=ml()}function ul(a){if(typeof W==="object"){var b=T("linkButton");W.aq(b,a)}else alert(a)};var J=null;function wl(){var a=U("Games.maze",!0);bk(a);if(a=T("linkButton"))Wj?a.style.display="none":(ml=xl,nl=yl,ck(a,pl));(a=T("languageMenu"))&&a.addEventListener("change",zl,!0)}function Al(){if(!Wj&&window.location.hash.length>1)ql("/data/"+rl+"/storage/"+window.location.hash.substring(1)+".blockly","",vl,null,"GET");else{try{var a=window.sessionStorage.Tm}catch(b){}a&&delete window.sessionStorage.Tm;yl(a||'<xml><block type="maze_start" deletable="false" x="20" y="20"></block></xml>')}}
function yl(a){a=qd(a);J.clear();rd(a,J);a=J;a.se.length=0;a=a.Bg.length=0;for(var b;b=Zc[a];a++)b.Za=!1}function xl(){var a=id(!0);if(J.Ca(!1).length===1&&a.querySelector){var b=a.querySelector("block");b&&(b.removeAttribute("x"),b.removeAttribute("y"))}return pd(a)}function Bl(){ol!==null&&ol!==xl()&&(window.location.hash="",ol=null)}
function Cl(){var a={maxBlocks:Dl,rtl:Vj,trashcan:!0,zoom:{maxScale:2,controls:!0,wheel:!0,startScale:1.3},move:{scrollbars:{horizontal:!0,vertical:!0},drag:!0,wheel:!1}},b=T("toolbox");b&&(a.toolbox=b);a.media="third-party/blockly/media/";a.oneBasedIndex=!1;J=Ei(a);uf(J,Bl)}function El(){window.location=(Wj?"index.html":"./")+"?lang="+Tj}
function zl(){window.sessionStorage&&(window.sessionStorage.Tm=xl());var a=T("languageMenu");a=encodeURIComponent(a.options[a.selectedIndex].value);var b=window.location.search;b=b.length<=1?"?lang="+a:/[?&]lang=[^&]*/.test(b)?b.replace(/([?&]lang=)[^&]*/,"$1"+a):b.replace(/\?/,"?lang="+a+"&");window.location=window.location.protocol+"//"+window.location.host+window.location.pathname+b}
function Fl(){ak<Zj?location=location.protocol+"//"+location.host+location.pathname+"?lang="+Tj+"&level="+(ak+1):El()}function Gl(a){if(a.type==="click"&&Hl==="touchend"&&Il+2E3>Date.now()||Hl===a.type&&Il+400>Date.now())return a.preventDefault(),a.stopPropagation(),!0;Hl=a.type;Il=Date.now();return!1}var Hl=null,Il=0;var W={Ud:!1,mm:null,Hh:null,Jh:null,Lh:null,Kh:null,ll:function(a,b,c,d,e,f){function h(){if(W.Ud){m.style.visibility="visible";m.style.zIndex=10;n.style.visibility="hidden";var w=a.getElementsByClassName("primary");w.length||(w=a.getElementsByClassName("secondary"),w.length||(w=a.getElementsByTagName("button")));w.length&&w[0].focus()}}if(!a)throw TypeError("Content not found: "+a);for(var k=a.getElementsByClassName("addHideHandler"),l;l=k[0];)l.addEventListener("click",W.af,!0),l.addEventListener("touchend",
W.af,!0),l.classList.remove("addHideHandler");W.Ud&&W.af(!1);Hc&&Ge(!0);W.Ud=!0;W.mm=b;W.Hh=f;var m=T("dialog");f=T("dialogShadow");var n=T("dialogBorder"),v;for(v in e)m.style[v]=e[v];d&&(f.style.visibility="visible",f.style.opacity=.3,f.style.zIndex=9,d=document.createElement("div"),d.id="dialogHeader",m.appendChild(d),W.Jh=Cb(d,"mousedown",null,W.bp));m.appendChild(a);a.classList.remove("dialogHiddenContent");try{b.blur()}catch(w){}c&&b?(W.ii(b,!1,.2),W.ii(m,!0,.8),setTimeout(h,175)):h()},nm:0,
om:0,bp:function(a){W.qj();if(!bb(a)){var b=T("dialog");W.nm=b.offsetLeft-a.clientX;W.om=b.offsetTop-a.clientY;W.Lh=Cb(document,"mouseup",null,W.qj);W.Kh=Cb(document,"mousemove",null,W.cp);a.stopPropagation()}},cp:function(a){var b=T("dialog"),c=W.nm+a.clientX;a=W.om+a.clientY;a=Math.max(a,0);a=Math.min(a,window.innerHeight-b.offsetHeight);c=Math.max(c,0);c=Math.min(c,window.innerWidth-b.offsetWidth);b.style.left=c+"px";b.style.top=a+"px"},qj:function(){W.Lh&&(u(W.Lh),W.Lh=null);W.Kh&&(u(W.Kh),W.Kh=
null)},af:function(a){function b(){d.style.zIndex=-1;d.style.visibility="hidden";T("dialogBorder").style.visibility="hidden"}a=a===void 0?!0:a;if(W.Ud){W.qj();W.Jh&&(u(W.Jh),W.Jh=null);W.Ud=!1;W.Hh&&W.Hh();W.Hh=null;var c=a?W.mm:null;a=T("dialog");var d=T("dialogShadow");d.style.opacity=0;c&&a?(W.ii(a,!1,.8),W.ii(c,!0,.2),setTimeout(b,175)):b();a.style.visibility="hidden";a.style.zIndex=-1;for((c=T("dialogHeader"))&&c.parentNode.removeChild(c);a.firstChild;)c=a.firstChild,c.classList.add("dialogHiddenContent"),
document.body.appendChild(c)}},ii:function(a,b,c){function d(){e.style.width=f.width+"px";e.style.height=f.height+"px";e.style.left=f.x+"px";e.style.top=f.y+"px";e.style.opacity=c}if(a){var e=T("dialogBorder"),f=W.getBBox(a);b?(e.className="dialogAnimate",setTimeout(d,1)):(e.className="",d());e.style.visibility="visible"}},getBBox:function(a){var b=Ja(a);b={x:b.x,y:b.y};a.getBBox?(a=a.getBBox(),b.height=a.height,b.width=a.width):(b.height=a.offsetHeight,b.width=a.offsetWidth);return b},aq:function(a,
b){var c=T("containerStorage");c.textContent="";b=ba(b.split("\n"));for(var d=b.next();!d.done;d=b.next()){var e=document.createElement("p");e.appendChild(document.createTextNode(d.value));c.appendChild(e)}c=T("dialogStorage");W.ll(c,a,!0,!0,{width:"50%",left:"25%",top:"5em"},W.$p);W.Wp()},So:function(){if(W.Ud||J.qb())setTimeout(W.So,15E3);else{var a=T("dialogAbort"),b=T("abortOk");b.addEventListener("click",El,!0);b.addEventListener("touchend",El,!0);W.ll(a,null,!1,!0,{width:"40%",left:"30%",top:"3em"},
function(){document.body.removeEventListener("keydown",W.Wl,!0)});document.body.addEventListener("keydown",W.Wl,!0)}},Ih:function(a){!W.Ud||a.keyCode!==13&&a.keyCode!==27&&a.keyCode!==32||(W.af(!0),a.stopPropagation(),a.preventDefault())},Wp:function(){document.body.addEventListener("keydown",W.Ih,!0)},$p:function(){document.body.removeEventListener("keydown",W.Ih,!0)},Wl:function(a){W.Ih(a);a.keyCode!==13&&a.keyCode!==32||El()}};window.BlocklyDialogs=W;var Jl="";function Kl(a){if(a){var b=a.match(/^block_id_([^']+)$/);b&&(a=b[1])}yi(a)}function Ll(a){a=a.replace(/(,\s*)?'block_id_[^']+'\)/g,")");return a.replace(/\s+$/,"")}function Ml(){setTimeout(function(){var a=document.createElement("script");a.type="text/javascript";a.src="third-party/JS-Interpreter/compressed.js";document.head.appendChild(a)},1)}
function Nl(){setTimeout(function(){var a=document.createElement("link");a.rel="stylesheet";a.type="text/css";a.href="common/prettify.css";document.head.appendChild(a);a=document.createElement("script");a.type="text/javascript";a.src="common/prettify.js";document.head.appendChild(a)},1)}
function Ol(){var a=T("dialogDone");if(J){T("dialogLinesText").textContent="";var b=Jl;b=Ll(b);var c=b.replace(/\/\/[^\n]*/g,"");c=c.replace(/\/\*.*\*\//g,"");c=c.replace(/[ \t]+\n/g,"\n");c=c.replace(/\n+/g,"\n");c=c.trim();c=c.split("\n").length;var d=T("containerCode");d.textContent=b;d.style.display="none";typeof prettyPrintOne==="function"&&(b=d.innerHTML,b=prettyPrintOne(b,"js"),d.innerHTML=b);c===1?U("Games.linesOfCode1",!1):U("Games.linesOfCode2",!1).replace("%1",String(c))}b=ak<Zj?U("Games.nextLevel",
!1).replace("%1",String(ak+1)):U("Games.finalLevel",!1);c=T("doneOk");c.addEventListener("click",Fl,!0);c.addEventListener("touchend",Fl,!0);W.ll(a,null,!1,!0,{width:"40%",left:"30%",top:"3em"},function(){document.body.removeEventListener("keydown",Pl,!0)});document.body.addEventListener("keydown",Pl,!0);T("dialogDoneText").textContent=b}function Pl(a){W.Ih(a);a.keyCode!==13&&a.keyCode!==32||Fl()};function Ql(a,b,c,d,e,f,h){if(!a)throw Error("Src value of an image field is required");a=eb(a);c=Number(eb(c));b=Number(eb(b));if(isNaN(c)||isNaN(b))throw Error("Height and width values of an image field must cast to numbers.");if(c<=0||b<=0)throw Error("Height and width values of an image field must be greater than 0.");this.$f=!1;this.wh="";Ql.i.constructor.call(this,a,null,h);h||(this.$f=!!f,this.wh=eb(d)||"");this.ab=new Ga(b,c+Rl);this.Ap=c;this.Ic=null;typeof e=="function"&&(this.Ic=e);this.kb=
null}H(Ql,Tg);Ql.prototype.Ri="";Ql.M=function(a){return new Ql(a.src,a.width,a.height,void 0,void 0,void 0,a)};var Rl=1;g=Ql.prototype;g.yf=!1;g.jd=!1;g.Lf=function(a){Ql.i.Lf.call(this,a);this.$f=!!a.flipRtl;this.wh=eb(a.alt)||""};g.Wh=function(){this.kb=y(Xb,{height:this.Ap+"px",width:this.ab.width+"px",alt:this.wh},this.ob);this.kb.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.sb);this.Ic&&(this.kb.style.cursor="pointer")};g.Nn=function(){};
g.Mh=function(a){return typeof a!="string"?null:a};g.Uf=function(a){this.sb=a;this.kb&&this.kb.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",String(this.sb))};g.ym=function(){return this.$f};g.Hi=function(){this.Ic&&this.Ic(this)};g.Oj=function(){return this.wh};B(Nc,"field_image",Ql);function Sl(){var a=[[U("Maze.turnLeft",!1),"turnLeft"],[U("Maze.turnRight",!1),"turnRight"]],b=[[U("Maze.pathAhead",!1),"isPathForward"],[U("Maze.pathLeft",!1),"isPathLeft"],[U("Maze.pathRight",!1),"isPathRight"]];Jf("maze_turn_arrows",function(){var c=rj(Bd(this,"DIR"));c[c.length-2][0]+=" \u21ba";c[c.length-1][0]+=" \u21bb"});oj([{type:"maze_moveForward",message0:U("Maze.moveForward",!1),previousStatement:null,nextStatement:null,colour:290,tooltip:U("Maze.moveForwardTooltip",!1)},{type:"maze_turn",
message0:"%1",args0:[{type:"field_dropdown",name:"DIR",options:a}],previousStatement:null,nextStatement:null,colour:290,tooltip:U("Maze.turnTooltip",!1),extensions:["maze_turn_arrows"]},{type:"maze_if",message0:"%1%2"+U("Maze.doCode",!1)+"%3",args0:[{type:"field_dropdown",name:"DIR",options:b},{type:"input_dummy"},{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:210,tooltip:U("Maze.ifTooltip",!1),extensions:["maze_turn_arrows"]},{type:"maze_ifElse",message0:"%1%2"+
U("Maze.doCode",!1)+"%3"+window.BlocklyMsg.CONTROLS_IF_MSG_ELSE+"%4",args0:[{type:"field_dropdown",name:"DIR",options:b},{type:"input_dummy"},{type:"input_statement",name:"DO"},{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,colour:210,tooltip:U("Maze.ifelseTooltip",!1),extensions:["maze_turn_arrows"]},{type:"maze_repeat_internal",message0:"repeat%1times%2"+U("Maze.doCode",!1)+"%3",args0:[{type:"field_dropdown",name:"TIMES",options:[["3","3"],["4","4"],["5","5"],["6",
"6"],["7","7"],["8","8"],["9","9"],["10","10"]]},{type:"input_dummy"},{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:120,tooltip:"Do some statements several times",helpUrl:"https://en.wikipedia.org/wiki/For_loop"},{type:"maze_forever",message0:U("Maze.repeatUntil",!1)+"%1%2"+U("Maze.doCode",!1)+"%3",args0:[{type:"field_image",src:"maze/marker.png",width:12,height:16},{type:"input_dummy"},{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,
colour:120,tooltip:U("Maze.whileTooltip",!1)},{type:"maze_start",message0:"when %1 clicked",args0:[{type:"field_image",src:"maze/play.png",width:17,height:17,alt:"\u25b6"}],message1:"%1",args1:[{type:"input_statement",name:"STACK"}],colour:0,tooltip:'Excecutes the blocks inside when the "Run Program" button is clicked.'}])}S.maze_moveForward=function(a){return"moveForward('block_id_"+a.id+"');\n"};S.maze_turn=function(a){return kf(a,"DIR")+"('block_id_"+a.id+"');\n"};
S.maze_if=function(a){var b=kf(a,"DIR")+"('block_id_"+a.id+"')";a=Aj(a,"DO");return"if ("+b+") {\n"+a+"}\n"};S.maze_ifElse=function(a){var b=kf(a,"DIR")+"('block_id_"+a.id+"')",c=Aj(a,"DO");a=Aj(a,"ELSE");return"if ("+b+") {\n"+c+"} else {\n"+a+"}\n"};S.maze_forever=function(a){var b=Aj(a,"DO");S.fh&&(b=S.fh.replace(/%1/g,"'block_id_"+a.id+"'")+b);return"while (untilNotReached()) {\n"+b+"}\n"};
S.maze_repeat_internal=function(a){var b=Aj(a,"DO");S.fh&&(b=S.fh.replace(/%1/g,"'block_id_"+a.id+"'")+b);return"for (_i = 0; _i < "+kf(a,"TIMES")+"; _i++) {\n"+b+"}\n"};S.maze_start=function(a){return"function when_run_clicked() {\n"+Aj(a,"STACK")+"}\nwhen_run_clicked()"};function Tl(){return'\n<div class="farSide farSideButtons">\n  <button class="secondary addHideHandler">'+dk(q.DIALOG_OK)+"</button>\n</div>\n"};function Ul(){var a=ak,b=Zj,c=rl,d='\n    <button id="saveButton" class="primary">\ud83d\udcbe</button>\n    <button id="loadButton" class="primary">\ud83d\udcc2</button>\n    <button id="clearButton" class="primary">\ud83e\uddf9</button>\n    <input type="file" id="fileProgressInput" style="display: none;" accept=".blcky.txt,.bcy.me.txt">\n    ';var e='\n&nbsp;\n<button id="linkButton" title="'+U("Games.linkTooltip",!0)+'">\n  <img src="common/1x1.gif" class="link icon21">\n</button>\n';d&&(d=" &nbsp; "+
d);var f='\n<span id="title">\n  <a href="'+(Wj?"index.html":"./")+'">'+U("Games.name",!0)+"</a> : Exploring Maps\n</span>\n";if(a){var h=" &nbsp ";c=(c=window.localStorage[c])?parseInt(c):0;for(var k=1;k<=b;k++){var l="";c+1===k&&(l="level_unlocked");var m="";k<=c&&(m="level_done");var n="?level="+k;h+=" ";h=k===a?h+('<span class="level_number '+m+" "+l+'" id="level'+k+'">'+k+"</span>"):k===b?h+('<a class="level_number '+m+'" id="level'+k+'" '+((m||l)&&'href="'+n+'"')+">"+k+"</a>"):h+('<a class="level_dot '+
(m||l)+'" id="level'+k+'" '+((m||l)&&'href="'+n+'"')+"></a>")}a=h}else a="";return'\n\n<table width="100%">\n  <tr>\n    <td>\n      <h1>\n        '+(f+"\n        "+a+'\n      </h1>\n    </td>\n    <td id="header_cta" class="farSide">\n      <select id="languageMenu"></select>\n      '+e+"\n      \n      "+d+'\n    </td>\n  </tr>\n</table>\n\n\n<div id="visualization">\n  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgMaze" width="400px" height="400px">\n    <g id="look">\n      <path d="M 0,-15 a 15 15 0 0 1 15 15" />\n      <path d="M 0,-35 a 35 35 0 0 1 35 35" />\n      <path d="M 0,-55 a 55 55 0 0 1 55 55" />\n    </g>\n  </svg>\n  <div id="capacityBubble">\n    <div id="capacity"></div>\n  </div>\n</div>\n\n<div id="commandDiv">\n  <button id="runButton" class="primary" title="')+
U("Maze.runTooltip",!0)+'">\n    <img src="common/1x1.gif" class="run icon21"> '+U("Games.runProgram",!0)+'\n  </button>\n  <button id="resetButton" class="primary" title="'+U("Maze.resetTooltip",!0)+'">\n    <img src="common/1x1.gif" class="stop icon21"> '+U("Games.resetProgram",!0)+'\n  </button>\n</div>\n\n<xml id="toolbox" xmlns="https://developers.google.com/blockly/xml">\n<block type="maze_moveForward"></block>\n<block type="maze_turn"><field name="DIR">turnLeft</field></block>\n<block type="maze_turn"><field name="DIR">turnRight</field></block>\n</xml>\n<div id="blockly"></div>\n\n\n<div id="dialogShadow" class="dialogAnimate"></div>\n<div id="dialogBorder"></div>\n<div id="dialog"></div>\n\n\n<div id="dialogDone" class="dialogHiddenContent">\n  <div class="large">'+
(U("Games.congratulations",!0)+'</div>\n  <div id="dialogLinesText" class="large"></div>\n  <pre id="containerCode"></pre>\n  <div id="dialogDoneText" class="large"></div>\n  <div id="dialogDoneButtons" class="farSide farSideButtons">\n    <button class="addHideHandler">'+dk(q.DIALOG_CANCEL)+'</button>\n    <button id="doneOk" class="secondary">'+dk(q.DIALOG_OK)+'</button>\n  </div>\n</div>\n\n\n<div id="dialogAbort" class="dialogHiddenContent">\n  ')+(U("Games.helpAbort",!0)+'\n  <div class="farSide farSideButtons">\n    <button class="addHideHandler">'+
dk(q.DIALOG_CANCEL)+'</button>\n    <button id="abortOk" class="secondary">'+dk(q.DIALOG_OK)+'</button>\n  </div>\n</div>\n\n\n<div id="dialogStorage" class="dialogHiddenContent">\n  <div id="containerStorage"></div>\n  ')+(Tl()+'\n</div>\n\n\n\n<div id="dialogHelpStack" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="common/help.png">\n  </td><td>&nbsp;</td><td>\n    ')+(U("Maze.helpStack",!0)+'\n  </td><td valign="top">\n    <img src="maze/help_stack.png" class="mirrorImg" height=63 width=136>\n  </td></tr></table>\n</div>\n<div id="dialogHelpOneTopBlock" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="common/help.png">\n  </td><td>&nbsp;</td><td>\n    '+
U("Maze.helpOneTopBlock",!0)+'\n    <div id="sampleOneTopBlock" class="readonly"></div>\n  </td></tr></table>\n</div>\n<div id="dialogHelpRun" class="dialogHiddenContent">\n  <table><tr><td>\n    '+U("Maze.helpRun",!0)+'\n  </td><td rowspan=2>\n    <img src="common/help.png">\n  </td></tr><tr><td>\n    <div><img src="maze/help_run.png" class="mirrorImg" height=27 width=141></div>\n  </td></tr></table>\n</div>\n<div id="dialogHelpReset" class="dialogHiddenContent">\n  <table><tr><td>\n    '+U("Maze.helpReset",
!0)+'\n  </td><td rowspan=2>\n    <img src="common/help.png">\n  </td></tr><tr><td>\n    <div><img src="maze/help_run.png" class="mirrorImg" height=27 width=141></div>\n  </td></tr></table>\n</div>\n<div id="dialogHelpRepeat" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="maze/help_up.png">\n  </td><td>\n    '+U("Maze.helpRepeat",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelpCapacity" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="common/help.png">\n  </td><td>&nbsp;</td><td>\n    '+
U("Maze.helpCapacity",!0)+'\n  </td></tr></table>\n</div>\n<div id="dialogHelpRepeatMany" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="maze/help_up.png">\n  </td><td>\n    '+U("Maze.helpRepeatMany",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelpIf" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="maze/help_up.png">\n  </td><td>\n    '+U("Maze.helpIf",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelpMenu" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="maze/help_up.png">\n  </td><td id="helpMenuText">\n    '+
U("Maze.helpMenu",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelpIfElse" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="maze/help_down.png">\n  </td><td>\n    '+U("Maze.helpIfElse",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelpWallFollow" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="common/help.png">\n  </td><td>&nbsp;</td><td>\n    '+U("Maze.helpWallFollow",
!0)+"\n    "+Tl()+"\n  </td></tr></table>\n</div>\n\n")};var rl="maze";Zj=40;ak=Yj(Math.min(parseInt(window.localStorage[rl]||"0")+1,Zj));
var Vl=["maze/win.mp3","maze/win.ogg"],Wl=["maze/fail_pegman.mp3","maze/fail_pegman.ogg"],Xl=[{H:Infinity,J:1,map:[[0,0,0,0],[0,0,0,0],[2,1,4,0],[0,0,0,0]]},{H:Infinity,J:1,map:[[0,0,0,0],[0,4,0,0],[0,1,0,0],[0,2,0,0]]},{H:Infinity,J:3,map:[[0,0,0,0],[0,0,0,0],[2,1,4,0],[0,0,0,0]]},{H:Infinity,J:1,map:[[0,0,0,0],[0,2,0,0],[0,1,0,0],[0,4,0,0]]},{H:Infinity,J:2,map:[[0,0,0,0],[0,2,0,0],[0,1,4,0],[0,0,0,0]]},{H:Infinity,J:1,map:[[0,0,0,0],[0,4,0,0],[0,1,2,0],[0,0,0,0]]},{H:Infinity,J:0,map:[[0,0,0,0],
[0,0,0,0],[4,1,1,0],[0,0,2,0]]},{H:Infinity,J:2,map:[[0,0,0,0],[0,1,1,2],[0,4,0,0],[0,0,0,0]]},{H:Infinity,J:0,map:[[0,0,0,0],[0,1,4,0],[0,1,0,0],[0,1,2,0]]},{H:Infinity,J:3,map:[[0,0,0,0],[0,2,0,0],[0,1,1,1],[0,0,0,4]]},{H:Infinity,J:0,map:[[0,0,0,0],[0,0,4,0],[0,1,1,0],[2,1,0,0]]},{H:Infinity,J:3,map:[[0,0,0,0],[1,1,4,0],[1,0,0,0],[1,2,0,0]]},{H:Infinity,J:1,map:[[0,0,0,0],[0,0,2,1],[0,4,0,1],[0,1,1,1]]},{H:Infinity,J:3,map:[[4,0,0,0],[1,0,0,0],[1,1,1,0],[0,0,1,2]]},{H:Infinity,J:1,map:[[4,1,1,
1],[0,0,0,1],[2,1,0,1],[0,1,1,1]]},{H:Infinity,J:2,map:[[0,4,0,2],[1,1,0,1],[1,0,1,1],[1,1,1,0]]},{H:Infinity,J:2,map:[[0,0,0,0],[0,0,0,0],[4,2,1,4],[0,0,0,0]]},{H:Infinity,J:2,map:[[0,0,0,0],[0,4,2,0],[0,0,4,0],[0,0,0,0]]},{H:Infinity,J:2,map:[[0,0,0,0],[0,0,0,0],[2,1,4,0],[0,4,0,0]]},{H:Infinity,J:1,map:[[0,0,0,0],[2,1,1,4],[0,4,0,0],[0,0,0,0]]},{H:Infinity,J:0,map:[[0,4,0,0],[0,1,1,4],[0,1,0,0],[0,2,0,0]]},{H:Infinity,J:0,map:[[0,4,1,0],[0,0,1,4],[0,0,1,0],[0,0,2,0]]},{H:Infinity,J:0,map:[[0,0,
0,0],[0,4,0,4],[0,1,1,1],[0,0,0,2]]},{H:Infinity,J:3,map:[[0,0,0,0],[0,1,2,4],[0,1,0,1],[0,1,4,1]]},{H:Infinity,J:1,map:[[0,0,0,0],[0,4,0,4],[2,1,0,1],[0,1,1,1]]},{H:Infinity,J:1,map:[[0,4,0,0],[0,1,0,0],[1,1,1,0],[2,0,1,4]]},{H:Infinity,J:1,map:[[0,1,4,0],[0,1,1,1],[1,1,0,2],[4,1,0,0]]},{H:Infinity,J:3,map:[[4,1,0,0],[0,1,1,1],[1,1,0,4],[0,1,2,0]]},{H:Infinity,J:1,map:[[0,0,4,0],[1,1,1,1],[4,0,0,1],[1,2,1,1]]},{H:Infinity,J:1,map:[[0,1,2,1],[1,1,0,1],[1,0,0,1],[4,0,4,1]]},{H:Infinity,J:1,map:[[1,
1,1,1,4],[1,0,1,0,1],[1,1,2,1,1],[4,0,1,0,1],[1,1,1,1,1]]},{H:Infinity,J:1,map:[[1,1,4,1,1],[1,0,1,0,1],[4,1,2,1,1],[1,0,1,0,1],[1,1,1,1,4]]},{H:Infinity,J:1,map:[[1,4,1,4,1],[1,0,1,0,1],[1,1,2,1,1],[1,0,1,0,1],[1,4,1,1,4]]},{H:Infinity,J:3,map:[[1,0,1,1,1],[4,0,1,0,1],[1,2,1,0,4],[1,0,1,0,1],[1,1,1,1,1]]},{H:Infinity,J:1,map:[[1,1,1,1,1],[1,0,1,0,1],[1,0,0,4,1],[1,1,1,0,1],[4,0,2,1,1]]},{H:Infinity,J:2,map:[[1,1,1,0,4],[1,0,1,1,1],[1,1,0,0,0],[0,1,1,0,2],[0,0,1,1,1]]},{H:Infinity,J:2,map:[[2,0,0,
0,4],[1,1,1,1,1],[1,0,0,0,0],[1,1,1,0,4],[0,0,1,1,1]]},{H:Infinity,J:1,map:[[1,1,1,0,4],[1,0,1,2,1],[1,4,0,0,1],[1,0,4,0,1],[1,1,1,1,1]]},{H:Infinity,J:1,map:[[1,1,1,1,1],[1,0,4,0,1],[1,4,0,2,1],[1,0,4,0,1],[1,1,1,1,1]]},{H:Infinity,J:1,map:[[1,1,1,1,1],[1,0,4,0,1],[1,4,2,4,1],[1,0,4,0,1],[1,1,1,1,1]]}][ak-1],Yl=Xl.map,Dl=Xl.H,Zl=Xl.J,$l=Yl.length,am=Yl[0].length,bm=50*am,cm=50*$l,dm=0,em=[],fm={10010:[4,0],10001:[3,3],11E3:[0,1],10100:[0,2],11010:[4,1],10101:[3,2],10110:[0,0],10011:[2,0],11001:[4,
2],11100:[2,3],11110:[1,1],10111:[1,0],11011:[2,1],11101:[1,2],11111:[2,2],null0:[4,3],null1:[3,0],null2:[3,1],null3:[0,3],null4:[1,3]},gm,hm,im=[],X,Y,Z,jm,km=[];
function lm(){function a(l,m){return l<0||l>=am||m<0||m>=$l?"0":Yl[m][l]===0?"0":"1"}var b=T("svgMaze"),c=Math.max($l,am)*50;b.setAttribute("viewBox","0 0 "+c+" "+c);y("rect",{height:cm,width:bm,fill:"#F1EEE7","stroke-width":1,stroke:"#CCB"},b);for(var d=c=0;d<$l;d++)for(var e=0;e<am;e++){var f=a(e,d)+a(e,d-1)+a(e+1,d)+a(e,d+1)+a(e-1,d);fm[f]||(f=f==="00000"&&Math.random()>.3?"null0":"null"+Math.floor(1+Math.random()*4));var h=fm[f][0];f=fm[f][1];var k=y("clipPath",{id:"tileClipPath"+c},b);y("rect",
{height:50,width:50,x:e*50,y:d*50},k);y("image",{height:200,width:250,"clip-path":"url(#tileClipPath"+c+")",x:(e-h)*50,y:(d-f)*50},b).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","maze/tiles_pegman.png");c++}for(c=0;c<im.length;c++)d=im[c],e=y("image",{height:34,width:20,x:50*(d.x+.5)-10,y:50*(d.y+.6)-34},b),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","maze/marker.png"),d.node=e,d.Mq=!1;c=y("clipPath",{id:"pegmanClipPath"},b);y("rect",{id:"clipRect",height:52,width:49},
c);y("image",{id:"pegman",height:52,width:1029,"clip-path":"url(#pegmanClipPath)"},b).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","maze/pegman.png")}function mm(a){a&&a.ak||J.qb()||(pd(id()),Zh(J).g.Ca(!0),W.af(!1))}
function nm(a){em.forEach(clearTimeout);em.length=0;X=hm.x;Y=hm.y;jm=im.length;a?(Z=Zl+1,om(!1),em.push(setTimeout(function(){gm=100;pm([X,Y,Z*4-4]);Z++},gm*5))):(Z=Zl,qm(X,Y,Z*4));a=T("look");a.style.display="none";a.parentNode.appendChild(a);a=ba(a.getElementsByTagName("path"));for(var b=a.next();!b.done;b=a.next())b.value.setAttribute("stroke","#000");im.forEach(function(c){c.node.style.display="block"})}
function rm(a){if(!Gl(a)){W.af(!1);a=T("runButton");var b=T("resetButton");b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px");a.style.display="none";b.style.display="inline";nm(!1);sm()}}
function tm(){var a=qf(J),b=T("capacity");if(a===Infinity)b.style.display="none";else{b.style.display="inline";b.innerHTML="";var c=document.createElement("span");c.className="capacityNumber";c.appendChild(document.createTextNode(Number(a)));a=(a===0?U("Maze.capacity0",!1):a===1?U("Maze.capacity1",!1):U("Maze.capacity2",!1)).split(/%\d/);for(var d=0;d<a.length;d++)b.appendChild(document.createTextNode(a[d])),d!==a.length-1&&b.appendChild(c.cloneNode(!0))}}
function um(a){Gl(a)||(T("runButton").style.display="inline",T("resetButton").style.display="none",yi(null),nm(!1),mm())}
function vm(a,b){function c(e){a.setProperty(b,e,a.createNativeFunction(d,!1))}var d=function(e){wm(0,e)};c("moveForward");d=function(e){wm(2,e)};c("moveBackward");d=function(e){xm(0,e)};c("turnLeft");d=function(e){xm(1,e)};c("turnRight");d=function(e){return ym(0,e)};c("isPathForward");d=function(e){return ym(1,e)};c("isPathRight");d=function(e){return ym(2,e)};c("isPathBackward");d=function(e){return ym(3,e)};c("isPathLeft");d=function(){return zm()};c("notDone");d=function(){return Am()};c("untilNotReached")}
function sm(){if("Interpreter"in window){km.length=0;M&&ug(M);var a=S;var b=J;b||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),b=Hc);var c=[];a.ba(b);b=b.Ca(!0);for(var d=0,e;e=b[d];d++){var f=xj(a,e);Array.isArray(f)&&(f=f[0]);f&&(e.s&&(f=a.Bn(f),a.ph&&!e.ql&&(f=yj(a.ph,e)+f),a.qh&&!e.ql&&(f+=yj(a.qh,e))),c.push(f))}c=c.join("\n");c=a.finish(c);c=c.replace(/^\s+\n/,"");c=c.replace(/\n\s+$/,"\n");Jl=a=c=c.replace(/[ \t]+\n/g,"\n");xl();dm=0;Bm=new Interpreter(a,vm);nm(!1);
em.push(setTimeout(Cm,100))}else setTimeout(sm,99)}
function Cm(){do{var a=Bm.getStateStack();var b=a[a.length-1],c=b.node.type;c!=="VariableDeclaration"&&c.substr(-9)!=="Statement"||c==="BlockStatement"||c==="VariableDeclaration"&&a[a.length-2].node.type==="ForStatement"||Dm[Dm.length-1]===b||Dm.indexOf(b)!==-1&&c!=="ForStatement"&&c!=="WhileStatement"&&c!=="DoWhileStatement"?a=!1:(Dm=a.slice(),a=!0);a=!a;try{var d=Bm.step()}catch(e){e===Infinity?dm=2:e===!1?dm=-2:(dm=-2,alert(e))}finally{d||(a=!1,dm===0&&(dm=-1))}}while(a);Em()}var Bm,Dm=[];
function Em(){var a=km.shift();if(a){Kl(a[1]);switch(a[0]){case "north":pm([X,Y-1,Z*4]);Y--;break;case "east":pm([X+1,Y,Z*4]);X++;break;case "south":pm([X,Y+1,Z*4]);Y++;break;case "west":pm([X-1,Y,Z*4]);X--;break;case "look_north":Fm(0);break;case "look_east":Fm(1);break;case "look_south":Fm(2);break;case "look_west":Fm(3);break;case "fail_forward":Gm(!0);break;case "fail_backward":Gm(!1);break;case "left":pm([X,Y,Z*4-4]);Z=Hm(Z-1);break;case "right":pm([X,Y,Z*4+4]);Z=Hm(Z+1);break;case "finish":om(!0),
(a=window.localStorage[rl])||(a=0),a<ak&&(window.localStorage[rl]=ak),setTimeout(Ol,1E3)}im.forEach(function(b){X===b.x&&Y===b.y&&(b.node.style.display="none")});zm()?dm===0&&em.push(setTimeout(Cm,gm*5)):dm!==1&&(dm=1,km.length=0,km.push(["finish",null]),em.push(setTimeout(Cm,gm*5)))}else dm===0?Cm():dm!==1&&mm()}
function Im(a){if(T("dialogDone").className!=="dialogHiddenContent"){var b=T("pegSpin"),c=W.getBBox(b),d=a.clientX-(c.x+c.width/2-window.pageXOffset);a=Math.atan((a.clientY-(c.y+c.height/2-window.pageYOffset))/d)*180/Math.PI;d=Math.round((d>0?a+90:a+270)/360*16);d===16&&(d=15);b.style.backgroundPosition=-d*49+"px 0px"}}
function pm(a){var b=[X,Y,Z*4],c=[(a[0]-b[0])/4,(a[1]-b[1])/4,(a[2]-b[2])/4];qm(b[0]+c[0],b[1]+c[1],Jm(b[2]+c[2]));em.push(setTimeout(function(){qm(b[0]+c[0]*2,b[1]+c[1]*2,Jm(b[2]+c[2]*2))},gm));em.push(setTimeout(function(){qm(b[0]+c[0]*3,b[1]+c[1]*3,Jm(b[2]+c[2]*3))},gm*2));em.push(setTimeout(function(){qm(a[0],a[1],Jm(a[2]))},gm*3))}
function Gm(a){var b=0,c=0;switch(Z){case 0:c=-1;break;case 1:b=1;break;case 2:c=1;break;case 3:b=-1}a||(b=-b,c=-c);b/=4;c/=4;var d=Jm(Z*4);qm(X+b,Y+c,d);J.tb.play("fail",.5);em.push(setTimeout(function(){qm(X,Y,d)},gm));em.push(setTimeout(function(){qm(X+b,Y+c,d);J.tb.play("fail",.5)},gm*2));em.push(setTimeout(function(){qm(X,Y,d)},gm*3))}
function om(a){var b=Jm(Z*4);qm(X,Y,16);a&&J.tb.play("win",.5);gm=150;em.push(setTimeout(function(){qm(X,Y,18)},gm));em.push(setTimeout(function(){qm(X,Y,16)},gm*2));em.push(setTimeout(function(){qm(X,Y,b)},gm*3))}function qm(a,b,c){var d=T("pegman");d.setAttribute("x",a*50-c*49+1);d.setAttribute("y",50*(b+.5)-26-8);d.setAttribute("transform","rotate(0, 0, 0)");b=T("clipRect");b.setAttribute("x",a*50+1);b.setAttribute("y",d.getAttribute("y"))}
function Fm(a){var b=X,c=Y;switch(a){case 0:b+=.5;break;case 1:b+=1;c+=.5;break;case 2:b+=.5;c+=1;break;case 3:c+=.5}b*=50;c*=50;var d=a*90-45;a=T("look");a.setAttribute("transform","translate("+b+", "+c+") rotate("+d+" 0 0) scale(.4)");b=a.getElementsByTagName("path");a.style.display="inline";for(c=0;c<b.length;c++)Km(b[c],gm*c)}function Km(a,b){em.push(setTimeout(function(){a.style.display="inline";setTimeout(function(){a.style.display="none"},gm*2)},b))}
function Hm(a){a=Math.round(a)%4;a<0&&(a+=4);return a}function Jm(a){a=Math.round(a)%16;a<0&&(a+=16);return a}function wm(a,b){if(!ym(a,null))throw km.push(["fail_"+(a?"backward":"forward"),b]),!1;switch(Hm(Z+a)){case 0:var c="north";break;case 1:c="east";break;case 2:c="south";break;case 3:c="west"}km.push([c,b])}function xm(a,b){a?km.push(["right",b]):km.push(["left",b]);Z=Hm(Z)}
function ym(a,b){switch(Hm(Z+a)){case 0:var c=Yl[Y-1]&&Yl[Y-1][X];var d="look_north";break;case 1:c=Yl[Y][X+1];d="look_east";break;case 2:c=Yl[Y+1]&&Yl[Y+1][X];d="look_south";break;case 3:c=Yl[Y][X-1],d="look_west"}b&&km.push([d,b]);return c!==0&&c!==void 0}function zm(){return im.filter(function(a){return a.node.style.display!=="none"}).length!==0}function Am(){var a=im.filter(function(c){return c.node.style.display!=="none"}),b=a.length===jm;jm=a.length;return b}
function Lm(){document.getElementById("saveButton").addEventListener("click",function(){var a=URL.createObjectURL(new Blob([parseInt(window.localStorage[rl]||"0")],{type:"text/plain"})),b=document.createElement("a");b.href=a;b.download=Date.now().toString(16)+".bcy.me.txt";document.body.appendChild(b);b.click();document.body.removeChild(b);URL.revokeObjectURL(a)});document.getElementById("loadButton").addEventListener("click",function(){document.getElementById("fileProgressInput").click()});document.getElementById("fileProgressInput").addEventListener("change",
function(a){if(a=a.target.files[0]){var b=new FileReader;b.onload=function(){var c=parseInt(b.result.trim());isNaN(c)?alert("File content is not a valid number."):(window.localStorage[rl]=c,location.reload())};b.readAsText(a)}});document.getElementById("clearButton").addEventListener("click",function(){confirm(U("Index.clear",!1))&&(delete window.localStorage[rl],location.reload())})}
(function(a){function b(){window.BlocklyGamesMsg?(window.BlocklyMsg&&(q=window.BlocklyMsg),a()):setTimeout(b,99)}window.addEventListener("load",b)})(function(){function a(){b.style.top=Math.max(10,c.offsetTop-window.pageYOffset)+"px";b.style.left=Vj?"10px":"420px";b.style.width=window.innerWidth-440+"px"}Sl();document.body.innerHTML=Ul();Lm();wl();var b=T("blockly"),c=T("visualization");window.addEventListener("scroll",function(){a(null);Ii(J)});window.addEventListener("resize",a);a(null);Cl();uf(J,
dd);J.tb.load(Vl,"win");J.tb.load(Wl,"fail");Bj("moveForward,moveBackward,turnRight,turnLeft,isPathForward,isPathRight,isPathBackward,isPathLeft");for(var d=0;d<$l;d++)for(var e=0;e<am;e++)Yl[d][e]===2?hm={x:e,y:d}:Yl[d][e]!==3&&Yl[d][e]===4&&im.push({x:e,y:d});lm();Al();nm(!0);uf(J,tm);document.body.addEventListener("mousemove",Im,!0);ck("runButton",rm);ck("resetButton",um);ak===1&&(na=ma*=2);ak!==10&&setTimeout(function(){uf(J,mm);mm()},5E3);d=T("dialogDoneButtons");e=document.createElement("img");
e.id="pegSpin";e.src="common/1x1.gif";e.style.backgroundImage="url(maze/pegman.png)";d.parentNode.insertBefore(e,d);Ml();Nl()});
